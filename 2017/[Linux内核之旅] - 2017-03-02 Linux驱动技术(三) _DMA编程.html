<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		Linux驱动技术(三) _DMA编程
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664603792&amp;idx=2&amp;sn=89ec04141a4317800466414639815ed3&amp;chksm=f04d8d75c73a04638d16df611f2050e0c74680bea32a55330e785e0c6c48d4b7ed183139a5a2&amp;scene=27#wechat_redirect&cpage=47' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">Linux驱动技术(三) _DMA编程</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2017-03-02</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <blockquote style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">本文转载自 嵌入式Linux中文站</strong></span></blockquote><blockquote style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">来源：http://embeddedlinux.org.cn/emb-linux/kernel-driver/201702/12-6170.html</strong></span></blockquote><p><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><br  /></strong></span></p><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">DMA即Direct Memory Access，是一种允许外设直接存取内存数据而没有CPU参与的技术，当外设对于该块内存的读写完成之后，DMAC通过中断通知CPU，这种技术多用于对数据量和数据传输速度都有很高要求的外设控制，比如显示设备等。</p><h4 style="margin-top: 10px; margin-bottom: 10px; font-size: 14px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.1; background-color: rgb(255, 255, 255); word-wrap: break-word !important;">DMA和Cache一致性</h4><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">我们知道，为了提高系统运行效率，现代的CPU都采用多级缓存结构，其中就包括使用多级Cache技术来缓存内存中的数据来缓解CPU和内存速度差异问题。在这种前提下，显而易见，如果DMA内存的数据已经被Cache缓存了，而外设又修改了其中的数据，这就会造成Cache数据和内存数据不匹配的问题，即<strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">DMA与Cache的一致性问题</strong>。为了解决这个问题，最简单的办法就是禁掉对DMA内存的Cache功能，显然，这会导致性能的降低</p><h4 style="margin-top: 10px; margin-bottom: 10px; font-size: 14px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.1; background-color: rgb(255, 255, 255); word-wrap: break-word !important;">虚拟地址 VS 物理地址 VS 总线地址</h4><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">在有MMU的计算机中，CPU看到的是<strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">虚拟地址</strong>，发给MMU后转换成<strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">物理地址</strong>，虚拟地址再经过相应的电路转换成<strong style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">总线地址</strong>，就是外设看到的地址。所以，DMA外设看到的地址其实是总线地址。Linux内核提供了相应的API来实现三种地址间的转换:</p><pre style="margin-top: 10px; margin-bottom: 10px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; widows: 1; overflow: auto; font-size: 13.3333px; line-height: 20px; color: rgb(51, 51, 51); word-break: break-all; border-width: initial; border-style: none; border-color: initial; border-radius: 4px; font-stretch: normal; white-space: pre-wrap; background-color: rgb(39, 40, 34);"><code class="" style="margin: auto; max-width: 100%; box-sizing: border-box; color: rgb(0, 0, 0); vertical-align: middle; display: block; height: auto; overflow-x: auto; background-image: initial; background-attachment: initial; background-color: transparent; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//虚拟-&gt;物理<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span>virt_to_phys()<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//物理-&gt;虚拟<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span>ioremap()<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//虚拟-&gt;总线<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span>virt_to_bus()<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//总线-&gt;虚拟<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span>bus_to_virt()</span></code></pre><h4 style="margin-top: 10px; margin-bottom: 10px; font-size: 14px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.1; background-color: rgb(255, 255, 255); word-wrap: break-word !important;">DMA地址掩码</h4><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">DMA外设并不一定能在所有的内存地址上执行DMA操作，此时应该使用DMA地址掩码</p><pre style="margin-top: 10px; margin-bottom: 10px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; widows: 1; overflow: auto; font-size: 13.3333px; line-height: 20px; color: rgb(51, 51, 51); word-break: break-all; border-width: initial; border-style: none; border-color: initial; border-radius: 4px; font-stretch: normal; white-space: pre-wrap; background-color: rgb(39, 40, 34);"><code class="" style="margin: auto; max-width: 100%; box-sizing: border-box; color: rgb(0, 0, 0); vertical-align: middle; display: block; height: auto; overflow-x: auto; background-image: initial; background-attachment: initial; background-color: transparent; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">int</span> <span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">dma_set_mask(<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">struct</span> device *dev,u64 mask)</span></span>;</span></code></pre><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">比如一个只能访问24位地址的DMA外设，就使用<code style="margin: 1px 5px; max-width: 100%; box-sizing: border-box; color: rgb(199, 37, 78); line-height: 1.8; vertical-align: middle; display: inline-block; word-wrap: break-word !important;">dma_set_mask(dev,0xffffff)</code></p><h2 style="margin-top: 10px; margin-bottom: 10px; font-weight: bold; font-size: 21px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.5; border-bottom: 1px solid rgb(234, 234, 234); background-color: rgb(255, 255, 255); word-wrap: break-word !important;">编程流程</h2><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">下面是在内核程序中使用DMA内存的流程：</p><blockquote style="margin-top: 10px; margin-bottom: 10px; padding-top: 5px; padding-right: 10px; padding-bottom: 5px; max-width: 100%; box-sizing: border-box; border-width: 2px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-color: rgb(239, 239, 239); white-space: normal; widows: 1; font-size: 13.3333px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; background-image: none; background-attachment: initial; background-color: rgb(255, 255, 255); background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial; word-wrap: break-word !important;"><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em;"><img data-ratio="0.6375" src="data:image/JPG;base64,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h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjTh9X2PV+8h8acPq+x6v3kPjWdJO8xAVED6Yx6Wkc3UdGoJC9MJqHOmzNLw60eYZg0A9A6zrqt5bKZ82duzy/RtrfrusZXF1I57XBvJJuR6Fx3iorY2UwdnZNABK58eQBhOpsdbWBA+9W4QyoZA1kmUQxxtZG0Abxe+7o3D2LLbSVVdKICNlSjKT9aTeRf0DT/u9ConYKinsIo5L6hso09q5r6cSwVRbRUscbMzeQzlPLSD1btN33Kqtip4sNnEEcbLtBIY0C/UdFvxCR8WHVMjHZXshe5pHQQCtcjp5MSZEyYxxtjD3ANBLtbW13BYR1EsgpHXPKqHsfbpADwP7gLJ1Rs3Vz5ZskcJaQ47mjKCp5myzUVU+pzOEkoayFrc1mhwsLdZ3m/X6FjJHT8Jp74Y7RkloNnHr9Dlb7ejr1VNFEx76gvgytE4cwPZ9GzGjT7rHcpqmkia00tHBCKh7rbVrW5oWm93Hpvvt6belb6qipYMPEcVLGGRuYQxsYO4gbvu0UkeU0r6JlK55mkkeWxhgDWh4sCCRvaRoujQtp2CZtPTMpw2SzmsaBc2Gun329iqRERERERERERERERERERERERERERERERERERERERapKaGV+aSNrza3KFx+S1mKSB16ZjCw74vo+0H/AOP9l46WqeMopnRh2hdnaS302/8A79y3PjvAYmOLOTlBGtlG/B45GhjqicxloY9pffO0XNiTrY36D6FRJSF7ZGNqJImPAAEdhl67G3T/AP4tlPTxUsDYYWBkbdwC1vpS8yZaiaPOAOSRybX3XHTdYw4dTQSbRoe+QXs6SRzyL77XJsvGYewGYvlkeZg0aOyZWt3AZbdZ/NDhtOWSMcZ3tkbkcHVDzce06LeIIxUGcA7QtDCcxtYa7t3StfAoBTCnG0awEnkyuDrk3PKBvvPWsBhdGGBmzdlD2vymR1iWgAX113DRUNia2V8gzZn2vdxI09G4LB0GarjqC88hjmBttNSDf/2r2ohfPFkZPJDc6ujte3VqDZa4aCmp4jHFGW3N3OzEucesu3ko6hZMwsqZH1DS7MGvsANLW5Nrj77rA4eGvaaaU0rGtIDIY2DefS09S3U9PwcSXkdIZHl5LgOoDo+5bkRERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERf/Z " src="dJZuddiardMFPXRywlXL1e1XoPouYN5LFZrz9wma3h7bqzVhRFD2dcWxohgrJyIMmzSua0avAXFibg3sfjgQaTqg"  data-type="png" data-w="640" style="max-width: 900px; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; display: block; width: 566px; word-wrap: break-word !important; visibility: visible !important;" width="100%"></p></blockquote><h2 style="margin-top: 10px; margin-bottom: 10px; font-weight: bold; font-size: 21px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.5; border-bottom: 1px solid rgb(234, 234, 234); background-color: rgb(255, 255, 255); word-wrap: break-word !important;">一致性DMA</h2><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">如果在驱动中使用DMA缓冲区，可以使用内核提供的已经考虑到一致性的API:</p><pre style="margin-top: 10px; margin-bottom: 10px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; widows: 1; overflow: auto; font-size: 13.3333px; line-height: 20px; color: rgb(51, 51, 51); word-break: break-all; border-width: initial; border-style: none; border-color: initial; border-radius: 4px; font-stretch: normal; white-space: pre-wrap; background-color: rgb(39, 40, 34);"><code class="" style="margin: auto; max-width: 100%; box-sizing: border-box; color: rgb(0, 0, 0); vertical-align: middle; display: block; height: auto; overflow-x: auto; background-image: initial; background-attachment: initial; background-color: transparent; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">/**
 * request_dma - 申请DMA通道
 * On certain platforms, we have to allocate an interrupt as well...
 */</span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">int request_dma<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(unsigned int chan, const char *device_id)</span></span>;<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">/**
 * dma_alloc_coherent - allocate consistent memory for DMA
 * @dev: valid struct device pointer, or NULL for ISA and EISA-like devices
 * @size: required memory size
 * @handle: bus-specific DMA address *
 * Allocate some memory for a device for performing DMA. &nbsp;This function
 * allocates pages, and will return the CPU-viewed address, and sets @handle
 * to be the device-viewed address.
 */<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void * dma_alloc_coherent<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(struct device *dev, size_t size, dma_addr_t *dma_handle, gfp_t flag)</span>//申请PCI设备的DMA缓冲区<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />void *pci_alloc_consistent<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(struct pci_dev *hwdev, size_t size, dma_addr_t *dma_handle)</span>//释放DMA缓冲区<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />void dma_free_coherent<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(struct device *dev, size_t size, void *cpu_addr, dma_addr_t dma_handle )</span>//释放PCI设备的DMA缓冲区<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />void pci_free_consistent<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">()</span>/**
 * free_dma - 释放DMA通道
 * On certain platforms, we have to free interrupt as well...
 */<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />void free_dma<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(unsigned int chan)</span></span>; </span></code></pre><h2 style="margin-top: 10px; margin-bottom: 10px; font-weight: bold; font-size: 21px; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); white-space: normal; widows: 1; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 1.5; border-bottom: 1px solid rgb(234, 234, 234); background-color: rgb(255, 255, 255); word-wrap: break-word !important;">流式DMA</h2><p style="margin: 10px auto; max-width: 100%; box-sizing: border-box; word-wrap: break-word; min-height: 1em; white-space: normal; widows: 1; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; background-color: rgb(255, 255, 255);">如果使用应用层的缓冲区建立的DMA申请而不是驱动中的缓冲区，可能仅仅使用kmalloc等函数进行申请，那么就需要使用流式DMA缓冲区，此外，还要解决Cache一致性的问题。</p><pre style="margin-top: 10px; margin-bottom: 10px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; widows: 1; overflow: auto; font-size: 13.3333px; line-height: 20px; color: rgb(51, 51, 51); word-break: break-all; border-width: initial; border-style: none; border-color: initial; border-radius: 4px; font-stretch: normal; white-space: pre-wrap; background-color: rgb(39, 40, 34);"><code class="" style="margin: auto; max-width: 100%; box-sizing: border-box; color: rgb(0, 0, 0); vertical-align: middle; display: block; height: auto; overflow-x: auto; background-image: initial; background-attachment: initial; background-color: transparent; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">/**
 * request_dma - 申请DMA通道
 * On certain platforms, we have to allocate an interrupt as well...
 */<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">int request_dma<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(unsigned int chan, const char *device_id)</span></span>;<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//映射流式<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />DMA</span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">dma_addr_t</span> dma_map_single(<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">struct</span> device *dev,<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void</span> *buf, <span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">size_t</span> size, <span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">enum</span> dma_datadirection direction);<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//驱动获得DMA拥有权，通常驱动不该这么做<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void dma_sync_single_for_cpu<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(struct device *dev,dma_addr_t dma_handle_t bus_addr,size_t size, enum dma_data_direction direction)</span></span>;<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//将DMA拥有权还给设备<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void dma_sync_single_for_device<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(struct device *dev,dma_addr_t dma_handle_t bus_addr,size_t size, enum dma_data_direction direction)</span></span>;<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">//去映射流式<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  />DMA</span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">dma_addr_t</span> dma_unmap_single(<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">struct</span> device *dev,<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void</span> *buf, <span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">size_t</span> size, <span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">enum</span> dma_datadirection direction);<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">/**
 * free_dma - 释放DMA通道
 * On certain platforms, we have to free interrupt as well...
 */<br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span><span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">void free_dma<span class="" style="max-width: 100%; box-sizing: border-box; word-wrap: break-word !important;">(unsigned int chan)</span></span></span>; </code></pre><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name"></div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='http://i.ijrou.com' target='_blank'>
			我的博客
		</a>
	</div>
</body>