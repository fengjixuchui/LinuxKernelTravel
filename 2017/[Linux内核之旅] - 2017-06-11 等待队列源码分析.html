<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		等待队列源码分析
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664604148&amp;idx=1&amp;sn=a56034f740ad32b7025d40ed75ba43ce&amp;chksm=f04d8c11c73a05071a761f1341a1c48ab157949af524937f468a314b2a550d8776a707043502&amp;scene=27#wechat_redirect&cpage=37' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">等待队列源码分析</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                                                        <span class="rich_media_meta rich_media_meta_text">
                                                        武特
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2017-06-11</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p>正如list_head结构那样，等待队列(wait queue)作为linux内核中的基础数据结构，与进程调度紧密结合在一起；在驱动程序中，常常使用等待队列来实现进程的阻塞和进程的唤醒。因此，我们很有必要对它的内部实现进行分析。</p><p><span style="color: rgb(0, 128, 255);"><strong><span style="font-size: 18px;">0.数据结构</span></strong></span></p><p>一般我们的链式线性表都会有一个头结点，以使我们迅速找到这个线性链表的“领导”。在等待队列中，同样有队列头，只不过等待队列头和普通的等待队列结点定义有所不同。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">//yoursource/include/linux/wait.h</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">struct __wait_queue_head {</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;spinlock_t lock;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;struct&nbsp;list_head task_list;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;};</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;typedef&nbsp;struct&nbsp;__wait_queue_head wait_queue_head_t;</td></tr></tbody></table><p>可以看到，等待队列头结构中封装了list_head结构。这么做是可以想象到的，因为队列和栈本质上还是双联表。当我们适当限制双联表的某些操作时，就可以实现这样的功能。另外，等待队列头结构中还有一个自旋锁结构的变量lock，它起到了对等待队列进行互斥操作的作用。</p><p>在等待队列结构中，除了使用list_head结构外，还有以下几个字段：</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">typedef&nbsp;struct&nbsp;__wait_queue wait_queue_t;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">struct __wait_queue {</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; unsigned&nbsp;int&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define WQ_FLAG_EXCLUSIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; void&nbsp;*private;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait_queue_func_t func;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; struct&nbsp;list_head task_list;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">8</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">};</td></tr></tbody></table><p>flag：指明该等待的进程是互斥还是非互斥，为0时非互斥，为1时互斥；<br  />WQ_FLAG_EXCLUSIVE ：从变量可以看出，此宏代表进程是互斥的；<br  />private：void型指针变量功能强大，你可以赋给它你需要的结构体指针。一般赋值为task_struct类型的指针，也就是说指向一个进程；<br  />func：函数指针，指向该等待队列项的唤醒函数；</p><p>我们可以通过下述图来详细了解等待队列头和等待队列的结构关系：</p><p><img src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABOCAYAAACaNiuQAAAgAElEQVR4nOx9eXiV5Zn+/Z19zzknO0kgC2Rh38IqILsKBUQpOtrWtmrr1Dq1tf316rQdtRVtpzNqZ1rH4tJhrAoiqCigIIJIJAohBAIJCWQPJDn7vp/fH4fnzXtOEiAbuPBcV67kyznnO9/3Ls9yP/fzfEI0Go3iulwz8Xq9UCqViEajEAQBoVAI4XCYvS6Xy3t8ht4jFoshkUh6PS9NqyAI7H9+v7/X89FrfX3fpYRfPvx39efzgiDA7Xb3+O5gMMjGJvE7aAxkMlncZxKvwe/3QywWs/MpFIoe76Xz07j3Nab89Sb+fV2ujvQ9M9flqohSqQQABAIByGQyhMNhyOXyuI0WCoUAdG8kiURy2U0VDofZhiZFGIlE2Osk/dlwtEH5z5Oik0gkEIvF/d7ApHjlcjlCoRAEQWCKmBQI3QsJvS6RSOIUvFgsZko5cXwS388re15RhUKhOMWeeM+BQIC9Fg6HLzkP12XoRbjuYV17oSm4lAd0qc+S0gAAmUwGj8cDQRAQiUQQCoWQlJQEn8/H3hMOh5kSJKUYjUYhEokgEon6/C6/3w+r1Qq32802Pa9IgP57aACYogqFQhCLxVCpVDAajZBKpUhcnqFQCCKRCIIgQBCEXhVGKBSCVCqFXC6Hx+OBWCxGJBKBSqXq8V5SQPzY8+NJ95RoAK7LtRHJdX01PELj6vP54jZdMBiMez0cDqO5uZkdm0wmeDweqFQqOBwOmEwmpnzcbjdcLhcEQWAbyGq1IhqNss+bzWbo9XooFApEIhGIxWIEg0F0dXUBANLS0ti1SKVSeDweOBwOSCRSpKam9FBAfMgVCASgUCjg8/kgk8mgUCjiztebArucRCIR5tm0t7cjGAwiHA5DoVD0ei6ZTIa2tnY4nQ7I5XIkJyf3GHeTyQSj0QilUgmRSAS73Q673Q6tVge5XMbeJwgCMjIyIAgC/H4/NBoNDAYDIpEIBEFAVlYWJBIJotEo5HI5MjMzEQqFkJqaCpVKBUEQIJVK2XcLggC5XM6U6XXFNvTylfCwQqEQW1i0kclzIKFQi8d2KOyijUafl8vl8Pl8CAQCcZ8Ph8MIBoNwOBxwOJyIRMLo7OyEz+eD0+mE2+2G3W5HKBSCxWJBKBSCy+UCAKSkpMBms0GhUEAkEsFisSA9PR0ymQxKpRJ6vR4ymQzRaBTp6enMcxCLxUhJSWHXoVAo4o6lUimSk5MhlUqvb5B+iNPpRFdXFwtj3W4PTKbYcTQahd1uh9frhUgkgtVqhcPhgFgsZsovZixskMtlCAaDiEQiUCqV6OzsRHJyCsRiEYxGIyQSCdLS0qBUKqHVamEwGKDV6pCVNSLOqEilUubdqlSqOI+PD41pvQIxAyISiSCVStn7yXOmdfxVk6+EwqJbcLvdcYqKDynEYjGcTidbkH6/H6FQCA6HAx0dHbDb7bBYLLDb7XC5XDCZTPD5fHC5XJDJZEyBSKUyCAKQnp4OvV6PpKQk6HQ6qNVqKJVKSCQSpKSkQKvVsuPEkAOIhR2RSIRZevIoaAORMpVIJCxEocVK4RNdE+EyX8UFerWE5qe3cedDRTJuvHLgRSwWw+fzwe12w+FwwGq1IhKJoK2tDYFAAA6HA06nE1arFTabDcFgkOF14XAYBoOBhcR6vR46nQ55eXkwGAyQyWRsDfDfzyu+QCAAsVj8lQ1dhUgk8qVXWH6/HyKRCH6/n/14vV60tbXj/Pl2mM1mWCwWmEwmOJ1OyOXyixMqQkpKMlJSUmAwGNgCUas1SE9Pg0ajgUQiiQuLDh06hLfffhsbNmxAJBJBJBJhYUGiBUz09CjUI88tEokwRUX4CIHvvX2efx8vPOh8XfonvY0xED+W5MlIJJK4+UkUn88HqVTK5igcDsPv9/dYQ/x5+bkOh8NwOp3o7OyE2WyG0+nEhQsX0NXVhY6ODoTDYfh8PkQiUeh0WqSkpCArKwtZWVnIy8uDTqdjykwkEn0lDdgX1sPqLS1PWE0gEIDT6YTdbkdzczPq6urQ1NQEm80OertUKkVRURFSUlKQmpqK9PR0ZGZmsqwcf05KdfOeCu/BkPj9frjdbtxzzz14/PHHMWnSpLhMUWKamyyg3W5HMBiETqeD2WxGWloapFIpbDYbvF4vy7DpdDo4nU44nU5IJBKkp6ejubkZ+fn57N79fj9MJhMyMzNhMplYqGEymeB2uxkVIBZ6aId2Ur5ikuj18tlY3tOi9/LHiV5t4jHvFfe1pnpbY739L/H8Ho8HVqsVJpMJzc3NaG5uRlNTE9xuN6JRQKGQIzc3F/n5+SgsLGRrgbyuxD2VSO/4Intm11xhUdYnEokwa8fH45FIBD6fDxaLBdXV1Th16hTOn78Al8uJ1NRUjBo1CmPGjEFGRgYKCwuH3aqEQiE8/fQz8Pt9+OlPf8rCxUTqAYnH48Fdd92Furo6zJkzB7t27cJtt92Gm2++GWVlZaiqqoLP54NYLMacOXPg8/lw6tQpfPjhh2hpaUF+fj6am5vxwQcfYN++fQiFQvjkk0/w61//Gvv370dXVxdycnJQXV2NvLw87NixA/fddx/uuusujBo16nra/WsmbrcbHR0dOHv2LNrb21FdXY3Ozk6kpKQiN3cUxo4di9zcXKSkpECj0TDvEQD7TV7mFzGsvOarWSwWw+v1QiaTsRArEAjAbDajvLwcJ06cQGdnJ3Q6HUpKSrB06VKMHDkSWq2WhWJ8av5qyK23rsFPfvITtLW1Iy8vt0+rCACnTp1CQ0MDJBIJXnvtNSxevBgNDQ1QqVSoqqpCcnIykpKS4Pf7ceutt+K5555DY2MjVqxYwULHQCCApUuXYu/evTh37hzGj5+AX/ziF1iyZAmWLFmCAwc+xtSp0/Dyyy9h1apV2LZtG375y19eV1ZfQ5FIJCxMBLo5eQ6HA/X19Th8+DC2bt0KqVSK/Px8lJbOQEFBPgwGA6O18Irri7aGrjmtgTg4FLvv378fx44dg0ajxaRJE7F27W0oLBwDoFsxEdbDZ0soZOKZzMMhYrEYOTk5WLp0GZ577q/YsGEDIxb2NrnBYBC33347BEHAm2++ycLSs2fPwmQywe/3IykpCadPn8bDDz8Mr9eL4uJi1NXVoauri2UUA4EAqqurMXr0aOzcuTMuqySTSSGXy+B0OrFp0yaMHz+ecbCu41pfL0nExIhqYTQaMWPGDMyYMQMikQgmkwnHjx/H3r178NJLzRg7dixmz56NwsIiKBRyhoVda/2QKFctJEzEd0jBmM1mHDt2DB9/fBBOpwPz58/HnDlzoNfr4zYbZfeICQ3Eg5bkjfQFiA7lfRCG9rOf/QzLly/HN7/5TXYtiWzvSCSCZ555BseOHcOYMWNw5MgR2Gx23HnnHThy5AgcDgcL57RaLUQiETQaDbZs2YJ169bh+PHjWLp0KVatWgUA+PWvf40VK1bg+eefx7x585CZmYm6ujpEo1FUV1ejpqYGy5cvx2uvvQalUnldYX3NhWAWwsAoI0lJAcpqHjlyBB9//DG6urowdepUzJ49GyNGjOhBto1EIpckFw+3iB999NFHh/MLgsEgAx75EhGn04kdO97F5s2vw+VyYf369Vi3bh0mTJjAwj3KuInF4h7uKoAeCu1qbE4KW3U6HcaNG4fnn38ewWAQxcXFAMAyQzJZjJ/j8/kwd+5c1NXVISsrCyqVCgaDAT//+c/R0tICtVqNH/zgBzh0qAwzZ85AcnIyzp8/D6PRiNGjR+N//ud/8PDDD+Pb3/42du3ahaysLDzwwAMIBIJoamqCRCLBunXrcNtttyEajWL8+PGQSCSYP3/+ddD9Sy6E7w5GeHxKIpFAJBKxfUKvSSQSZGdn44YbbkBpaSlaW1vx5ptvoq6uDqmpqVCr1QyqoeTDtVJaw05rII3s9/sZs7qyshJvv/028vLysHr1amRmZsLv9/fI4H0ZpKGhAX/84x+h0+lw661rMWHCeAAxbkwwGGQlL8FgEM3NzaisrMSUKVOQl5eH5uZmhMNhBAIBNDQ0oKCgAIFAABqNBpWVlVi7di38fj/q6+tRW1sLrVaLxYsXIxAI4N1334VOp0NRURGysrJw/PhxuFwuLFiwAOXl5Rg1ahRycnKu8egMv1wvQB4aoQoMcix8Ph8OHTqE9957DyUlJVi7di1SU1PjmP29EbSHW65KSEg8KavVijfffBOdnZ244447kJuby7CfYDDIQqovuhDZLxKJwO/3IxgMYufOndi2bRuSk5OxZs0atLa2YdSokZg9ezZTWEBMkZFSIua8IAgIBALsnNFoNM7DDAQCCIfDzDpSaQwA5u7Td0ilUgSDQWg0Gvh8vh6Y3mA3OH2ervNaz1dvhcpfFbkW90Prmeo0PR4Pdu/ejc8//xw333wzZs+efU2hhmH3sGij1dfX4+WXX0ZRURHWrVsXx9TlSxCu9Qa4nJAFArpdasKvrFYrysvLsWfPHmzfvh0qlQp/+ctfoFAoIJVKEQqFIJfLmXKiz4dCIVaESwA+z42RSCTw+Xys4wDhf1TErFKp2CIjnIIUikQiiVv0er0eI0eOHPBmICykpqamx7XS9V7qvJd7f3/PF4lEYDAYkJWVddni7S+TmEwmtLe39+szQ6HgKONNhoAiJI/Hg71790IqleIHP/gB9Hr9oL5noDLsHhYRHZ999lnMnz8fK1euHM6v+0KIw+HACy+8AEEQEAwGoVarkZaWBrFYDI/HA7Vazbwft9sdd0z4VyAQYN4Sf0zeVDgchlKphNfrZQXO5L3xEolEoFar4fF4EAqF0NDQiN/+9jeMdd9f8fv9aGpqxmuvvcp4b1TATPgGKVGXy8XKRoirRmNCoC8pYyJE0lj0dazRaOD1epniF4lEqKqqwi9/+UsoFIovXBq+v0JKZ9OmTXC73TAYDAC6jSMpECrQJm/a4/FALpfD6/WyY4VCwcaMP9bpdHA4HNBoNHA4HNDpdHC5XNDpdLBYLNDr9XC5XFCpVPD5fPB4vIhGI7jrrruwZcsbOHOmFvfeey9GjBjBjOzVkmGf3UAggC1b3kBJyVjccsstw/1111yI0f7AAw9AIpFg69atyMsrwJQpk1iTOpFIxApriZ7AH5O3RKEhf0xCwGdim5e+ir7dbjfcbje6urYCiBXYDsQix4i9PowcORIrVqyIa45HipPS4eTxUXsXClsp00uvi0Qi5nUCuKJj8gQEQWB1emq1egAz9sUSqgkEgIULFzIckuaX1gMZP6VSyTpNEAH5csfRaBQymazH64Qzk+EhY9vW1oaPPvoICoUCt922Fp988gk2btyI+++/HyNGjLhkI8mhlmH3n6urq+Fw2LFu3e29Fot+1YTPvBDWo9WqYbfbWahGngZZysRjfoP3dkyeVjgcjvs/0M2/oR/K7vBtTygZQJ/prwSDIaZwCF+jY6qVJOyNQleig9C10vfTBqJ0++WORSJRXCKDvpfG+ssuiWxzqgBJlEgkwrp7kPfKjxVl43s7BuIzkDKZjK1Bfr2R8oqNdYgptPnz52Pu3Ll46aWXWK0k3+JoWMdnuE5MC3Xfvo9w2223sQ35VReyjkThUCgUsFgsDPwmz4hwO8Ky6HWqKyRQnV6n95P3Qp4Zv7j4Tpz0I5PJmEcS88RCLGs70AWmVnd7Z9QXi5rqUS8r2lAUDtI1EpGRv3a6RtqAdG90TMkYCiPJK6TjRH7el1lI6fJ4JLWfoXGUSCTsmN9XfTVjpPEhL53v+kHrhOaG3kMGjpSZSCRAqVSycH7RokUYMWIENm3axDDYxMaHwyHDxnQPBAK4cOECLBYzioqKAHSTP78OQouCwEtaBKFQiGFSZNFoAwqCAI/Hg7q6Opw714DVq1cxD4YWFFk0PpTiOz4kZgUpIcA3/eMVYH/ng0840LWTEiEjlbhRfD4famtr0dLSivz8POTn58d1pnC5XKzZnsPhYJuRcDs+RCFlSx4WTxT+Kqwt3oMEuguyyeCQwqJ75YviP/74Y9hsNkaHobEDYiE7GVDKJpP3TUIeM80lge2xuY59D4WWSqUSt956K/7zP/8TVVUnMGnSROZRD6dIhgMwIxzjzJkzyMzMZINMN/p1E566QXgTKRsimMpkMvj9fgQCAezYsQNvv/02brnlZtYAUKfTIRqNwuVyIRqNIjk5GVarlZ0vsQ0ySWIlPv+/gQh5ALSBaK5JuZAFp41C9/n2229DJpOhsbEBOTk5DJAnS3/hwgWo1WoIggC73Q6lUgmlUsmUNYWHfFhJ//8ydBnor5BxUalUcLvdcWNAXikRk+VyOd544w0YjUb89a9/xcKFC6FUKhmQHo1GWScPUvROpxMGgyGuhxbRdYDuvl5kKMkoEV/S7/cjIyMDK1aswI4d76CkpPiq7O1hQcr4dr9UhPlVcdkHItQTXC6Xsw1OnhJhCQQi19fX4/jx48jKyoJYLMbu3bvh8XiwcOFCdHZ2oqKiAlVVVbj33vvw+eefoa2tDb/73e/g8XjiSH0kNBdDFY7zGB2FLPw90G/aYEqlErt378bx48fx8MMPo6ysDFu3bkUwGMTcuXMxatQovPLKK6zD58KFC1FeXo65c+di+vTpPZQVgc608a52lupqCYWC3aF8OC5MpP8rlUr4fD6UlZWhuLgYq1evhlqtxjvvvAOn04nJkydDo9Fg9+7daGhowPr169HY2IiTJ0/iiSeeYB4Vj4HFQwhhBjcA3bw/6so7depUvPPODtTW1mLy5MnDPi5DDiqRt0BtYTQaDaLR6CU7GnzVhd9g/O9ENz8UCmHatGmYMWMGZs6ciWAwiLS0NKjVahw4cABlZWVYv349MjNHoKioEABw0003AQDDFxKFD8/43wOV3jwsCi/436RkXC4XbrzxRsyfPx9jx45FNBpFdnY2VCoVq6WUyWRYtmwZSkpK0NbWhqKiIowePZopeH7j8GNGyuurKNTbPhQKxWWJ+XunpIpKpUJJSQm+9a1vMW83IyMDI0eOxJ49e7B7927cfffdyMnJwbRp02CxWLBkyRI2dwDY+cgQ0TFlogn4558+RA/6WL58GcrLP7sqSY8hV1g8mZL4HwBYyPN1FL55G000LTrK4JH3YLPZ4Ha7YTab4fP5UFFRgZSUFJhMJhQUFOCFF17A+PHjEI1GMWrUKJSXfwYg1u2yNy+KwFceWB2MJHpYvMdD4Rrf9lcsFrN2wS6XCz6fD5999hkyMjJgsVigVCrR3NyMHTt2YP78+cjPz4fP50NVVVWcp0bKkQB6wu168yq/CkJeDT/GPA2EV+Tk8dhsNng8HrhcLhw8eBAKhQJWqxXjx4/H3/72NxQUFAAAcnJy8NlnnzFqA1VcUKunaDTK5pDPAvPCJ4fy8vJw9uzZLyfoTqAhtbSoqDjGQOevE+jOCwGgPFbAe1j88ZkzZyCRSGAwGFBXV4epU6eiuroaEokElZWVGDlyJBobm3D6dA2qq0/hhhvmIhQKQavVwmKx9PpgUb6cBhicl5XoYZFh4gmvfG90l8uFxsZGqNVqNDY2QqlUYuLEiTh+/DgkEgnr07R48WKUlZUxAu348eMhlUpZGRK/cROPh8p7/CIJeVi80uI9LCKJqlQq5oU1NzdDLBbj3LlzmDNnLo4ePYqkpCRUVlZCr9fjwoULOH36NI4fP44FCxbA6/VCoVAww0B96ShTS8ekKPsa35SUFASDsX71w93eaVhAd5IRI7Kwc+cuBgwOd+uXL6LwyoIekUWgJS1G/nj8+PEoLS1li8jtdmPBggWIRqP48MMPmUIIhYJ45JGfxXWG0Gg0fX4/n3kazJzTOcjz6cvDIgVsNBoxYcIElJaWIhwOY/bs2QiHw1iyZAkr/F66dCk0Gg1sNju+//3vxfW+pzCQzxomHvP3+VURypT2du88edTv90MQBDz44IMIhUKYNWsWo4zMm3cDBEHARx99xB4Hd+HCBfzqV79idAgepuAxLDqm75NI+n5Ibqz9ckyBDvccDDmoxGNVubmjEAj40dnZhfT0NObO88LHvb2FNNe6/85ghVLFZBEpW8g/+YY/JuVDbWx4ZbZw4UJ0dHTA5/NhzJgxzOKSF9LXYqHU91BgDHQO3luk8pnePCwqryFiIuEu5ClFo1GsXr0aHR0dSE9PZ4x1qp0knIU2Dj9GdPxV5PjxHhbdO0+gVSgUzAMKBoNMwRC8QBBMNBrF/Pnz0dHRAafTiXHjxsHv90OtVrPqAb5Eis5Hc0gRUzDY9/Mm6WG9X0riKA+sK5VKFBYWoqbmdK9P8QW6N1NfN3u13Xz+uW5DscFFIhFTOqQ0yDshgiV/LAgC1Go1JBIJK5/R6XQQiURQqVTIyclhHUXJCmu1WsaJ4vuGEWBKHl4MwxIxZTjQ+wmFwuwJ07TAiR9FCpq+m7J4RJhVqVSQyWQs3S6TyZCUlITi4mKo1WqoVCqEw2HWg0mlUrEQiLxRAIzyQAz63tjgX2ah0I+nMpBRS/SAaExoj2k0GqZ0RCIRtFotsrOzMWnSpIuVF1pWewqAKS8+cUMPM6E5lUrFfa6ZGLFX1KOOdThk2M3S/PnzsW/fPmZxE4UIln0ppqtNhaBJGcymTjxfIBCMa5rGA5pXckwLgeoN+WPasEC3kuV/iA1N4KxMJmWYx0Akpny6KQWJWUG+lpC8AD6zRVwxvvaQrp2Kv4nvQxgZX1hNnhfRQmhM6Tu+ShIKhRkAzrfhTkxq8OEhH+b1Rri90mNBEFjtawyUD13SqXC7PVclJB/2nu5jxoyBWq3BZ599hgULFvT5PrE49lRdp9PJcAmeyAYgLn7nM25DeUyLnzJRveFC/ZFIJAK73Yb29naG6xB3hu+60NcxXSNhVbSxiRHOV/ED6JE14zNtHo8HPp+/B1jdHwmFQgiFQnC73Whvb2dKi+fyWCyWuH5ZdMx3mKBOALTRiL2dGCJrtVrmQdHY8XwsCmWIOvNlzxryYaDHE3sCDt/uhXhT5EEHAgFotVq43W7IZLI4IJ46XFCWmo5prHs7pocRk8HxeDwXM/3RPjughsNhuFxORmEaTpHwYCyAHo3Z+AGkeJb3eviUZ294k0wmw4IF8/H++x+gtLSUhT0kPGmSyG5UP0fWmrcwRFijayHchIRib/77+dd7OyarTtkRQRBgtVoxefJkLF68eFAD7HA4UF5ezvoHUV0YWTWeT0T3RJuWxgboBsoTi3xJwZKnkuiR8vPjdrtZaErKsb/cuFjxdOxRY52dnWzz0BxS8SxhS3TdfAkS3TfNBR/O8kJjQ5AB3+uLXqesGDA0/fyvFDMdLmyV5sPj8eC993ZCqVTE1ReSx0WthHjvlQfM6bdSqezxCDqaG76sCwA7L99Rg64lEAjGzS9JMBiEx+OB1+uFVqsdftCdD33IihEfg55bRhqeiiV57IDnGPn9/h49liQSCUpLS7F3715UVlZi+vTpcUxd4ggBsQeOLl26FKmpqUxT84uUUq0U5lDYlFhdnvh+IrLyuAspXpo0SvFSOUJNTQ3a2toGPcA6nQ7r169HXl4e26BUNkEhEClloj5QwSndj1arhdPpjANEKTzkN3BvCojnf8Va/Wxh5xiIxDxPOVatWoUFCxb0AH/JWvO1fnz9I88540NfMjRk1Wku+N/8XJHhkslkeOWVV4bMspNCOHjwYK/VA8FgEFqtFna7HXq9Hp2dncjIyMCcOXOGVIEZjUbMmjUbOTnZcZQgCvsS2xLRvPNGXKFQwG63IykpCW63G0qlknlUQGwuKWtNc0VjT8kUu92OUCiEt9/eEYepkYhEIpjNZmg0mqvyDAEJWWyn04n/+I//gEwmw6xZs+B2u5GSkoIpU6agubkZoVAIhw8fRk5ODqZMmYKXX34Z9957L5qamiAWi7Fr127cf/99Pb4gEAhApVJhzZo12Lx5MyZNmsSKMHsDSqmnEQ0ihQDEF9HpdGxwg8EgDAYDm4xAIACj0cgWmt/vR3JyclwjOPo8bQQCKLVaLXw+HzufVquDWHxh0ANMXmFKSgq8Xi/LmCUnJ8Pn8yEjIwNut5s1TdPpdOzRX7R4otEo+7xGo2EUCVJGtFkJs+KF3kMhITGVB3M/0WgUXq+XZYYoLFQqlUxZRSIRNrY6nS5OqRGQTmOh1WpZpsnn80Gr1cLlcsFoNMLv9yMtLS0u20gN54xGI9tAQ6UsyHMSiUTQ6w1IdBj8/gCjXNBTt4ejmiOW8ZNBq9XG8bGSkpLg9XrZetfpdKwvFtGHKHQOBoNISUkBEOs0Gw6HkZycDK/Xyz5nMBjifqtUKvj9fuh0Ovh8PqSkpFys81RCEIQePCuxWIyzZ89i1KhRVyWjLyFPRyaT4S9/+QtWrVqFrKwsVrg8ceJEHDhwAH/605+wevUavP766/je976Hl19+GStWrMDLL78Mt9uD48cr8aMf/XOPLyBPbNy4cUhJScGuXbuwevVqFlP39n6ezEabkO8PRCETADZJBFA7nU5mIYiYSNabrHqiV8B3DqAOoHa7fUistlQqZdgC4TfUaZSOiW9FXgNhCxS20fv5TJnNZmMZtSu9Tgq7BpPIiM1Fd08u8t7IAJACpS4NtLGIVa1Wq3vcKyly8pzodTJ2hMOQp8V3w6QNRJHCYDcMhbPz5s2Ly6SR8JQBPvyhzw2V8EadQHWKfPhwntYJT/6kDrN8B1KKHIg2QpgX/SYvmNYnjb3L5YJarY7z4niJRCKoqKjADTfcMCjP/UpFRIudNHhFRQUWLVrEFp9KpcKkSZPgcrlw9mw9ysvLUVtbCyAWwkUiEcycOQM+nw8XLnTAZrPFNWgDwDbVN7/5TRw+fBgtLS1xDcV4WgOBrQDiwj0KffjJam9vZ+EVZZDoWCQSwe12sz49tNBp81MfdNpIfKgRs1ixhcpf30B+aMEBYFX3Pp+PAaMEOqvVahYWut1u5lnRfZFyAoDm5mZmSflaQb6RGv2Q90FKShBEg7qfmAJjsCUAACAASURBVGEQ4pQTX+NHpSPUS4m8Oj7so2vmlVBra2uP8I/GihQ1pd9JmVH4CMTXTA7mh6AGCrvIcwqFurNk9F4Ky0hpD8X30w+1dhGLu7t58tQX3pjR3PIkU974krJqa2tjhoGUFFEXaK74iIYPvSlLSD/EFXS73WhtbUVBQcGQ3fslx4W8ESLk3XzzzXj33Xdx4MAB7N69G263G1u2bMHixYtht9sxZcoUCIIAl8uFQ4fKkJaWhoMHD0KpVOK3v/0N/va3vyEQCCAYDKKqqgqffvopqzvKycnB3LlzsWXLFmYRCZgla0WDTW4wTRqPkwGAzWbDn/70J7S3t7NNrtFoYLfbWUuO8vLP8I9//AMyWeypyHxoQpNEuBuFhzRJoVCYWdHB/JCyoMr6UCjW75w8K9qALpcLUqkUDocDBw8eZEqYZ8QDwDvvvINdu3bFeYyk6HmAmleYNNbBYBCBwODuiTYzccjoe6jYnQfSqbDZZrPh0KFDcddMLHepVIrW1lY89thjTGFT4oU2Dv+IuMRjsuhkzAY7XzRnBDrTPRNuSgRdUhw0Hvx7huKHFCJf9A2AKQrCPr1eL4AYMP7RRx+xLCIZR+p0e+zYMWzfvh0Oh4O9TkqNjDmPZfGGg+4vlnAJMiUeDAZRX18PjUaD1NRUNjbD+SPhMwiRSATt7e0oKyvDrFmz0NHRgfLycvz0pz/Fc889h4KCAjZpSqUS3/rW3Th58iTef/995OXlYeHChViyZAnzCDweD/7+979j/Pjx0Gq18Pv9WLJkCU6fPo3Dhw9j3rx5ceEJLVB+sEipkKZXq9Ww2WxITk5GWloaDAYDzp49i927dyM/Px8rVqzA9u3bYbfbMWZMIUKhEN566y2EQiGsXLmSYQBkvfkHQPDAu0qlYpjMYCUQCDKAkxYZD8DzJD2j0YiNGzciOTkZdXX1cLmcWLp0Kfx+P/bt+whabezxYO+//z7C4TDWrFkTt5B7K1LlS3J4b3YgQuuFrDZfJ6nVapkS8fv9MBgMrL7sb3/7G3Q6Hdrb29HV1YVly5YhEongrbfeQmlpKUaOHAmz2YwXX3wRa9aswejRo5mBIs9Ko9HA6XQyhU+GCeiuYf2qSCwz193AMLFvGq0XCqEbGxvx4osvYty4cdi3bx+MRiMWLFiAsrIynDx5Evfddx927dqF/fv3o739PO699/vMiNP5iajL7w+FQgGbzQafzx+3dsjzq6iowKxZs5iDMdxzICIPwOPxYMqUKVi37puYPXs2NmzYgAcffBDvv/8+XnrpJej1evz4xz9GcXExQqEQRowYgTfffBMffPABnn76aTz++ONwOp3Yvn07WzwlJSWIRCI4c+YMC080Gg1uv/127N+/HxcuXOhhvSmLR7/58hWlUsk8KQKmrVYrduzYgbVr1+LEiRMwm81obm7GihUroNVqcOrUKXR2drKmZk6nE4IgsDDRbrczT4aUB8XuxBIf7I9CEWMcE7bAe1ZutxuCIDBlZrVaMXXqVBQWFiIlJRlZWVnYtWsXDhw4gKKiQmRnZ+P06dPo6urC4sWLmecll8sZ+5v/iURiPeN55v5gPaxAIIikpCSGe5CCp5A7EbPy+XwYO3YsMjMzodFokJSUhH379uGjjz7C2LFjkZGRgXA4jC1btmDt2rVIS0uDIAgMPKbvIeyKMsW04QD08Na/7D9KpZIloHhSLI0FebGEUeXk5KCkpAROpxN5eXk4cOAAZDIZysrKMGnSJNaqu6zsU6xbdzt8Pl+c8SZlyHv25M2q1WooFPKLHnqAGUCn04m6ujpMnjyZeaPD7mEBYOUR27ZtAwAsWbIYKpUK8+fPx6xZs+D1+qDRqCEWi3HzzTdj2bJl+PGPf8yoAzSwDzzwAHPbCXNYtmwZtm/fjokTJzIwPC8vDzfeeCM2bdqERx55JI6pzOMUpERcLldcRwCe2WswGCAIAkaMGAGJRMK+W6/Xo62tHQqFAgaDkU0ytbzhH3HEY1xqtfqie6wYkoxHKBRr3k8hEGXIEvEZ2uiUPXS5XDhx4gQKCwsRiUSwfPlyHD9+nCkf8mCpbIcUE2FWfPqZ53sN9p5iBkQcB9aSYaFMFc0zGZ6kpCTmwZaXlyM/vwAWiwVr1qzBxx9/zLCwrKwsnD17Fvn5+ayY2+VyMe+cPCyaY51OB7fb3SehcSDC46S9JSfo9eHu7xYIBOISLwST8HWUVLJEWBUAfP7558xYeL1e3Hjjjairq8OyZcvQ2tqKVatWwWQyIS8vjyU3aP0TlSGWJdcyEnesLZA/7n4lEgmOHDkCpVLFDM5wjgeJiCZaIpFAr9dDr9dDo9FAJIo9BCAWn6ZAqVSyGjCDwQC9Xg+j0QitVsvSwBKJBDqdjoWMMpkMS5cuRWNjIyorK5lL6fP5MHv2bGi1WmzevJkjQgpxHgiPUxBYKwgCA9RNJhM++ugjrFy5En/5y1+QlZXFUrcvvvgSKiuPQaVSQaVS4rnnnmObnM7LZ6YIsKewkJ6AO1jhS49oY/OLjnhuFGK53W4UFRXh8OHDMBgMOHPmDFpaWvDuu++is7OTJRqUSiU2bdrEsCMgvpCchC/T4bNYAy1joUVJmVyqY4xGoyxMo01NaXKPx4PU1FQcPnwYKSmpsFotsNlsrAe5QqFER0cH1Go13ntvJ86cOQO5XA6n08kMFWWA6YnZYrGYHfNctKEQAtlpvBLHjfhIQCx0i5VfDW0dnVQqZQA4/aZsOc2lUqlk9BGqFJFIJDCbzVAqlaiqqsKOHTtgNBpx8OBBpKenIzc3Fy+//HIcc54UMCk/MjSUCIp9V/dDU+j+Dx06hEWLFkIkEjFqy3DLsKtEg8GA+++/H8888wyeeeYZpKSksEdd33777fjzn/+MY8eOYfbs2QCijERJ4RMpEbLmWq0W7e3tSE1NxSOPPILk5GREo1Hcc889jAt05513wu8PQBDAgMUlS5bAbDYjNTU1LuzkC0WdTicrc1Cr1UPCnI65siIW7vLPfyMvgl8kBoMBN910EwwGA1t4fr8fer0eFouFkXllMhmWLFkSRxgEENcckDwPymIJggCpdHD3ROfkrS+B/Xw6HQCSkpJgsViQlJSEb3zjGzAYDLDZbCwTazQamdLJzs7CiBEjMGXKFOh0OuZtUxhIGJndbmeelVqthtPpBDB0LaBJ2VIHBEoukNIihUUZU8LZePrGUIjf72cZVjKqPGxBRpUSK+FwGI8++ihLHBEJfMqUKQBiz6EcPXo0tFotiouLWaKHsuUUYhMOSetRpVLBYrHA748Zb/IsGxsb4XA4MG3aNHbNZIyHU4a9ljASiWD69OmoqanBH/7wRzz++GPMfU1NTcV9992H//7v/2YWm8ieBK7SBohGo1AqlbBarcjMzITD4cCIESMYBiUWi6HX6xnIS9m4QCDASJmpqalwOp1MKVK4SUqR97i8Xu+QPAUkxuOJZdGSkpIYzkMbla6XCJZdXV1sI6elpcFqtSIjIwM2mw1paWlwuVzssVdU50gbjJQgAbV8qAhQWU0g7oER/RUC8fV6PcsKEo5CC55wEafTCaVSCYvFwgyFVqtFNBplhF7CwnJycuB0OmE0GuF2u1mozit0UlKE49D7aJ0N1Vr2+/3YtWsXXC5XjzCHSlDoWs+fP4/Ro0dj3rx5bJ0OhRAmSUaYIgOKAEiZkXfk8/lgNBqZcQ+FQmw9GwwGWCwWpKSkwOVyISkpicEjfCUIKTEe2Kc5lculDMMEgPfeew8zZsxgiSnKag63PhnWBn5AdyOyO++8Exs3bsTPf/5zPPTQQygsLIRYLMbIkSNRWFiE7373uygoKMD69evZpBAOxlMAdDods2SkbGgj8I/dpsmgyU1KSupBbaBJ48madB567NRgxod4KjQO/GPlaeMR34qyk9R2hTJsKSkpzKsgygbx03juEI0z0RcoJc4XR5OHRUmMgVhDv9+PUCjE0T9CcQaA3wBUpJ2ens64by6Xi71fp9OxOSFlFAgEGOuavAjyKnjCY2LpiCAIQ4KjED1h4sSJFxV8NyzAg9NEBCZvpbdebwMVArc9Hm9cTS0pL/KwKGwjYDyxnItCdFrX5METlYEoPcRzdLlc0Ov1LLKhOe3q6oLP52deW1dXF2pra3HPPfew5AiFrsPOdB9ujUjZQb1ejx/96Ec4cOAAnnjiCRQVFWHFihUoKChAOBwDi00mE3PJ6XNEdeALoRNb5VIsTllE3p0lT4tvX8Iz6Ak74st1VCoVnE5Xv1jkfQkpPdqApGRDoRDzsHi2N21sKn1xOBzsmMLJxFpKwvXIy6Dx661YPRQKxnHd+rvAYiFQkBkS2hC8teaJsVQqxf+fros8MPKU+Cwjj2MSZkWf50NqqVTKlD6tt6EQ6n/eHxmK7yYFGYMkuh9jxhcoA2AeVGLrGVJCvKdNc0NzQuNF+4CUDhltnvfIA/y0zvbs2YN58+YxY0/Y1UCNYH9k2D0sSkeSwli+fDmmT5+ODz/8EM899xz8fj8aGxtRWjoDYrGIpUf5/jx8jRR/TGxrUj6J1p5f+IlkOD7tTuEneWb0OnVuGMy98/dBVhmIgfGUpSHMiSwfT/6jsICuly/s5hvl8ce8kAdGlQUKhSKurKa/9xejeoB5i7QBqDcXeYt0D3TN5BXymVHKAqpUKphMJhYeUsExz/OiY1JqdOxwOMBjvcO9nodbKMSj+SdDRIqKL1Oj/UDYEYWN5JHT+uZJofx+4IF3/piUE4292+1mystms6GyspK1WebDRKIBDacMO+hO4CQAVFVVoa6uDkqlEqtXr8aqVauwf/8BPPXUk6ivr4NcLsdTTz3F3FRy/WnT9fYb6FaKNNAXLlxATk4OK6cgL4MsAX9M4RRvqQRBgM1mw6xZswZ9/x6PB5s3b4ZCoWCMeiA+e0ihDB/KAQIikTDzRhobGzF69GimlPgSDrqn3jwm3sOizCfftK2/EvtsAO+//z7OnDnDFijvXfAWn8aV5oc84mg0ivPnz0On07HiZ8qkEogMoMcxUSDIExeLxWhsbMJ3vvOtq5JWvxoiFothNptx6NAhJCUlAUDcWufHmk+oxMYlCiDKDPaZM2dQVFQUVy3BQwn0OTqmPULr0+8PIBqNwO+P7eGPP/4YhYVFDBemfvHTp09HXl7esI/NFc8w3Szd+JUW0NLG+PTTT2EymTBt2jRoNBqoVCoIgoAlS5agpKQYSUlJeOWVf2Dx4kVITU1lG4u+ky9FIFCRvCy+Wj8YDOKxxx7DfffdF/f/xMJYviqf/uZT1s3Nzejo6LjS4ekxVnTtarUad955JwoLC3u8jxQHX/9FVioUinkytDgfffQxPPjggwC6sRS+zpKOe+uAQR6Vy+ViXLsrdd35eSdRKpVYtGgR1qxZ02vDwEgkCpFIiEuB08bgr/lPf/oTvvGNb6CgoIDNDcEA/NzzxwDYWiB54YUX2Hd/EZRWf/ZHopAB0Ov1DNflJfEe+QJ0+k3KRyQS4eGHH8ZPfvIT9n4KBXkDzR/TPBDnKxQKwWw2Y8eO92C327F//348+uijzFOfNWsWnE4nPv30U3i9XsyYMeOKxwjovX8b/b+3cbzs7NLioLCOQjY+/OAHLFEoLd/S0oIZM2b02LgqlRJjxowBAMjlMmRlZbGWGAMRut6BanvKqnk8XnR2dvb788RA5ouANRoNy+j1d0NR7aRcLkNycnK/r4eXWFapeyFcyQanujEAXGYqVheZlJQ0KAWhVquh0+lgNBoHfA6+re9AMSQygrRJByuDCYsIthCEWL0iZUEHKiKRaFDjS96tWq3Ehx9+iEmTJrH9KRaLkZGRgbS0NPj9ftTU1FxWYYXDYcZ57I23Ra/1RQa+bEzAey4U/1IoRYqKcIqhbK9xrYQv9CT8ie9geiVCyp0PMQeCFw21xEJPMcO0rkTZ8GCuVqu96M0FBo3vDZXQuPa3JxZfgUDp+MG03eGFcMWBEI95jPKLIBR9mM1m7Nu3D9/4xjd6jDN1triS/c/vq94MDN+Vpbd9d8kZpjQmZej4p5OQl8WDupdawAMBd6+VkGc0EAUc8848+PTTT9Hc3ByXGr+WG5zG0+fzsXm7kg1FCksqleLQoUOoqalBKBRmIP61FhpTUlpXIlTeBAC1tbU4fPgw6ws/FELdKK5kDZNBpJ89e/ago6PjC1PITYapoqICc+fORUZGRp/vvZJr5lnxfRkYqprobb9ITp8+jdGjR8fFrpTiLysrw9mzZ3HHHXew1yjbdeDAAYhEIowfPwEWixmTJ09m2Qir1Qqfz4fMzEz2RZeaPD5WpZo73jshi8ODhnwYSvE3aWd+3PjP8AOQCGLa7Q643S5kZWWxEOO9995DQ0MDOwfhXJcSwuy2bt0KQRAwduw4/Pa3v2GtagjM5MHoxOvjiXjEw4lEoj3uhf8Mxfz8fVmtVgQCAaSkpDAFXFtbiz/+8Y+xyZdILrvIKCHg9/tx4MABNDc3Y9myZVi8eDFTxtQlgsfiSChE57EVSqjQd/Nrg8cuEueb3ltXV4fi4mL2vvr6evz5z39mmOSVCAH3p06dwieffIKVK1fiiSeeGHTYbTabsXnzFnR0XLii8JKno0QiEbz66qvQaDQoLS3FpEmTWGRD40cJF5p3PtpJTKTwe4ofV9675v9H69PpdMJsNiM7O5vRTwRB6OFd8f236F5IqqurUVhYyBIpBCEJgoBz585h586d+OEPf9gjOXPmzBl8+OGHuP/++3H06FHWUj0ajcaeiv5v//Zv+Nd//Vc4nU60tLTg5ptvhlgsxtatWxGNRuFwOPDpp5/C6XRi0aJFzKVTKBTo6upi4KrD4UBFRQWcTic6OzthMpnw4IMPsoGhi+pNKD0LxDyAUCiExsZG2O12hMNhTJo0CUeOHEF7eztuuOEG7N27FwUFBairq0NJSQlOnjyJkpIS9tw1fg+WlZWxGse8vDxUVFSgvb0dy5cvx/bt2zF58mTW5cFiseDnP//5xRRwCAsWLMCyZcv6zNAkCimMQCCA5uZmjBo16mL73G5s7OTJk2hra8OCBQvQ2trKaisbGxtRVFQEpVKJzz//HOPHj0d1dTXuuOOOi3Vt3V6N1+tFfX09mpqasHLlSrjdbuzfvx/5+fmorq7GxIkTUVVVxc7/0EMPsYxabm4e1q27nS2Cy3kl/EKORqPo6OjAkiVLWI2Z2+3G2bNn0djYiBUrVuDUqVOMWyWVSlFXV4fc3Fw0NDQgNzcXLS0tWLlyJctYer0+CIKA9vZ2dHR0oKmpCbfccgva2trwySefYPLkyejq6oLVaoVGo0FnZye2bt2K5557DjqdDlKpFCNGjMBNN93UL+yTjEJ5eTnEYjHuueeeIQkJFQoFbr11TVyjwisR8nrPnj2HmTNnMMKxx+PB+fPnYTKZEI1GMWvWLJSVlcFsNmPJkiXYu3cvMjIyYLFYYDQa0djYiDFjxmDatGkM3yNv2ufz4cyZMzhz5gxWrVoFr9eLnTt3oqSkBDU1NSgpKUFVVRUzbI899hirCZ4xY0YPLCwRBqJmmV1dXXjiiSfwxz/+EceOHYNOp8PUqVMhl8uxa9cuFmLW1taiqqoKq1evZtl6o9GItrY2llQTBAEnT57EqVOnsHXrVkgyMzNhMBhw7tw55ObmYvv27XA6nZgxYwYaGxvh9Xpx+PBhrFixAiKRiLHDs7Oz0dHRgV27drEUZ2trK4LBIJKTkxkXp7OzE2fPnoXT6bykO0lCWMQf/vAHzJs3Dy6XCw6HA//1X/+Fxx9/HO+88w4aGhqwZ88e6PV6zJw5ExUVFVi+fDnDDnh54okn8OCDD2L//v2466678PzzzzPPz+Fw4Pz582hoaMD06dPR0tLCFKtcLoVer8eIESOueCEToCiTyfDUU09Bq9WyrJxIJEJ1dTWeeuopPP744/jHP/6Bjz76COvXr8fZs2cRDAbx1ltv4dlnn8XRo0cxbdo01NbWxhEiydN84403sGfPHtx7773Yvn072tvbYbFYcPDgQeTl5aGlpQV1dXWYMGECI8bS9cWUVi7ziq5EYRHB9uGHH4ZEIkFDQyNOnjwBsViM2tpa/P73v8eGDRvw4osv4sCBA7j77rtRWlqKX/ziFxg7dixqamrg9/sxYcIE1NbWshrIWLY4BrB+8sknbDx27tyJEydOIBKJ4OjRo1i/fj2OHTsGhUKJnJxsjBgxAiqVit2XUqlEfn4+K2e5UqH+bDfddFOfIHB/RSQSIS0trd/Kj9btn//8LJRKJbZu3cqA52effRZjx45FOByG0+nE008/jaeeegrbt2/HqVOn0NXVhZSUFNx1112oqKjAzJkzmTEiLpxIJMLBgwfxwgsv4De/+Q1ef/11dHV1sTB0wYIFaG9vR319PRYuXAi32x1XLymX981iF4vFjPhLRdZqtRqdnZ3Q6XRobGxkypRqI8PhMA4ePIjS0lKWjYxEItDpdNDr9Th27Bj27t2LcePG4bXXXkNubi5GjRoFiU6nY43VqqurIZVKsW7dOrz++uuYMWMGNm/ejHnz5iEnJyeu5w1NyKRJk9Ha2oLi4mKcPn0aEokEycnJrGp8y5YtzKqq1epePRSydjThADB37lzMnTsXH374IcaNG4fp06dj0qRJOHDgAG677TZIJBJkZWXhlVdeQUZGBgwGQ5y2p/PNnz8fN9xwA44ePYpIJIIxY8ZgzZo1MBgMAID//d9NF11dMWvvTNqe7yN1JeEGfU4kErFMR2wiYueYOnUqJkyYiDFjxrDGdTfffDOefvpp3H777ay9jF6vx8GDB/HQQw+xUJg8W4/HgxtvvBEejwc5OTk4fvw47HY7vvOd7yAcDkOr1eH//u//cOuttyIQCKG9vZUpqpgx6M7wXklIyPO96IlIbnd3jd2UKVMwceJEFBcX480330RpaSmWLVsGiUSC1NRUrFy5Emlpadi4cSM++OADfP/732d1gvwjx6ZMmYJwOIwRI0agubkZwWAQ69evh0QiueihNcJms2LRokWoqKhg648P8/le/pcTUgZyuTzuyU+DxY4o9Oovx43ezz/PAIg1y5w2bRrmzJmDo0ePYsyYMZg5cybGjh2Lzz77DGvXroVMJkNaWhq2bdsGjUaD5OTkuGJtWouzZ8/GsWPHkJeXh507dyIQCGD9+vUQBAFarRavvvoq81QbGhoglUoZcbSv6IIgAI1Gg8zMTGzbtg1ZWVmM9lBeXo6amhqMHz8Rc+fOxebNm5Gfn8+UV35+PgRBYLgWeYOzZ8/Gvn37EAwGMXnyZHR2dsJgMECkUqmwadMm2Gw2pKeno76+Hm+88QYyMzOxf/9+ZGZmIisrC//+7//OLjIYDKKyshLV1dU4c+YM6uvr0dDQiMbGRlY9f/DgQUQiEfzyl7/EH/7wB3R2dqKjo4MpPJ4BT94DnZvwlm3btsHlcqGzsxPnzp2D1+vFuHHjcPToUZSVlbE6KmoqyLPk6Rw1NTWor69HTU0N2tvbodVqUVlZiZaWFjz55JMoLS3FX//6V7S0NKOs7FM0NDQwzEYqlcJqtaKqqgput5uFdX390L0Q+5tqzAKBWMmCRCJBTc1pvP7665g8eTIaGhpw/PhxzJ49G0eOHEF5eTkAoLS0FCaTCUajkW0qkSi2MaVSKaqrq1FTU4PKykq0t7ejsLAQ+/btQ3l5OX73u8dRWlqKZ555Bu3tbThw4ADOnj3LFDEtuqqqKrhcrkveD90TWT/aVEqliilRqVSKqqoqvPbaa5g6dSpz330+H7KysnDs2DGcO3cO48ePhyAIMBgMEIvFceU0EokEp0+fRmVlJaqqTqCpqQkZGZmorKxERUUF3nnnHZw+fQrBYBB///vfYTab8e6778Y9CCIajeLo0aNoaWlhONnl7osyhPzvxPXZnx/CmajM7NNPP73s+HYbtUgccTOGU4GN1aZNm2AymdDV1YXW1jZYrTaUlJTg2LFjKC8vZ6TkCRMmMIUtl8tZc065XI4TJ06gpqYG1dXVqK+vR3FxMQ4fPoz3338fTz75JGbOnIlnn30Wra2tqKqqwokTJ+I8xd7Gh7xcm82Grq4ubNiwAY888ggEQcBbb70Fo9EInU6H2trT+Oyzz+D3B1BdfQoAsHDhQvy///dL2Gw2Ng7nzp1DbW0tWzeCIODw4cOsskJoaWmJUtcC4qPEaumccdXbQIw3QwWqTqeTbSbqXmgymZCcnAxBiJUVpKensxt65ZVXUFpaiqKiojgNTcxvr9eLv/71r/jud7+L5ORkbNy4ETNmzEBWVhZkMhksFguys7Mhk8nQ1NQEuVyOtLQ0XLhwAZmZmXFW7aGHHsLzzz8Pl8uFjo4OhqkYDAZWWJqamorW1lZWVKxQKBGNRlgzspaWFmzcuBE1NTVoamrC7bffjnA4HrjvTfiaK0EQUF19Ak88sQGjRo1EMBjEE088gW9/+9vIz89HW1sbVCoVdDodzp8/D4VCgaSkJEilUnR1dSErKwuCECuR+NWvfoUNGzYgGAzC5XKxImKPx4P09HScP38eKSkp6OjoQGpqKqxWK1JSUhAMBqHX61m/pCeffBIWiwWffPIJVq9eDaVSHQf+93VPJBKJCOfPn8esWbPwT//0TwgEAtiwYQPuvvtu5OTk4MKFC0hKSmLtcdxuNzIyMpjHnZWVxRb/M888g5UrV6KgoAAmk4lhLpQooHIdCiGo8iESiSA5OZml05966imYTCa89957mD17NgoKCiCVUphxaY8p1k8qVg+5evXquHYp/RWv14tIJIL9+/fj8ccfv9h48ea49/TmefEYqUIR22unTp3Cww8/jOLiYrz++usoKSlBVlYWNBoNOjo6kJubB5FIYA/voH2p1WqhVCrZfH7ve9/Dxo0b4XQ64fF44Ha7WafenJwctLW1QafTwWw2s8Joqj3MyMiAUqmEyWTC669vwQMP/KDPULe2thYVCwqRDAAADd1JREFUFRVYvXo1pFIpOjs7oVarYbVa2X6gEiyVSsU8a3rkGJV3EdZGzkh2djZqa2uRlpYWA+gzMzPh8XiQnZ3NapcAMICNbyz3yiuvMNbxsmXLUFJSEte6JC8vL662ia+e76s4NRyOPezhtddew5EjR3D33XczF7SzsxMTJkxANBpl4UgwGERWVharqUpOTmaan+qh6Hvkcjmys7MRDodhMBjYok9OTobf70dWVhZEIhEMBgPrV0WEPQDIy8tjDQrnzr0BWq3msgqLX3wAIJNJ4PHE8IDq6mpoNBoYjUamNKkAOj8/P+7R7enp6ayAO3HsDAYDa1xH4V5+fj7C4TBGjx4NINaLKhyOPRKMMCiRSAStVouSkrEwm8244YYbGJ53qfuish8av6amJvh8PoTDYdTU1EAQBAYZ5OTkMNa9Xq9nm0csFsNgMLB7INCeDA3ND5EmaX4EQWDlKYkFuvQ/tVqN7OwcNDU1Ydq06Zg7dw7rOHA5Ib5POBxGZmbmoEJCKp4vLi7GvHnz0NraipUrb4l7T2/jzH8nFRBTiBoOh+FyuWCz2TB16lTmcUmlsdYyI0eOjOPVJe43oPuRYUqlkq29goKCuL1ET202Go2sbU3MkHd7wpeiIpCQA5OSksKSc1SO5XK5MGrUKBaFUELg1VdfhdPpZOt4yZIlcZ7vqFGjmDcnCYfDrLpbLBbHPdqIQgi5XA6pVIr77rsP1ImU2NwSiSQuE8FbYwrR+InqbcJee+01uN0e9lAKtVqN73//+6BCWroZOidtaho8sry8p8DjUHwqmApwqc8S30KGJibWQiWM9PR03HvvvbBaraxRYH+fu9bY2Mi8rokTJ2L8+PEslc33dqcsEWEOZCh6uyeaK4r9Ezs5EBZAbVCo6JoecnHPPd/BmjWrWWdZoiRcicSUhgK1tTUQi8UoLCzEY489FheeUScHAmPJq6VxoHshBch3e41Go3HZLX7jkffFrz+a+zVrVmPNmtVsQ1Mq/XLzxRfIJ1JfBirZ2dn4/e9/H+dRXokEAgGYzWaG29G+++d//uc4yIN4cRT98PWZZAD47DxfUC0Wi1nvfx6LJuyN7p/Gjl9/lyOz0j6j7CGdj4rdCROjv4HYXrvvvvtYVxI+o0mOEukn4GJpDi1u+lK+xQt5GOR50A3ySoAWHwHOpNHponk+CIHYtPHeeOMNuFwu/PCHD2Dz5tfjeBvEYqYHOdKGjEZj3S35Ehj6vpjlDrOFzfN5yHOia6Zuo6SkqRlZDKQMMsVA7uhA0t7UOZNvk0ILi+6PPyaOFnWNoPGiMSflQniHWBxr5EcLgxYpjQtZzu4FJIr7f38VcIyjJ2f1gJRIIYyO1g5dPx3zGyq+LrC79S/1lOKJhbwC4flY5FHQ+wVBgF6vZwbqSuv5yJsZKmY5rSHy2HrrQtpzDPxwOp1oa2vHgw/+CJFIBOPHj8ecOXPY+3hvkTcM/PohzIoXCr3I+CWuNX6v0z6hPcFn3cXibqXHlzAR94tf25R04tcthYW0H2kfU3cVqi2WSqWMKcDzH0npSXojt/WWEeO1MR3zi4m30PQ3hYckHo8nrlneBx98gLq6OvzLv/wL5HIZG0TajLSZ6HsTn8KbeJ38huGvM9F74I9pofIAYgwAjDBLNhgh8Jc2OI1Z4ljy10zfSZsp5hX62T3z988LPx+8keDvmQzKQL0JWtz0kzi2/DX1trYSQxVeMfGZv95CD/56yQDwho08tf7KUBZM8xlZHkQnqILgEq/Xi46ODtTU1LBMLwDodDoUFBSgqKgobsPzkpgh7W2NkyRGF4n3S+fmz5FYXE3RCykq+l5KyESjUdhsjh4lRYnXTa/Rvu5rnvnrTLzWYS9tJ21KhM/KykpkZGRAq9Xi888/xw9/+EMkJSWxfj47d+5k7XQp/u2P+P1+WK0WvP3228yC9EfIurS0tAyoiVuiaDQa7NmzBydPnuxzgi4lxFuxWi145513+o2x8OGu0+lkoTQpw4FIMBjE6dOnsX379n4rPZ6t3d7ejr179+LUqWq2YS43X4neejgchtVqZZ7xtRaaX/L+CV5xuVxwOp04c+YMjh+vQltbK8RiMQoKCjB//nzk5+cjOTkZJpMJUqkU+/btw759+y62J5b3MEB9SaKH1dnZiW3btjHjPhCumdVqhcPhABDvqLhcLpSVlV3s+e7HjTfe2O9z91eE6GCJJ5cRwrUIPPR4PDCbzXj11Vdxzz33oLCwEDKZDA6Hg00qlaVcCZ8lkT1PGBURVxO9sst9nk8rZ2RkIDU1dQB33S0XLlyAxWJh576SEIy/JsJtBrohE62hUqlEbm5uvxUnSTgchtfrRUtLy4B6eJOyolox/hmUV1IgzmMsQDdOmpeXd0lP42oKEYitVitqa2tx8uRJNDc3IxqNYvTo0ZgwYQIKCgoYbYXmmFdKVqsVFoslzgMCLu8N8vMdiURYi2mSgcy7IMSek5iSkhK3fr3eWEeTYDCI9PR0xr0aThl2hQV0tyih7M+rr74KqVSKu+66Kw4YTxzcgQgfZvCgf3+EiJUD/TwvdC1X2h2hN+Fxh6GQwV4LeaEDHRs+JCUsYzA4EhnEq93hgK/R83q9sNvtOHfuHCoqKtDY2Ai/P4Bx48aiqKgIJSUlMBqNLLEFxHu/fEKCZKBGhRc+9B/MvCeei//fUK7Ny8mw93RnX3TxhiKRCGpqavCzn/2MgYA8RjUUTGPeLR7I+fiFP9jr4e9xMOca7OeH8lw0PgM9R2/zMxiWOa/4BiuJSSKiUiQ+dzAcDsNkMqGurg7V1dU4d+4cJBIJsrOzUVRUhDVr1kCj0UCr1bLxooepkPDXeyl+1mCFzjMUa6i3zw/l2rycDHtP90Tp6uqCVqu9WBQ8NGnk63JdhkoSk0fUKsbhcMBms6G2thanTp1Ce3s7ZDIZsrOzMWHCBNxyyy0wGo2suoEP84hbxRM6r8vA5Kp5WOwLJZKLT/tVDJlVvC7XZSiEaCw+n489Wfzs2bM4frwKXV2dkMlkyM/Px8yZM5GXlwe9Xh9HNAa6wzuinFAGtC/i9HXpn1x1hNJoNEKtVuPkyZMoLCxk3K7EnkjX5boMh/CMfVpzbrcbZrMZra2tqK6uRnNzC7xeD/R6PQoLC3HTTcuRn5/P+G68F9bNU+p7zV73qoZOrgrozks0GkVVVRVefvllrF27FjNmzLgkT+q6XJe+hAeRiS/Et9KhjBYx54FYKt5kMuPChfM4d+4cWlpaceFCrI5zzJgxyMvLQ3Z2dwubL0Jr6+vSLVddYRGBrqamBlu2bEFqaioWLVqE4uJixpimbGJ/WdjX5boAYM8YsFgssFptMJtNOHXqFBobGy8++1GJtLRU5ObmoqCgAOnp6ay/Fl+TejlKzHW5+iJELlfOPgxCFAe73Y6ysjKUl5cjGo1i8uTJKC4uQX5+Hit2vi7XpS+hshe73Q6bzQaz2cwaRra1tbFOAJmZmcjOzsbIkSORlZUFnU7H8CUSHpIgmsR1hfXFk2uisHgJBAIIBoNoamrCsWPHUFNTA5/Ph/T0dOTk5GD06NFIS0uDwWCAUqkcUnwrsc6LT2n3VgN2XYZO+qr1o8wa4Zr8e+x2O6xWKzo7O9HU1ASLxYLm5hb4fF7I5QoYDHpkZmYiJycHqampGDlyJMNIBxLWXWk94nW5enLVQ8JEIWoDVekLggCz2Yzz58+jvr4ezc3N6OzsRDgcRlKSHlqthjHQtVot9Ho9o0mo1eoe+FcizsFjG4lEOp5mcTlCXOK5vi6SGKpfjoyY+H467m18qY2K0+lCV1cnbDYbWlpaYLfbYTabLxZ+S6HXJyE3Nxfp6enIyMhAcnIy6zzB14Rel6+eXHMPqzch78br9bJqbofDAbPZDLvdAavVgtbWVtjtdtjtdtb4S6lUQqlUQqFQQqvVQKfTITU1FXK5HFqtDjqdlm0Wo9HIqsV5T4r3rBIt7OUsbm+v84RDykx9maw2XS+Ny+U8z8T7DQQCbH6opo5+TCYT2tvb4XK54Xa7YLfbL85VzBAlJycjIyMDRmMy1GoV9Ho91Go165nFXwuVL33dDMjXTa65wkrcwPwj2xMLXYl1DHRXvVNZj8PhYE/Zcbs9cDjsrCLe6/XC7XbD5/PB4/HC6/VAJBLB5/NBpVIhEAiwhnfU612tVkOlUrGGf9SbSKlUAwCUym6CIABotVoAMfyDPtfb/dH/gC8mfYMff2odQjVpxDFyuVzsvU6nE6FQ7KGkkUgEzc3N8Hq9cLlcsNudsNutce1M6DFaycnJ0Gq1yM7Ohk6XBJ1OC6PRyJ6QzRfZUiND/vpIvmwG4LoMTq55SNiX9FW3xJPw6O/Ldcvkf9Pf4XCYtXnmFV0wGILX62adDJqbm1nhNu/5eTxeCIIIHo8rrrMEZagIsPV4PFCr1RyzXwSn0wFBEJCWltbDW3E4HBCJYo8X5/uPDZX8//bOYIVBGAbDv6h0UbC4vv87yg6WVA87uEgW6VHnoN+1PYfmD/kqPxvJS0UULfM8I0YG0QN13SClbXlX5GnMvE9wl2XBMHhUVYUQnnvm1HUdxnFE3/cIIYCI4JyD9/7QrmsfmJBrL8tGREG4bcG6C+Lvsmg7qSal9CU6k085NMyMaXqByMHaPtZ1a6HOZhtgNB/5oUOMjLatD0VS9MQi+9O7n7tUTRUZyahKgSmcwc9bwn/DZjS5O7m8yp7ZpVqtrD0bm9dpk6RFzi1lklq4kjd8NVOx6H4RqgAAAABJRU5ErkJggg== " src="SeWfibBcBT0GHNickRic52tYtIfCpfI6WckNtewmnSZFIQQSPtx2j3xxYsfw02z0Vib7L2LXMs5KwdJsQf0Nvqic2UQ"  data-type="png" data-ratio="0.26" data-w="300"  /></p><p><span style="color: rgb(0, 128, 255);"><strong><span style="color: rgb(0, 128, 255); font-size: 18px;">1.定义及初始化</span></strong></span></p><p>内核中使用init_waitqueue_head宏来初始化等待队列头。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">//yourLinuxSourceDir/include/linux/wait.h</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; #define init_waitqueue_head(q)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; do&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static&nbsp;struct&nbsp;lock_class_key __key;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; __init_waitqueue_head((q), &amp;__key);&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;while&nbsp;(0)</td></tr></tbody></table><p>我们可以看到这个宏使用了do-while型循环语句，里面包含两条语句。首先定义了一个变量__key，然后再调用init_waitqueue_head函数。</p><p>事实上，这个do-while循环语句只会执行一次。那么，为什么要选择使用这个循环语句？在定义宏的时候将上述语句嵌套在一个大括号里也可以啊！可能我们如下那样使用一个宏：</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(conditon)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;init_waitqueue_head(q);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;do_somthing_else();</td></tr></tbody></table><p>如果我们去除do-while，那么替换后会编译错误。因为宏末尾的分号使得else语句成为一个单独的句子。你也许会说，那我这样使用：init_waitqueue_head(q)就可以避免这个错误了。这样是可以，但是对于那些初学者来说，很难避免他们要加上一个;。并且，在茫茫代码中，孤零零的出现一个没有;的语句，未免显得有些奇怪。</p><p>言归正传，在init_waitqueue_head宏中调用的__init_waitqueue_head函数定义如下：</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void __init_waitqueue_head(wait_queue_head_t *q,&nbsp;struct&nbsp;lock_class_key *key)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;spin_lock_init(&amp;q-&gt;lock);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lockdep_set_class(&amp;q-&gt;lock, key);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INIT_LIST_HEAD(&amp;q-&gt;task_list);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;}</td></tr></tbody></table><p>在这个函数中，首先利用自旋锁初始化函数初始化这个自旋锁；在上述等待队列头的定义中，我们可以看到task_list字段是一个list_head结构类型，因此我们使用INIT_LIST_HEAD对这个链表进行初始化。这些过程都是我们所熟悉的。</p><p>同时，我们也可以使用初始化宏DECLARE_WAIT_QUEUE_HEAD一步的进行定义和初始化。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define __WAIT_QUEUE_HEAD_INITIALIZER(name) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; .lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = __SPIN_LOCK_UNLOCKED(name.lock),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; .task_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = { &amp;(name).task_list, &amp;(name).task_list } }</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define DECLARE_WAIT_QUEUE_HEAD(name) \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait_queue_head_t name = __WAIT_QUEUE_HEAD_INITIALIZER(name)</td></tr></tbody></table><p>上述代码对于有C基础的人理解起来并不困难。需要注意的是对task_list进行赋值后，这个结点的前后指针都会指向自己。</p><p>同样，对于等待队列，我们可以使用DECLARE_WAITQUEUE宏来定义并初始化一个等待队列项。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">int default_wake_function(wait_queue_t *wait, unsigned mode,&nbsp;int&nbsp;flags,&nbsp;void&nbsp;*key);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define __WAITQUEUE_INITIALIZER(name, tsk) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; .private&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= tsk,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; .func&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = default_wake_function,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; .task_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = { NULL, NULL } }</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define DECLARE_WAITQUEUE(name, tsk)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">8</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait_queue_t name = __WAITQUEUE_INITIALIZER(name, tsk)</td></tr></tbody></table><p>name要定义的等待队列项的名称；tsk是task_struct类型的指针变量，它指向这个等待队列项所对应的进程。</p><p><span style="color: rgb(0, 128, 255);"><strong><span style="color: rgb(0, 128, 255); font-size: 18px;">2.添加/移除等待队列</span></strong></span></p><p>add_wait_queue添加函数将等待队列wait添加到以q为等待队列头的那个等待队列链表中。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void add_wait_queue(wait_queue_head_t *q, wait_queue_t *wait)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; unsigned&nbsp;long&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait-&gt;flags &amp;= ~WQ_FLAG_EXCLUSIVE;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __add_wait_queue(q, wait);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">8</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">9</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>我们可以看到flags的结果必然是0，也就是说这个函数是将非互斥进程添加到等待队列当中。而且在调用具体的添加函数时候，使用关中断并保护现场的自旋锁方式使得添加操作每次只被一个进程访问。</p><p>具体的添加过程是将当前进程所对应的等待队列结点wait添加到等待队列头结点q之后。具体来说，就是将new-&gt;task_list结点添加到以head-&gt;task_list为头指针的双链表当中。另外，通过add_wait_queue_exclusive函数可以将一个互斥进程添加到等待队列当中。从添加过程可以发现，add_wait_queue函数会将非互斥进程添加到等待队列的前部。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">static&nbsp;inline&nbsp;void&nbsp;__add_wait_queue(wait_queue_head_t *head, wait_queue_t *new)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; list_add(&amp;new-&gt;task_list, &amp;head-&gt;task_list);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>另外， add_wait_queue_exclusive添加函数则会将互斥进程添加到等待队列的末尾。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void add_wait_queue_exclusive(wait_queue_head_t *q, wait_queue_t *wait)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; unsigned&nbsp;long&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait-&gt;flags |= WQ_FLAG_EXCLUSIVE;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __add_wait_queue_tail(q, wait);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">8</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">9</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>remove_wait_queue函数用于将等待队列项wait从以q为等待队列头的等待队列中移除，源码如下。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">01</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void remove_wait_queue(wait_queue_head_t *q, wait_queue_t *wait)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">02</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">03</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;unsigned&nbsp;long&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">04</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">05</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;spin_lock_irqsave(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">06</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;__remove_wait_queue(q, wait);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">07</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">08</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;}</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">09</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">static&nbsp;inline&nbsp;void&nbsp;__remove_wait_queue(wait_queue_head_t *head,</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">10</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wait_queue_t *old)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">11</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">12</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; list_del(&amp;old-&gt;task_list);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">13</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>有了上述的基础，那么移除函数就简单了许多。</p><p><span style="color: rgb(0, 128, 255);"><strong><span style="color: rgb(0, 128, 255); font-size: 18px;">3.在等待队列上睡眠</span></strong></span></p><p>如何实现进程的阻塞？大致过程就是将当前进程的状态设置成睡眠状态，然后将这个进程加入到等待队列即可。在linux内核中有一组函数接口来实现这个功能。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">01</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void __sched interruptible_sleep_on(wait_queue_head_t *q)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">02</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">03</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; sleep_on_common(q, TASK_INTERRUPTIBLE, MAX_SCHEDULE_TIMEOUT);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">04</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">05</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">EXPORT_SYMBOL(interruptible_sleep_on);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">06</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">07</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">long __sched</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">08</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">interruptible_sleep_on_timeout(wait_queue_head_t *q,&nbsp;long&nbsp;timeout)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">09</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">10</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;sleep_on_common(q, TASK_INTERRUPTIBLE, timeout);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">11</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">12</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">EXPORT_SYMBOL(interruptible_sleep_on_timeout);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">13</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">14</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void __sched sleep_on(wait_queue_head_t *q)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">15</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">16</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; sleep_on_common(q, TASK_UNINTERRUPTIBLE, MAX_SCHEDULE_TIMEOUT);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">17</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">18</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">EXPORT_SYMBOL(sleep_on);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">19</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">20</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">long __sched sleep_on_timeout(wait_queue_head_t *q,&nbsp;long&nbsp;timeout)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">21</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">22</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;sleep_on_common(q, TASK_UNINTERRUPTIBLE, timeout);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">23</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">24</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">EXPORT_SYMBOL(sleep_on_timeout);</td></tr></tbody></table><p>通过上述源码，你可以发现这些函数在内部都调用了sleep_on_common函数，通过传递不同的值来实现不同的功能。而这个通用函数的三个参数分别关注的是：进程要加入到那个等待队列？进程是那种睡眠状态（TASK_UNINTERRUPTIBLE还是TASK_INTERRUPTIBLE）？进程睡眠的时间？</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">01</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">static&nbsp;long&nbsp;__sched</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">02</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">sleep_on_common(wait_queue_head_t *q,&nbsp;int&nbsp;state,&nbsp;long&nbsp;timeout)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">03</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">04</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; unsigned&nbsp;long&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">05</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait_queue_t wait;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">06</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">07</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; init_waitqueue_entry(&amp;wait, current);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">08</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">09</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __set_current_state(state);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">10</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">11</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">12</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __add_wait_queue(q, &amp;wait);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">13</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_unlock(&amp;q-&gt;lock);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">14</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; timeout = schedule_timeout(timeout);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">15</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_lock_irq(&amp;q-&gt;lock);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">16</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __remove_wait_queue(q, &amp;wait);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">17</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">18</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">19</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;timeout;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">20</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>在此函数中，首先定义了一个等待队列项结点，通过 init_waitqueue_entry函数对其进行初始化。可以从下述初始化源码中看到，此时该等待队列项指向当前当前进程。而唤醒函数指针func则指向内核自定义的一个默认唤醒函数default_wake_function。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">static&nbsp;inline&nbsp;void&nbsp;init_waitqueue_entry(wait_queue_t *q,&nbsp;structtask_struct *p)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; q-&gt;flags = 0;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; q-&gt;private&nbsp;= p;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; q-&gt;func = default_wake_function;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp;}</td></tr></tbody></table><p>初始化完毕后，通过__set_current_state函数将当前进程的状态设置成state。接着，在自旋锁的保护下，将当前进程对应的等待队列结点插入到等待队列链表当中。更重要的是，在schedule_timeout函数中不仅要设置进程的睡眠时间（以jiffies为单位的），还要使用schedule函数进行重新调度。一旦使用了schedule函数后，也就意味这当前这个进程真正的睡眠了，那么接下来的代码会在它唤醒后执行。当该进程被唤醒后（资源可用时），会从等待队列中将自己对应的那个等待队列结点wait移除。</p><p>上述过程都是在自旋锁保护下进行的，并且在整个执行过程中不可被其他中断所打断。现在再回过头去看一开始的那四个睡眠函数接口，你就明白了它们各自的不同之处了。</p><p><span style="color: rgb(0, 128, 255);"><strong><span style="color: rgb(0, 128, 255); font-size: 18px;">4.唤醒函数</span></strong></span></p><p>唤醒函数会唤醒以x为头结点的等待队列中的等待队列项所对应的进程。与睡眠函数类似，内核中也有一组函数可以对阻塞的进程进行唤醒。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, 1, NULL)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up_nr(x, nr)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, nr, NULL)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up_all(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, 0, NULL)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up_interruptible(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_INTERRUPTIBLE, 1, NULL)<br  /></td></tr></tbody></table><p><br  /></p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up_interruptible_nr(x, nr) __wake_up(x, TASK_INTERRUPTIBLE, nr, NULL)<br  /></td></tr></tbody></table><p><br  /></p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">#define wake_up_interruptible_all(x)&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_INTERRUPTIBLE, 0, NULL)</td></tr></tbody></table><p><br  />通过上述代码，我们可以发现这些唤醒函数均调用了__wake_up函数。__wake_up函数的四个参数分别指：头结点指针、唤醒进程的类型、唤醒进程的数量和一个附加的void型指针变量。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">void __wake_up(wait_queue_head_t *q, unsigned&nbsp;int&nbsp;mode,</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int&nbsp;nr_exclusive,&nbsp;void&nbsp;*key)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; unsigned&nbsp;long&nbsp;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">5</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">6</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">7</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; __wake_up_common(q, mode, nr_exclusive, 0, key);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">8</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">9</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>在__wake_up函数又通过传递不同的参数调用__wake_up_common函数来实现不同的唤醒功能。</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">01</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">static&nbsp;void&nbsp;__wake_up_common(wait_queue_head_t *q, unsigned&nbsp;int&nbsp;mode,</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">02</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int&nbsp;nr_exclusive,&nbsp;int&nbsp;wake_flags,&nbsp;void&nbsp;*key)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">03</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">{</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">04</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; wait_queue_t *curr, *next;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">05</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">06</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; list_for_each_entry_safe(curr, next, &amp;q-&gt;task_list, task_list) {</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">07</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unsigned flags = curr-&gt;flags;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">08</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">09</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;(curr-&gt;func(curr, mode, wake_flags, key) &amp;&amp;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">10</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (flags &amp; WQ_FLAG_EXCLUSIVE) &amp;&amp; !--nr_exclusive)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">11</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">12</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">&nbsp; &nbsp; &nbsp; &nbsp; }</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">13</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">}</td></tr></tbody></table><p>list_for_each_entry_safe函数将遍历整个等待队列中的链表，通过每次的逻辑判断来唤醒相应的进程。这个if语句初看起来有点麻烦，不过我们一点一点的将它拆解。</p><p>curr-&gt;func(curr, mode, sync, key)：即执行默认的唤醒函数，将指定的进程curr以mode方式唤醒。成功唤醒返回1；否则，返回0；<br  />(flags &amp; WQ_FLAG_EXCLUSIVE)：判断当前进程是否以互斥形式唤醒。是互斥形式则返回1；否则返回0；<br  />!–nr_exclusive：nr_exclusive为需要唤醒的互斥进程的数量。</p><p>这三个部分是通过逻辑与连接起来的。根据逻辑与的运算规则，只有当第一部分为真时才会判断第二部分的值，依次再判断第三部分的值。</p><p>通过上述的等待队列的添加过程我们知道，等待队列中前面均是非互斥进程，后面才是互斥进程。因此，唤醒函数总先唤醒全部的非互斥进程。因为当__wake_up_commom函数每一次去判断if语时，总会“不自觉”去执行默认的唤醒函数（除非唤醒失败，那么会退出遍历宏）；当全部的非互斥进程被唤醒后，第二个判断条件也就成立了。因此__wake_up_commom函数会依次唤醒nr_exclusive个互斥进程；当–nr_exclusive为0时（!–nr_exclusive也就为真），整个遍历过程也恰好结束，而此时if语句的三个判断条件才刚好满足（这段代码太强大了!!!）。</p><p><span style="color: rgb(0, 128, 255);"><strong><span style="color: rgb(0, 128, 255); font-size: 18px;">5.有条件的睡眠</span></strong></span></p><p>与睡眠函数不同，条件睡眠是指当某些条件发生时，这个进程才会加入到等待队列当中。关于条件睡眠有下列的宏：</p><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">1</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">wait_event(wq, condition)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">2</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">wait_event_timeout(wq, condition, timeout)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">3</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">wait_event_interruptible(wq, condition)</td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><tr style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; background: none !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; "><td class="number" style=" border-width: 0px !important; border-style: initial !important; border-color: initial !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; " width="3" height="NaN">4</td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-top-style: initial !important; border-right-style: initial !important; border-bottom-style: initial !important; border-top-color: initial !important; border-right-color: initial !important; border-bottom-color: initial !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; background: none !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; " width="NaN" height="NaN">wait_event_interruptible_timeout(wq, condition, timeout)</td></tr></tbody></table><p>关于条件睡眠，虽然函数实现与睡眠函数不同，但是基本思想是相似的，各位可以查找相应的源码进行分析。Try！</p><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" style="display: none;" id="js_reward_author">武特</div>
                                                            <p class="reward_button_wrp">
                      <span id="js_author_reward_qrcode" class="reward_pop_panel">
                        <img id="js_author_reward_qrcode_img" src="" alt="赞赏二维码">
                        <strong>微信扫一扫赞赏作者</strong>
                      </span>
                        <a class="reward_button" id='js_reward_link' href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="javascript:;" id="js_reward_total"></a>&nbsp;<span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                        <div id="js_reward_pagination" class="simple_pagination" style="display: none;">
                          <button disabled class="btn_sp_prev js_reward_pagination_prev">上一页</button>
                          <span class="sp_page_num_area">
                            <a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>&#47;<span class="sp_page_num js_reward_pagination_totalpage">3</span>
                          </span>
                          <button class="btn_sp_next js_reward_pagination_next">下一页</button>
                        </div>
                    </div>
                </div>
                                <div class="reward_qrcode_area reward_area tc" id="js_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                                        <p class="reward_tips"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" id="js_reward_qrcode_img"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>