<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		Linux网络子系统安全性模块代码演示验证方案及结果分析(2)
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664603712&amp;idx=1&amp;sn=5abd42cb50c95811dd022622bc0a2d5d&amp;chksm=f04d8da5c73a04b355624eac8ad5ec77bf27031bf9a7cd65a8606d7a58e16c2fea9b5bfbb001&amp;scene=27#wechat_redirect&cpage=49' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">Linux网络子系统安全性模块代码演示验证方案及结果分析(2)</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                                                        <span class="rich_media_meta rich_media_meta_text">
                                                        李廷，张超
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2017-02-09</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <h4><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-size: 16px; font-family: 宋体;">3.1.4.3 </span></strong><strong><span style="font-size: 16px; font-family: 宋体;">开发板网卡设置</span></strong></span></h4><h4><span style="font-size: 16px;"><span style="font-family: 宋体; font-size: 19px; line-height: 30.4px;"><strong>&nbsp;&nbsp;</strong></span><span style="line-height: 24px; font-family: 宋体; font-size: 16px;">1.&nbsp;为双网卡配置IP：<br  /></span></span></h4><p><span style="font-size: 16px;"><span style="line-height: 24px; font-family: 宋体; font-size: 16px;"></span></span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0G8Lqt7HTLZHUick9ia5Mia4XZ5jWa3ypRpXHRSFYyv1QakkUqpBdDOGentRDFicOnxxG1yQiavxoZ4VOA"  data-ratio="0.09368191721132897" data-w="459"  /></p><p style="margin-left:24px;line-height:24px"><span style="font-size: 16px;"><span style="font-family: 宋体; text-indent: 28px;">定义DNS则要使用</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">vi</span><span style="font-family: 宋体; text-indent: 28px;">编辑器编辑</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">/etc/resolv.conf</span><span style="font-family: 宋体; text-indent: 28px;">文件修改为</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">nameserver 202.117.128.2</span><span style="font-family: 宋体; text-indent: 28px;">。</span></span></p><p style="line-height:24px"><span style="font-family: 宋体; font-size: 16px;">但这种方法有很大的局限性，重启开发板后要重新输入命令。通过对开发板目录结构的研究，找到了启动脚本(/etc/init.d/rcS)。</span></p><p style="text-indent: 0px; line-height: 24px;"><span style="font-size: 16px;"><span style="font-family: 宋体; text-indent: 28px;">&nbsp; &nbsp; 启动流程大致如下：首先定义了环境变量PATH，定义运行级别为超级用户，紧接着设置默认的权限</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">umask</span><span style="font-family: 宋体; text-indent: 28px;">，下面是挂载</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">proc</span><span style="font-family: 宋体; text-indent: 28px;">文件系统，</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">sysfs,usbfs</span><span style="font-family: 宋体; text-indent: 28px;">等文件系统，以及挂载</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">/dev</span><span style="font-family: 宋体; text-indent: 28px;">下所有的设备，构建</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">/var</span><span style="font-family: 宋体; text-indent: 28px;">目录，再下面是在屏幕上输出一些初始化的信息，再下面是设置回环设备，初始化</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">eth0</span><span style="font-family: 宋体; text-indent: 28px;">接口。而初始化</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">eth0</span><span style="font-family: 宋体; text-indent: 28px;">实际上是调用了</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">/etc/init.d/ifconfig-eth0</span><span style="font-family: 宋体; text-indent: 28px;">脚本，这个脚本首先判断</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">/etc/eth0-setting</span><span style="font-family: 宋体; text-indent: 28px;">文件是否存在，存在的话可以用</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">source</span><span style="font-family: 宋体; text-indent: 28px;">命令来重新执行初始化的文件，不存在的话则会调用</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">ifconfig</span><span style="font-family: 宋体; text-indent: 28px;">命令来给它绑定</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">IP</span><span style="font-family: 宋体; text-indent: 28px;">和子网掩码，最终我们可以去分析</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">eth0-setting</span><span style="font-family: 宋体; text-indent: 28px;">文件，这个文件里的选项则更加直观，有</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">IP</span><span style="font-family: 宋体; text-indent: 28px;">项，</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">Mask</span><span style="font-family: 宋体; text-indent: 28px;">项</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">,Gateway</span><span style="font-family: 宋体; text-indent: 28px;">项，</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">DNS</span><span style="font-family: 宋体; text-indent: 28px;">项，</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">MAC</span><span style="font-family: 宋体; text-indent: 28px;">项。然后将开发板的</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">IP</span><span style="font-family: 宋体; text-indent: 28px;">进行绑定。</span></span></p><p style="text-indent: 0px; line-height: 24px;"><span style="font-family: 宋体; font-size: 16px;">&nbsp; &nbsp; 2.&nbsp;其它配置</span></p><p style="text-indent: 0px; line-height: 24px;"><span style="font-size: 16px; line-height: 1.6;"></span></p><p style="text-align: left;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0G8Lqt7HTLZHUick9ia5Mia4XZdj9GB9avTSZGvS54JXPf3uwcKrDUZuB1vHytHEjwdRhU1Lia5fQTNicw"  data-ratio="0.09210526315789473" data-w="456"  /><span style="font-size: 16px; line-height: 1.6;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p style="text-align: left;"><span style="font-size: 16px;"><span style="font-family: 宋体; text-indent: 28px;">第一行表示允许内核将网络包转发出去，第二行表示刷新nat表，第三行表示将内部网络</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">192.168.1.0</span><span style="font-family: 宋体; text-indent: 28px;">的包更改为本机</span><span style="text-indent: 28px; font-family: &#39;Times New Roman&#39;;">IP</span><span style="font-family: 宋体; text-indent: 28px;">地址，转发出去。</span></span></p><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;">执行完后可以用iptables-save &gt; iptables-script命令将所有的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">iptables</span>规则重定向输出到一个脚本中，重启开发板后执行<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">iptables-restore iptables-script</span>命令加载这些规则。为了方便起见，我们将这条命令加到<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">rcS</span>初始化脚本中。</span></p><p><span style="font-size: 16px;">&nbsp;</span></p><h4><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-size: 16px; font-family: 宋体;">3.1.4.4 </span></strong><strong><span style="font-size: 16px; font-family: 宋体;">其它设备的配置</span></strong><strong><span style="font-size: 16px; font-family: 宋体;"></span></strong></span><span style="font-size: 16px;"><strong><span style="font-family: 宋体;"></span></strong></span></h4><p style="line-height:24px"><span style="font-family: 宋体; font-size: 16px;">其它设备仅需要配置IP地址为内网<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">IP</span>，如<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">192.168.1.5</span>，和网关<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">192.168.1.2</span>，注意，这个网关地址是<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">Linux</span>系统<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">eth0:0</span>的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">IP</span>，表示所在的内网均需通过<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">Linux</span>的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">eth0:0</span>进行通信。</span></p><h4><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-size: 16px; font-family: 宋体;">3.1.4.5 </span></strong><strong><span style="font-size: 16px; font-family: 宋体;">实验演示</span></strong><strong><span style="font-size: 16px; font-family: 宋体;"></span></strong></span><span style="font-size: 16px;"><strong><span style="font-family: 宋体;"></span></strong></span></h4><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;">实验的场景如下：局域网PC的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">IP</span>设置为<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">192.168.1.3</span>，该<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">PC</span>访问<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">IP</span>为<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">202.117.132.126</span>的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">FTP</span>服务器，并且使用通过<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">j-link</span>调试手段抓取数据包。此处抓取了两个<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">original tuple</span>，由于此处<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>类型是<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">SNAT</span>转换，所以<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">dir=0</span>表明是发出的包：</span></p><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;"></span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0G8Lqt7HTLZHUick9ia5Mia4XZvWctDZZMROAoYxajssuh1GwjXic175d4zGN6W9IPqztU7nhnHoPT3EQ"  data-ratio="0.11137440758293839" data-w="422"  /></p><p><span style="font-size: 16px;"><span style="font-family: 宋体; font-size: 14px; line-height: 24px; text-align: justify; text-indent: 28px;">&nbsp; &nbsp;</span></span><span style="font-size: 16px; font-family: 宋体; line-height: 1.6;">这两个tuple中的信息就足够完成SNAT转换并顺利的找到FTP服务器，当数据包返回时，此时dir=1，记录reply tuple，将两个original tuple中的源IP和目的IP，源端口和目的端口进行对调并赋值给reply tuple</span><span style="font-size: 16px;"><span style="font-family: 宋体; font-size: 14px; line-height: 24px; text-align: justify; text-indent: 28px;">。</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:28px;text-autospace:ideograph-numeric;text-align:justify;text-justify:inter-ideograph;line-height:24px"><span style="font-size: 16px;"><span style="font-family: 宋体; line-height: 1.6;">连接跟踪完成后就可以进行SNAT转换，这里以内网发送基于</span><span style="line-height: 1.6; font-family: &#39;Times New Roman&#39;;">tcp</span><span style="font-family: 宋体; line-height: 1.6;">协议的数据包到</span><span style="line-height: 1.6; font-family: &#39;Times New Roman&#39;;">NAT</span><span style="font-family: 宋体; line-height: 1.6;">服务器为例。</span><span style="line-height: 1.6; font-family: &#39;Times New Roman&#39;;">sk_buff</span><span style="font-family: 宋体; line-height: 1.6;">中的信息如下：</span><br  /></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:28px;text-autospace:ideograph-numeric;text-align:justify;text-justify:inter-ideograph;line-height:24px"><span style="font-family: 宋体; line-height: 1.6; font-size: 16px;"></span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0G8Lqt7HTLZHUick9ia5Mia4XZVYmKbsCibdZstWgBZXA4UzpCYXZ7wLkSsTGcGicvZ1QNUXSibzIufjspA"  data-ratio="0.11363636363636363" data-w="352"  /></p><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;">连接跟踪记录的original tuple中的信息如下：</span></p><p>&nbsp;&nbsp;<img data-s="300,640" data-type="png" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAQsAAAApCAYAAAAiRgzbAAAGxklEQVR4nO2dvZLiOBCAm6t7j7vATF1xPIF5AoaEiHQzEzLJZhNONgmEUJdMOhHJQHwBPMEcwZp38Unyn2TLsiT/U/1VsQu2Jbe72y3J3u0eBQRAEAQp4beuBUAQZBhgsEAQRAsMFgiCaNHfYHFew2i0hnPlbkakn/Az292ze2Et2aduoyFjbvsddrO0T/aZ7aCwZ0m/990sabs+Zw+3l7eWfodMgQ35axf0UuiXcl8Kj9ew+RAIHpmTF3in9Du93OR34AdbN/7NfVe2Efum+wC84FS2/bQNtj53jL8NPGFDSXv+eLaf77uCvHX02zP87TbQFlNhQyObF/kSOcoDcbtbZPcB8NjBIsPJ44xFbhTX3QZ+ujMAiYcIbbLQPnKOo9ie7PYCpc8o2xMH5OWuQ96q/faFbMDTIaeT8KamQUF6vTIdFvoSDRZukLqc238dKjBchvDT6Rns7vHUi3zfraNt9LAdzCpNvbh+c+cYpeeRTe+Tj2yq6MJq4YRX8vUJ1+kTOPGu8QTc718SWdM29XCHr9sEbLs8r4+wvGyguLmdvE31q3l2hY0jeJ9its22+Rtmzwdy4AGe2dLB1DdSFh90ED3B9GWs5b/FvjSHpXeFlx+0jzO8f67gY9OUDpvHLFic3+Fz5dPZCPjbKdkwh72/JW5EFHJbku0X2DjEiONPWPlU4T5s4QXejR88xP3y3+Nz0HNDZAAHNhc2O5J89qSlIDwc4RWUtrrewDdtY8r9C26TheKmLCK8OZ4P5GYodGAbeZvq1wSVjSMZE58K4OQRWdeQafMfXNhvD8iYDvu5iW/wOOA4kUzW/guJL833YR/jUVkw7j9mwYJETKDRlkRmf7PnnMeF7c9I/ecjHLzYsUKD7YstY0B6DmexApcZQ3/0YCNnmSDuBMambQy5f91gYjVCU+cljk5viKvcge3kbapfG2Q2htCn3FUyG5v/JLIejpF9Od8TsJ9ZpDiwWLnw/cvisWTsS2SAvb3S4PdNZjyZ2dLAMAsWzgYuQXzh+afnCdLpfBPojR70if9xKY4mzBl5Of2bMJWUtalOtSUIg9jg1ZP0XFXepvqti9ysrwzbmUWe6ZPaYIW+RJdOzwDLOVXvJZwtWU1T+oHhMmTNXgvRC6dPvA5HyYXT9ZowQpHVZc36YWtEb6lncCLzD/hIZjfnXTS1dRawSqaYZBR6O4C3nKvbVBccPuGp4lSULAkOHiz5i69F3qb6tUOw8XxJFhcHeIuHZXoz6tq/EuFzBunEhUflS/ANNhOTXmL0ODR5dRS/PgpfDYW/06e++eNMSZ9IA33KzJ5Ag3Gf9OkzCO0yT7i5fuPtxW3412CKa1RcO+07/8KlvF9RpnyftvLa9dsQZTbm97M3DzLfS7dpySqzlSBH0WtxtXzCuSvfC/1hRP+oOwDVDp3OsQdclwYfsiGdgjbuPf39F5wIgvSK37sWoBQ24rzAlXy9jmdkvYojz8OBNh4Ew1iGIAjSObgMQRBECwwWCIJogcECQRAtMFggCKIFBgsEQbTAYIEgiBYYLBAE0QKDBYIgWmCwQBBECwwWCIJoUSFY8Hky6xMo7f6RSgFQDMoBtFgKQKdtcu6hp7KXIEv5L9e1nv0eWVfVsnuz/8PvFmaqNkrL3gR9KQXAtmuWA2izFEBp2yiviCLrd98wLQWQ01WRrkvtNzxdmdJcsLBJy94wfSkFEB6iKAfQSSmAfFv6W6aT3mLkcyUp/8MOC3Wdtd/gdGWBxTKEm45F/61YWiJASMtueo5HLgUQym2bi7PZlP1c2/sO3g4ebCdvhklubeimFEBZyv9iXWfs16quOsQ0ugijD4vkZGbxj8elpYsirsboqoSftcQpy6LIzVK+GU/3yCjBRX7WBz8SSOUV28hltJhZqCqSqWQR0srJsJRX0jbUD7FlaIBwFG5y5FTaWCzWk4zimTb2PscvSePzKXSdsV/ruuoIs5lFFEFf48wkdDSmf/9RVCKgTh6jFADFrhxAsyn75W2XsGHGdGBDU38n6feboqtSANmU/2pdy+3Xtq7ap55Xp39qlgionaGVAmA9VysH0EDKfql+nqZiSQc6MGSCaau0UAogl/Jfquu8/Xqnq4YwrBvyBFO6JsxGg381SgTUyGBLAYTCVywHUHPK/qK2NP0+N6qe318AVjaV1OxotxRAUcp/ia5l9utYV61hvHDJpWynn78k6c4N07KLJ3nIUgBx/+Jyti+lANT6aXwN3nYpgIKU/ypdx/ulqmhTVx0xjBycmCb+8UEb9x78594IgmiBpQCQ7kEbD4JhLEMQBOkcXIYgCKLF/xZrE3PbZhVsAAAAAElFTkSuQmCC " src="SeWfibBcBT0G8Lqt7HTLZHUick9ia5Mia4XZSPZduxFWBFNpPdLfSicNwS0UM6bUu12D2bpzOId7HmsHJnyS1fZmdrA"  data-ratio="0.15355805243445692" data-w="267"  /></p><p><span style="font-family: 宋体; font-size: 16px;">可以看到saddr已经做了<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">SNAT</span>源地址转换，<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">src_ip</span>（发送包的结构体的成员）换成了局域网的网关地址。</span></p><h2 style="margin-top:17px;margin-bottom:17px;line-height:172%"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-size: 16px; font-family: 宋体;">3.2 <span style="font-size: 16px; font-family: 宋体;">演示验证结果</span></span></strong><strong><span style="font-size: 16px; font-family: 宋体;"></span></strong></span><span style="font-size: 16px;"><strong><span style="font-family: 宋体;"></span></strong></span></h2><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;">验证显示，与开发板进行连接的局域网都能以共享的形式连入Internet，即表明通过开发板上的<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>服务器能够实现网络共享的目的，初步验证了<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>机制，另一方面，为了达到特定的需求还可以定制<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>规则和过滤规则，从而实现一定的安全性。从代码分析角度来讲，通过抓取流经<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>服务器的数据包，分析其修改前后的字段能够辅助分析<span style="font-size: 16px; font-family: &#39;Times New Roman&#39;;">NAT</span>机制的原理，而且形式很直观。</span></p><p style="text-indent:32px"><span style="font-family: 仿宋; font-size: 16px;">&nbsp;</span></p><h1 style="margin-left:0"><span style="color: rgb(2, 30, 170); font-size: 16px;"><strong><span style="color: rgb(2, 30, 170); font-size: 16px; font-family: 黑体;">4 </span></strong><strong><span style="color: rgb(2, 30, 170); font-size: 16px; font-family: 黑体;">待解决问题</span></strong></span></h1><p style="text-indent:28px;line-height:24px"><span style="font-family: 宋体; font-size: 16px;">由于开发板只能使用经过厂商的修改好的内核，因此此处只能使用已有的2.6.36版本内核，并且在演示中缺乏对连接跟踪部分的验证。</span></p><p style="text-indent:0"><span style="font-family: 宋体; font-size: 16px;">&nbsp;</span></p><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" style="display: none;" id="js_reward_author">李廷，张超</div>
                                                            <p class="reward_button_wrp">
                      <span id="js_author_reward_qrcode" class="reward_pop_panel">
                        <img id="js_author_reward_qrcode_img" src="" alt="赞赏二维码">
                        <strong>微信扫一扫赞赏作者</strong>
                      </span>
                        <a class="reward_button" id='js_reward_link' href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="javascript:;" id="js_reward_total"></a>&nbsp;<span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                        <div id="js_reward_pagination" class="simple_pagination" style="display: none;">
                          <button disabled class="btn_sp_prev js_reward_pagination_prev">上一页</button>
                          <span class="sp_page_num_area">
                            <a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>&#47;<span class="sp_page_num js_reward_pagination_totalpage">3</span>
                          </span>
                          <button class="btn_sp_next js_reward_pagination_next">下一页</button>
                        </div>
                    </div>
                </div>
                                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>