<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		基于vfs实现自己的文件系统（上）
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664602528&amp;idx=1&amp;sn=d03538188448024520a54d1a137dfba1&amp;chksm=f04db645c73a3f531e8b36e17e7da8f5030bf8633e8a2f97f07bea4031bf734cf5c04d87ff20&amp;scene=27#wechat_redirect&cpage=67' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">基于vfs实现自己的文件系统（上）</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                                                        <span class="rich_media_meta rich_media_meta_text">
                                                        王张军
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-07-09</em>





                </div>

                
                
                                
                
                
                
                                                
                                <div class="rich_media_thumb_wrp" id="media">
                    
                                        
                                    </div>
                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <h3 style="margin: 15px auto 2px; font-weight: bold; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);">1.Linux 文件系统组成结构</span></h3><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">linux文件系统有两个重要的特点：一个是文件系统抽象出了一个通用文件表示层——虚拟文件系统或称做VFS。另外一个重要特点就是它的文件系统支持动态安装（或说挂载等），大多数文件系统都可以作为根文件系统的叶子节点被挂在到根文件目录树下的子目录上。</span></p><h4 style="margin: 15px auto 2px; font-size: 14px; font-weight: bold; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);">1.1.虚拟文件系统</span></h4><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">虚拟文件系统为用户空间程序提供了文件系统接口。系统中所有文件系统不但依赖VFS共存，而且也依靠VFS系统协同工作。通过虚拟文件系统我们可以利用标准的UNIX文件系统调用对不同介质上的不同文件系统进行读写操作。虚拟文件系统的目的是为了屏蔽各种各样不同文件系统的相异操作形式，使得异构的文件系统可以在统一的形式下，以标准化的方法访问、操作。实现虚拟文件系统利用的主要思想是引入一个通用文件模型——该模型抽象出了文件系统的所有基本操作(该通用模型源于Unix风格的文件系统)，比如读、写操作等。同时实际文件系统如果希望利用虚拟文件系统，即被虚拟文件系统支持，也必须将自身的诸如“打开文件”、“读写文件”等操作行为以及“什么是文件”，“什么是目录”等概念“修饰”成虚拟文件系统所要求的（定义的）形式，这样才能够被虚拟文件系统支持和使用。<br  />我们可以借用面向对象的思想来理解虚拟文件系统，可以想象成面向对象中的多态。</span></p><h4 style="margin: 15px auto 2px; font-size: 14px; font-weight: bold; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);">1.2.虚拟文件系统的相关对象</span></h4><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>虚拟文件系统的核心概念</strong></span><span style="font-size: 16px;"><br  />1、 VFS 通过树状结构来管理文件系统，树状结构的任何一个节点都是“目录节点”<br  />2、 树状结构具有一个“根节点”<br  />3、 VFS 通过“超级块”来了解一个具体文件系统的所有需要的信息。具体文件系统必须先向VFS注册，注册后，VFS就可以获得该文件系统的“超级块”。<br  />4、 具体文件系统可被安装到某个“目录节点”上，安装后，具体文件系统才可以被使用<br  />5、 用户对文件的操作，就是通过VFS 的接口，找到对应文件的“目录节点”，然后调用该“目录节点”对应的操作接口。<br  />例如下图：<br  />1、 绿色代表“根文件系统”<br  />2、 黄色代表某一个文件系统 XXFS<br  />3、 根文件系统安装到“根目录节点”上<br  />4、 XXFS 安装到目录节点B上</span></p><p style="line-height: 1.75em;"><img data-s="300,640" data-type="png" src="data:image/JPG;base64,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 " src="SeWfibBcBT0Hem2iccgKEKc6rMicLBnaJgytl1PwKeOmUGxWwZ9CyKzvIpC7GtV3wY5PuxHiaApU2E0yOu1rRLKa7Q"  data-ratio="0.8343023255813954" data-w="344"  /></p><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">关于虚拟文件系统的四个对象大家已经很熟悉了，网上也有很多介绍。这里做一些简单介绍</span></p><ul style="margin-left: 30px; word-break: break-all; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 19.5px; white-space: normal; background-color: rgb(254, 254, 242);" class=" list-paddingleft-2"><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">超级块对象，它代表特定的已安装文件系统</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">索引节点对象，它代表特定文件。</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">目录项对象，它代表特定的目录项。</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">文件对象，它代表被进程打开的文件。</span></p></li></ul><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>inode</strong></span><span style="font-size: 16px;"><br  />inode用来描述文件物理上的属性，比如创建时间，uid,gid等。其对应的操作方法为file_operation,文件被打开后，inode 和 file_operation 都已经在内存中建立，file_operations 的指针也已经指向了具体文件系统提供的函数，此后都文件的操作，都由这些函数来完成。<br  /><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>dentry</strong></span><br  />本来，inode 中应该包括“目录节点”的名称，但由于符号链接的存在，导致一个物理文件可能有多个文件名，因此把和“目录节点”名称相关的部分从 inode 结构中分开，放在一个专门的 dentry 结构中。这样：<br  />1、 一个dentry 通过成员 d_inode 对应到一个 inode上，寻找 inode 的过程变成了寻找 dentry 的过程。因此，dentry 变得更加关键，inode 常常被 dentry 所遮掩。可以说， dentry 是文件系统中最核心的数据结构，它的身影无处不在。<br  />2、 由于符号链接的存在，导致多个 dentry 可能对应到同一个 inode 上.<br  /><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>super_block</strong></span><br  />super_block 保存了文件系统的整体信息，如访问权限；<br  />我们通过分析“获取一个 inode ”的过程来理解超级块的重要性。<br  />在文件系统的操作中，经常需要获得一个“目录节点”对应的 inode，这个 inode 有可能已经存在于内存中了，也可能还没有，需要创建一个新的 inode，并从磁盘上读取相应的信息来填充。 在内核中对应的代码是iget5_locked,对应代码的过程如下：<br  />1、 通过 iget5_locked() 获取 inode。如果 inode 在内存中已经存在，则直接返回；否则创建一个新的 inode<br  />2、 如果是新创建的 inode，通过 super_block-&gt;s_op-&gt;read_inode() 来填充它。也就是说，如何填充一个新创建的 inode， 是由具体文件系统提供的函数实现的。<br  />iget5_locked() 首先在全局的 inode hash table 中寻找，如果找不到，则调用 get_new_inode() ，进而调用 alloc_inode() 来创建一个新的 inode<br  />在 alloc_inode() 中可以看到，如果具体文件系统提供了创建 inode 的方法，则由具体文件系统来负责创建，否则采用系统默认的的创建方法。</span></p><p style="line-height: 1.75em;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hem2iccgKEKc6rMicLBnaJgyTozNzxvLaOlGb3ibpX8EI6vVkNnWaXjIH0L1VtPLJXcqkD2LKvcc9pQ"  data-ratio="0.6205035971223022" data-w=""  /></p><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">super_block 是在安装文件系统的时候创建的，后面会看到它和其它结构之间的关系。<br  /><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>为什么说super_block如此重要？</strong></span><br  />我们来看下打开文件的过程：</span></p><ul style="margin-left: 30px; word-break: break-all; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 19.5px; white-space: normal; background-color: rgb(254, 254, 242);" class=" list-paddingleft-2"><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">1 分配文件描述符号。</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">2 获得新文件对象。</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">3.获得目标文件的目录项对象和其索引节点对象，主要通过open_namei()函数）——具体而言是通过调用索引节点对象（该索引节点或是安装点或是当前目录）的lookup方法找到目录项对应的索引节点号ino，然后调用iget(sb，ino)从磁盘读入相应索引节点并在内核中建立起相应的索引节点(inode)对象（其实还是通过调用sb-&gt;s_op-&gt;read_inode()超级块提供的方法），最后还要使用d_add(dentry,inode)函数将目录项对象与inode对象连接起来。</span></p></li><li><p style="line-height: 1.75em;"><span style="font-size: 16px;">4 初始化目标文件对象的域，特别是把f_op域设置成索引节点中i_fop指向文件对象的操作表——以后对文件的所有操作将调用该表中的实际方法。</span></p></li></ul><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">看到这里大家应该知道文件系统中超级块的重要了吧，它是一切文件操作的源头。</span></p><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>当你要实现一个文件系统的时候，你首先要做的就是生产自己的super_block,即要重载内核的get_sb()函数，这个函数是在mount的时候调用的</strong></span></p><h3 style="margin: 15px auto 2px; font-weight: bold; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px; color: rgb(2, 30, 170);">2.注册文件系统</span></h3><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">一个具体的文件系统必须先向vfs注册，才能被使用。通过register_filesystem() ，可以将一个“文件系统类型”结构 file_system_type注册到内核中一个全局的链表file_systems 上。<br  /><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong>文件系统注册的主要目的，就是让 VFS 创建该文件系统的“超级块”结构。</strong></span><br  />一个文件系统在内核中用struct file_system_type来表示：</span></p><p style="line-height: 1.75em;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hem2iccgKEKc6rMicLBnaJgy7CRnvu4ibItpDLgF1ia5D8516bCjeW7JQya9eHK3gG4QMeibXnEkUlvew"  data-ratio="0.6442307692307693" data-w="520"  /></p><p style="margin: 10px auto; font-size: 13px; font-family: Verdana, Arial, Helvetica, sans-serif; white-space: normal; line-height: 1.75em; background-color: rgb(254, 254, 242);"><span style="font-size: 16px;">这个结构中最关键的就是 get_sb() 这个函数指针，它就是用于创建并设置 super_block 的目的的。<br  />因为安装一个文件系统的关键一步就是要为“被安装设备”创建和设置一个 super_block，而不同的具体的文件系统的 super_block 有自己特定的信息，因此要求具体的文件系统首先向内核注册，并提供 read_super() 的实现。</span></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" style="display: none;" id="js_reward_author">王张军</div>
                                                            <p class="reward_button_wrp">
                      <span id="js_author_reward_qrcode" class="reward_pop_panel">
                        <img id="js_author_reward_qrcode_img" src="" alt="赞赏二维码">
                        <strong>微信扫一扫赞赏作者</strong>
                      </span>
                        <a class="reward_button" id='js_reward_link' href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="javascript:;" id="js_reward_total"></a>&nbsp;<span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                        <div id="js_reward_pagination" class="simple_pagination" style="display: none;">
                          <button disabled class="btn_sp_prev js_reward_pagination_prev">上一页</button>
                          <span class="sp_page_num_area">
                            <a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>&#47;<span class="sp_page_num js_reward_pagination_totalpage">3</span>
                          </span>
                          <button class="btn_sp_next js_reward_pagination_next">下一页</button>
                        </div>
                    </div>
                </div>
                                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>