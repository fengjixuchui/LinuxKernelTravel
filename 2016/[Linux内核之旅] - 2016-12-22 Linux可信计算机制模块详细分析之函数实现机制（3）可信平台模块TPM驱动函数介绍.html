<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		Linux可信计算机制模块详细分析之函数实现机制（3）可信平台模块TPM驱动函数介绍
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664603588&amp;idx=1&amp;sn=f8909626a7ee616075365c44ac81fdd5&amp;chksm=f04db221c73a3b37297221f038ea70c1b1165646cadabae5bab7c9f268c0067b00b821edab6b&amp;scene=27#wechat_redirect&cpage=52' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">Linux可信计算机制模块详细分析之函数实现机制（3）可信平台模块TPM驱动函数介绍</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        程香鹏
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-12-22</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">当设备文件系统打开</span>TPM<span style="font-family:宋体">设备时，设备文件系统函数会调用</span><span style="font-family:Times New Roman">tpm_open()</span><span style="font-family:宋体">函数从链表</span><span style="font-family:Times New Roman">tpm_chip_list</span><span style="font-family:宋体">中找到具体的</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备实体结构，并将结构实例放在文件结构的私有数据成员上。</span></span><span style=";font-size:14px">tpm_release</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">函数和</span></span><span style=";font-size:14px">tpm_open</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">函数功能相反，用于释放结构</span><span style="font-family:Times New Roman">tpm_chip </span><span style="font-family:宋体">实例。</span><span style="font-family:Times New Roman">tpm_open()</span><span style="font-family:宋体">函数流程图如下：</span></span></p><p style="text-align: center;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EXhj4UIPwNzvS8KGNia4UedvrzuzSyC5gia5RJpy1n5Ep1fty7EzGW9aSSZibb0d3U4yXGdVaf29nOA"  data-ratio="1.1858823529411764" data-w="425"  /></p><p style="text-indent:28px;text-align:center"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">图</span>2-6 tpm_open()<span style="font-family:宋体">函数流程图</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px">TCG<span style="font-family:宋体">设备驱动程序库（</span><span style="font-family:Times New Roman">TPM Device Driver Library</span><span style="font-family:宋体">，</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">）是一个提供与</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动（</span><span style="font-family:Times New Roman">TPM DeviceDriver</span><span style="font-family:宋体">，</span><span style="font-family:Times New Roman">TDD</span><span style="font-family:宋体">）进行交互的</span><span style="font-family:Times New Roman">API</span><span style="font-family:宋体">库，</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">提供函数来打开和关</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动，发送和接受数据块，查询</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动的属性以及取消已经提交的</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令。</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">当</span>TDDL<span style="font-family:宋体">写</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备时，</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">将调用</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动中的写函数</span><span style="font-family:Times New Roman">tpm_write()</span><span style="font-family:宋体">。</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">通过写函数将</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令写入到</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">字符设备。</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备得到</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令后，执行命令对应的操作，并将操作结果放入</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动数据缓存区。当</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">读</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备时，</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">将调用</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动中的读函数，读函数从驱动程序的数据缓冲区读取</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备的操作结果。</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">函数</span>tpm_write <span style="font-family:宋体">从用户空间将</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令数据读入到内核空间的</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动中的数据缓存区，然后调用</span><span style="font-family:Times New Roman">tpm_transmit </span><span style="font-family:宋体">函数通过</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">硬件完成</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令操作，操作后的结构放入</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动中的数据缓存区。</span><span style="font-family:Times New Roman">tpm_write()</span><span style="font-family:宋体">函数执行流程图如下：</span></span></p><p style="text-align: center;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EXhj4UIPwNzvS8KGNia4UedlGB99icdVOT7z1BFSzyPiaCwVPagB6nYDwJA7zo2aNP8kNthMJYboSOw"  data-ratio="1.3177257525083612" data-w="299"  /></p><p style="text-indent:28px;text-align:center"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">图</span>2-7 tpm_write()<span style="font-family:宋体">函数执行流程图</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">函数</span></span><span style=";font-size:14px">tpm_transmit</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">是内核中 传输</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令的内部接口，它从驱动程序缓存区读取命令数据，然后调用芯片发送操作函数（</span><span style="font-family:Times New Roman">tpm_vendor_specific</span><span style="font-family:宋体">结构体中的</span><span style="font-family:Times New Roman">send </span><span style="font-family:宋体">函数），将命令交给</span><span style="font-family:Times New Roman">TPM </span><span style="font-family:宋体">芯片执行，并在指定时间内等待</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片操作的完成，如果</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片操作完成，就调用</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片的接受操作函数（</span><span style="font-family:Times New Roman">tpm_vendor_specific</span><span style="font-family:宋体">结构体中的</span><span style="font-family:Times New Roman">recv </span><span style="font-family:宋体">函数），将操作结果返回到驱动程序缓存区，如果在指定时间内没有完成操作，或者取消了操作，将返回错误信息。</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片的发送</span><span style="font-family:Times New Roman">/</span><span style="font-family:宋体">接受操作由具体的</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片读写寄存器操作决定。</span></span><span style=";font-size:14px">tpm_transmit</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">函数执行流程图如下：</span></span></p><p style="line-height: 24px; text-align: center;"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EXhj4UIPwNzvS8KGNia4UedWFJJZ8PAMLy0pXMm6icFfhicXhjVe6wQICicgRFQyFCVc3UfTQLKLu4mA"  data-ratio="0.759090909090909" data-w="440"  /><br  /></span></span></p><p style="line-height: 24px; text-align: center;"><br  /></p><p style="text-align: center;"><br  /></p><p style="text-indent:28px;text-align:center"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">图</span>2-8 </span><span style=";font-size:14px">tpm_transmit</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">函数执行流程图</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">函数</span>tpm_read <span style="font-family:宋体">关闭读定时器，从</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动数据缓冲区将数据（</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片的操作结果）拷贝到用户空间。</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">总结下，探测函数</span>probe()<span style="font-family:宋体">通过</span></span><span style=";font-size:14px">tpm_register_hardware</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">函数注册</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备实例，</span></span><span style=";font-size:14px">tpm_remove_hardware</span><span style=";font-family:宋体;font-size:14px">()<span style="font-family:宋体">注销</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备实例。从</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备读写数据时，先是设备文件系统调用</span><span style="font-family:Times New Roman">tpm_open()</span><span style="font-family:宋体">函数打开具体</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备结构实例。写数据时，设备驱动程序库</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">调用</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动写函数</span><span style="font-family:Times New Roman">tpm_write()</span><span style="font-family:宋体">从用户空间将</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令读入到内核空间</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动的数据缓存区，然后</span><span style="font-family:Times New Roman">tpm_write()</span><span style="font-family:宋体">调用</span><span style="font-family:Times New Roman">tpm_transmit()</span><span style="font-family:宋体">函数，</span><span style="font-family:Times New Roman">tpm_transmit()</span><span style="font-family:宋体">函数调用发送函数</span><span style="font-family:Times New Roman">send()</span><span style="font-family:宋体">将</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">命令传给</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">芯片执行，执行完成调用接受函数</span><span style="font-family:Times New Roman">recv()</span><span style="font-family:宋体">将执行结果返回到</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动的数据缓存区，</span><span style="font-family:Times New Roman">TDDL</span><span style="font-family:宋体">调用</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动读函数</span><span style="font-family:Times New Roman">tpm_read()</span><span style="font-family:宋体">从</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备驱动数据缓存区将执行结果返回到用户空间，如果要关闭</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备文件，设备文件系统会调用</span><span style="font-family:Times New Roman">tpm_release()</span><span style="font-family:宋体">函数释放</span><span style="font-family:Times New Roman">TPM</span><span style="font-family:宋体">设备结构实例。整个过程函数层次图如下所示：</span></span></p><p style="text-align: center;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EXhj4UIPwNzvS8KGNia4UedCQWbyib280oV8zzmv0IUqnjp0gqgy6ebjaLbDxgz1IOGuPdQf7ofMbQ"  data-ratio="2.4225352112676055" data-w="213"  /></p><p style="text-indent:28px;text-align:center"><span style=";font-family:宋体;font-size:14px"><span style="font-family:宋体">图</span>2-9 TPM<span style="font-family:宋体">驱动中函数调用层次图</span></span></p><p style="line-height:24px"><span style=";font-family:宋体;font-size:14px">TPM<span style="font-family:宋体">设备驱动是字符型设备驱动，它也遵循字符型驱动程序的模式。</span></span></p><p style="text-align: center;"><br  /><span style="font-family:宋体"><span style="font-size: 14px;"><br  /></span></span><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">程香鹏</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>