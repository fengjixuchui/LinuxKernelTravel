<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		内存管理之堆和栈
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664602353&amp;idx=1&amp;sn=9b43ba52da7c72320c07e4cb2047c6c2&amp;chksm=f04db714c73a3e02e508bf4b98aba838af80cde5ad86bf3b5b16369ace23589ad0758a422639&amp;scene=27#wechat_redirect&cpage=69' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">内存管理之堆和栈</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                                                        <span class="rich_media_meta rich_media_meta_text">
                                                        陶琛嵘
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-06-14</em>





                </div>

                
                
                                
                
                
                
                                                
                                <div class="rich_media_thumb_wrp" id="media">
                    
                                        
                                    </div>
                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <h1 style="margin-top:20px;margin-right:0;margin-bottom:10px;margin-left:0;padding:0 0 0 0 "><strong><span style="font-family: 宋体; font-size: 16px; color: rgb(2, 30, 170);">一、内存</span></strong></h1><p><span style="font-family: Helvetica; font-size: 16px;">关于程序的运行，不得不提到内存方面的内容，那么首先就对一个进程虚拟地址空间的布局用一张图来看清楚 </span></p><p><span style="font-family: Helvetica; font-size: 16px;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EpB8oLCe227ia0kiaibhz7tctm2w9MatGDdunw8OGHJN1zY3DAyNC4icgxSaiaSoEGGh7F8oDxLicxrdvg"  data-ratio="1.064102564102564" data-w="468"  /><br  /></span></p><p><span style="font-family: Helvetica; font-size: 16px;"></span></p><p><span style="font-family: Helvetica; font-size: 15px;">这张图基于32位Linux系统，即起始地址为0x08048000，可以看到顺序为只读段（代码段等）、读写段（数据段、bss段等）、堆（向上即高地址扩展）、用于堆扩展的未使用空间、动态库的映射位置（0x40000000开始）、之后就是栈（向下即低地址扩展）以及用于栈扩展的未使用空间、最后是内核空间。 <br  />前面讲过了动态链接与静态链接的部分，那么对只读段、读写段以及动态库的部分都比较清楚了。接下来就是关于栈和堆的部分，也是我们编写程序时会直接使用到的部分。</span></p><p><span style="font-family: Helvetica; font-size: 16px;"></span></p><h3 style="margin-top:20px;margin-right:0;margin-bottom:10px;margin-left:0;padding:0 0 0 0 "><span style="color: rgb(2, 30, 170);"><strong><span style="font-family: 宋体; font-size: 16px;">1、栈</span></strong></span></h3><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">其实前面的一张图中已经说过了栈与堆的大致特点，其中栈最大的不同就是从高地址向低地址扩展，同时有esp指针一直指向栈顶（低地址），另外栈的原则是先入后出。</span></p><p><span style="font-family: Helvetica; font-size: 16px;">栈保存了函数调用需要维护的信息，这称为堆栈帧或活动记录 </span></p><p><span style="font-family: Helvetica; font-size: 16px;"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAU4AAAEVCAAAAACqcVOBAAATYElEQVR42u1dK2DbyNY+oMBgiUCBQYnAAoMSgQUGJQILBEoELjBYIhAQsETgggFLBhQIhAwIEAgRCBAIMQgQCBEoMChZUFCw5MKfzn/OjGzn1e04M5U88XyxY0mWPKNPZ97nATLAIWDqDLwuBDqdItDpFIFOpwh0OkWg0ykCnU4R6HSKQKdTBDqdItDpFIFOp7Cls5n6Bo4LlnSK803Xd3f4xlff4yZudevutlMf6o2vnr66XeNxeuEn/iHwrNu1OnNAi7hRr7Ztmlbt77Zxr8E/vX8PNR2hL6/2x64fnqKQ3w6ZXtd4UX1VC4UaIS6F2rsUD1H349JZip/0mH8CePvz07Cl06PCLkbIqyWd5+Mw4QQeSGfhk3QGOl3CA+nMA50PYCudm3GocAEf6PRJOo+/ZfeKzuOXztyjws5ufn4atnSOw4QTlOufn8YJ0Vl0Pz+NE6KzDHS6RJBOpzCk04p0SzrT0ciwR2E2eVnZpGFJZzYaGfYwLElT0umTdBr2kQOdZjCcX3hFdO5/ro/xH3e6dGIondwmjWOis85+lzI5o81kCQ1sIHH58ydWd3LQwN/MYYYbGe25E9ATo1NKQbmhkXVREJMRyNRhx9Ywr1PSuXR3t+cfAObJAt6lqRRRPFvCu7k8c/f7pnm9sEnjiKSzhqhDeaQ2qJFpg/cPLh+XNKyIrWoXSzodthUJpGIWi3wBSafq0EhC6lKFyjCvr6TuzHMAVgLwNJI8jyUAvhbufl/GZqdNKZ0uC+O3NE9YyT7QdvXrEpayBebw9w0fzZR1p9OOYSEYbLuaiyjBjlLssJ9kKp21TRpHRCf1Owu9GRGrKe65rDwN6bRaTDwiOj+3uxm0Ti3r/I3vQzUC/wVzs9OubNKwpNPwiR8FIrPTXot0/mwEOp0i0OkUhnRO2VHyqe40zKuV6s0JSacHHaVXKJ1/2aQR6HyM0iaNE6LTsCmakk6XMz4/GzOz0/5rk0aQzsdgNmmcUMtueKtshDS+hyCdD3FC0mlYdzKbNE6IzlDYncKDjpJP0mlIZ+goOb1VNkIa34PhEz8KeFDYHdP5f25/7kV5ZTZpWNI5b8ntxuCx44Z8dTTN9dZHB/1rh3/X++Nqv77C7+ndKNce5JBDOeKoBu8cl3XdqA/1lULTXNXqOrrsshZ0yhW98CgdVLiis+hcTA7ztjuO6Rjeaqg7zeBBYX+FLTuzSeOEpNPwVr2e7xz01b+jOyPu20xZKa3Lk5DOnEkek/ZhI2WdplmC74I0jplSr4n0vdG3srHVV/JAOm3rzjKTMQwiyCBZpmm6jABFliktbtDKlkCriw1YuiLwgE7rwn4lF8AQuMlKedc06797ytMfyzXmLfrAMinX8F/J0tpW+8uD2XjLbjwvW5lQFkgdi3FJxZ6RwQFVAAm+8VNp1pVYHeDHGHn1eFSUQCLjKBNK7RalM1K1KeWJpchtCkxRCDXuCMjtGqPXTydpg0NyC0rLGOmcdd1SSafEQt6AhJWms0E6rQu7BwvD1tqsyxLkBoDqNZJOKuyNojOnZzWUb6QzgmYkOqfUPramM0XCFiDjQtG5/1Es5TlKJ9MHcDvQaYBmnnIyiqfePBss3ApQLCOZ5FwmlhW2SC4Ku2HFNCWdlnXncsaw3/6RZR+XVF0yhSXmidFNvUvZ2Xy+3lSbJp7BHJa/WXXkDZW5HeooHVygfJo+NhxyWLkkfUyn4fOP+HOXHzdGNdOqGHajL4EzVsmO4Z72icWxMz1/aldHdtJUHg0L0FHAUJ/KCZ3YeEYQ4wBkFUGOzWqhLcm1dSQ8cTemD5deTdCNKJ092UXRyEN9MOD0IXcm+3mjpx92kxCDJX/kU2E3rDtdtOw1JAn27SoSyRjplA/pzHjJueCs1OAFbGGR9P9GIXGPEaXzE5ZwxtIKeilnA500Utlo0r4+uQzxC+Pfoma/7tbe7NzmE663y2zKb/7NWrnSv2718lytlsRo4QwP3zRiWFwb1t0uRE1+8S/VQVqPu6iqig5o3/iXdEy/1YpdPZxXP4ftD4nCsJ53QWdHckaFHbB1TxgUMgfdeCfKOcczdKqH7dNa0ZjuAWg2DApdtmmE94NyvDXs9YlOQ9t7Nx2l9Se1gtBXggbM7Q88234bPn1S5ja0vXfvHoAZtzA+dZQm8wXSGLvbsR9kijzdzwr3u82G7qopK3Vz2Oo4cFk9amF/Gazp1NW0kLpl4zo7Qyes2vbF1If1AGzEfudLYVvY63kn5ZcEOmzbvjbN2UBnrypnTqMxAX9J+NTLLrZ14zJZ3WkO21vczg9n2Bub77oTQ6Z0FY6nqPFublsSjt+P0sbWp9kwgwULSGiJaD7QmaRZnlBFMMcOHAoozcGArRbI8dPZW9OpJ6tm72FJGh9Dl0KtvLOOqU+46CHOs8zKXRTh+N1SdYXlLW4LO4PkPp36S71XLBqwah62OH46raUz19UjrCHJ88d06nY+zq3VaTSO30Pi3cr2Hn+HlMWJkLOVfJdmbwY648VikaSfIH6/mEW3DVg54xmwOX46O4/8xjeBTpcQhnRO6Pt4bdsUjQgfpNOjwI61B9JppR81LrhhxcRsEjkdOoUhnVNKZ1yJCyEqxI0yrcJ3ddnXlehpHeeyquuu6+4onrOO4awjNG+jNN/Sf9pub7YBm5v2+n6Y5WHnqlbLQmSApe2waM3oQtl03YM6QFnYGnrR4hIdpPxVS8PCPqHjH5+kszSkk9kkYkdn6xGdwrAXMmFh7zyik3sgnbaTZiPCtGWfsO5sfYp2b1jYmU0ipyOd5fHTee2RdJaGI7gJC3vjEZ2FYUliNokEOh9jwo7Sa6ST2SQS6HyMIJ1GMLXoZDaJnA6dQTqdIjecZveto5SWciOazfZS2A3+chpVN7ugJeKe8mhir/loWth9k05lYbkL2chhN1rRxtaMNkWWFhHkcVrc+2rYIpMdODyEpg915wuuqZHHOWnjy63m4WzQtNd0qjIZRWkcQ5Qs8ORanZTMopiMH/DSjPTNDxZXH+h8gbZLhqS8ZbwgI5F2fQ4VTcffkMVIlkYyhmUMd5L9nmaLX7L0P3hzX0QTpw2v64q0F37Nk7Mknr87uFyY0jlh3VkfLp6cZHAVQ6KrTNARRmc6K0vyAFTqPOUkktqJTQIlSicAhS9H3pO0hMMjmeeGD8Aq4NTodFLARlKC1bmOYil4k2o6hYjKiGvVpAXZ3+Ra5bgB1hR5plxc5DsDsUNnrkcJ1m1H55VZUOn7aM4inr4jE9mU9TP4iOJwAcsbFMM3jEVUdxYgNyxJksW75XKWZuQegMuNXEX8G9ZsbDm/4An8wQ5tgZ9pu7Ca7ruajHq3UB6I5N/s/llKO5Kz259P50sUBakRSQc9Y9Gke2tEUPrWgiWD8woSQOKgJW1aDY5XRnHDqZk6NN1n6JxHEWzj9eUJLXUOHQbMji4GVPqKsihWuVmMyQnoRCJmDTKk9qgGHZwSAG+U56h4cPwjsZeku56qT5Xp0gppTOEf5wdrRz0nnQUlrmuNSD9SfRY9USFq9WAlL0XJ+Bh0vqTbySJB3mg2uutITcp6b6+hP6XyoBbjjS4HouXWK53EypahaLKD+53fuaDZDyPkrlUcUMI2XwBHK51zzmQPX/uqHehc6UxkGxXwOlWyeF517cV59seOTv5BS9GbJUlnFh8cP/YpnXF6nrIFxCzPdAWZC1i0WHPPo3P5pakFRelkA+CDCZ/j0/kQ1BP6YRtd9PuFyE5HcD8cz0gnk/vCjsMxgU+ZK1d1KLF7u1RMPFoa9mLGL+xT4fnCTi3OUKOIQtXiamiWar1y9Qix/s7xFKOVu6mlczw8Q+dvnXwrKpEhYZsFrCApUDR/JVaye3apf3KGow64NEnkpOkEbbanHLTtnEfQeTu/HNQGLpDLxNCvxOnQ+XTOhIow0gYRdsHKGKvGGM/JlcNQ0B4ncuhKihFPbhuNhmHjzyhNhad0Ut8H8jyfD18BVFJ1iGqIh6YIVJ2Z0MGFCVWnI53PeDL4pgViM7hCaNf6rbGmQAJ6k7EvhomcDp2jeDIIdDqFHZ1W4Y1HhiGd/bVNIqfTjTekk0/obcEnOg1n9MSEdPpU2E3ptDKntaPT2mR/RHggna+Rzgnjs/tEp6mDxAnp5OVama91fXfXb+3Zuh7R9Xfbnc3nDb7pJeU/+2XXzUb+s8EzN/3nvserh+vxuu2l935Sm8cpCzm9c3vfGWMz/GuUo8YHZnPacyJtGd4pD9JpBMPCPiWdHhlumN5pkE4zGEpnNeGo6BXS+QNPmz/A6RR2D+rOVyid5YTS+QrpLF627DwgFPZHKAOdRgjS6RRBOp0i0OkUplFHJ6STjcWFA3ggnWwsLhzAMIjr+a1NIqdDp2nL3pmd9zwCnY+QT2gIw8biwgEM3fjndzaJnA6dhosbQTrNYEpnqDuNcArSmf6WZXmWqiCRg0GRMkLrv8k+/Sj7nm5uGRWr8+LscGONBziFunNwsB+zwagnyoGCOO9D85HOr4s4fadR2CGKkyJX2r0yK8q5aKAfYstBnO+0gllR8vPD7QYf4BQKO/xHr4arCNir+jfJ4VwFlHwnYcUW3byR8jKGXyCavYHk1iYp08LuNZ27ciz0ZwwUALvESgAKlmhzFF6c87I4L+w08U2l83Aj6Pv3Y5VFZnU1mZy1D7MhSDpTpemY79QdgexQogXY6Q+fQGEvoRxik0ky7UlmWNi7SO8MFteUR+UtBCzpNLSJTT2WTgoY23d5Kd/gTlTX75DOr6q5rwEaDpG6t3j+YQbxEuz8Jbx+6WyxftT2+dRoz+iWOdaeOuD2vmeUkBV/tEjsIlIY0pn6Syc1NKLhgifa7w/yxyGJVZ2pup7aHUrJqwTSqrSb+zfsZnlM59ch62vlaOOMnO6s1dCnzc5Y1d1xVmAKF1uTcmalZ20qnVZ3dDpjdlPptErkdOgM0ukUph0lq0QCnY8wJZ0+rbMb8hSk0wweSCcbiQoXWJidFug0g6F0Huzu6gECnY8QpNMMQTqdwgM6fbJnNxwV2U2qno6pgaHYTUmnT9Jp2FEKdJrBUDrtVp+D459HmJJOj+I6mhZ2O0LsrvYoAHYTCrtTvHY6/2eV9KEQHtDJu667Vc5A1vpD7VFIbNG3VXWBX7cUhFr0fa8CZePmTb2NVU1HyRnI536A8iJy13fXlVA/t+5utasRHTx7fdN2+F5/B+1TXNcNuQihGNqZYd05JZ0e+e8UhnMbU9LJRuLCBTwo7D51lAyl09Ca6zsIdD7ClP1On+g0DNIR6DRCE+h0iWZldl6g0wjCUJ1xSjrZSFw4APeAziCdTq8OdDq92qMJOh/o9Eg6uWFep6Tzz7HIsIcPdAbpdHq1R3UnN9RFDYXdCKZmNEE6jVAa6gQEOo3gA50eNUU+0Gkvne+lHCLfyr+UJaHqbffxapkvbmeMdv6ey3qZLpfp4h+LhFYe0GkpnXznHYBJpaYh5BDxN00B8go4WRn2oEIvStO4BM/DNNq912tFfI53ORfbrKRI53m6dcIQDYHGAeYQJ8vIjk7DVdcp6bTvKMEyTXUeFiDbOIPZB7whHiOXyVuu7Nz/hPrjsqrf2gUXMQ1A7rV0Kr025fQk0v4UQFD8doiypiA7d8peA/nygJje34GpCcGU+p32dO79IzUzkWcSOFOuQCiqeA60TCvmSHOOH5LbmJqb0jmlbrw1nUpzaL7LCqMgtengtabYQJGp9koyYR2Y0Qc6LTXoqjx9v1rly9WqVFnpzySsVPw4wBq1l3PlWuUa5HwFjNk1RaYe1+w8s02tkDhrdnkA2TCSd+WRhmpLHfBXtiCjAgYXdS/GCUgntjIkDJn2QUN9oiRNY+rJl8DzOIacxDOBiHFrH3SmNHlM55dcT/MI9k0qa27l9qOW3zKGrQ55SvyEB1lbb1rW/VNZmd2YFmJDvcXv4GQUEn0o7B7R6UNht/LEMy5Oo2UfDaZSZzoYfR6BzkeYkk6PjAgN6RSBTiOYSqeV6+PTMcC2a7FNEaTTKezovBwlj05g5zLFFEE6nSLUnU4R6HQKOzo/jZJHJ7AbPJriZDwkWq6NGOJk6By1sH9mjGZsBcuEVF6bP//rVdslRY/otJsWNsVAZ5zIFBpah9UrNFuX95vmuSlNAUNN5BGdo0onkCpQLvARtpLWZIRWhhDPr9AIHUfIKzOtcelMkhnpYECk6RzMur+je6EXwtpA5xNoOvsZY5+ytqsZi3JF5y8qC4q2t424bra4Js8aqdZxWbA/1k2LR/DVtuSqo8W99rqhXY31v/ju0OgGkLOP7h60XxHauu3xH727O+0u5HO/2dx1/VNsdn5FHqouYkPQG4YrckKnxHpTAE/xESbIVS2jbE/n04zk+8Bh00I/YvV5/6AQ9OYCwSvOOePi3oCDP0RZspKrv7I4L4uyQOR5fl6UL7i9gU6m49fg/5ku4Sp5rdzydPJARcWBbGoyjxDbhmbdUCybv+v6K9J53Q5Be+r3s4h9eXIR1p0Zs5tnfaV4pt3+sbaFgMDl83iGutxuueSkYTfIDHiEQKdTBDqdItDpFIFOpwh0OkWg0ykCnU4R6HSKQKdTBDqdItDpFIFOpwh0OkWg0ykCnU4R6HSKQKdT/D/XHfhIw1pjywAAAABJRU5ErkJggg== " src="SeWfibBcBT0EpB8oLCe227ia0kiaibhz7tctf4sLjcLgEhmibkEKn1571lLIchlicr0j9KKLLHziaFibZITEgEnGnYfE3Q"  data-ratio="0.8293413173652695" data-w="334"  /><br  /></span><span style="font-family: Helvetica; line-height: 1.6; font-size: 16px;">图中就是一个堆栈帧的实例图，即函数调用时会产生的一个在栈中保存的信息，其中使用ebp及esp两个寄存器来划定函数的活动记录。 </span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">esp始终指向栈顶部，即当前的函数的活动记录的顶部，而ebp则固定不动，其指向的是调用函数前ebp的数据，于是在调用完成后，ebp会重新获得调用前的值。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">至于一个堆栈帧的结构是这样的原因就是因为调用函数时所需要进行的一系列操作导致的：</span></p><p style="margin-top:10px;margin-right:48px;margin-bottom:10px;margin-left:48px"><span style="font-family: 宋体; color: rgb(170, 170, 170); font-size: 15px;">1、将所有参数或一部分参数入栈 <br  />2、将当前指令的下一条指令地址入栈（返回地址） <br  />3、跳转到函数体执行，在函数体开始执行时还需要完成一部分操作：ebp入栈，将ebp指向esp(栈顶)，分配所需字节的临时空间，保存寄存器</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">其中第2和3步在汇编代码中就是由call指令完成的，而在i386中函数体的开头的一般形式中可以看出第2和3步执行后还需要完成的那一部分操作</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">1.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">push ebp &nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*将old ebp入栈*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">2.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">mov ebp</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">esp &nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*将ebp指向栈顶,经过上面的一步，此时esp即指向了old ebp的位置，因此完成将ebp寄存器指向old ebp的功能*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 16px; background: rgb(248, 248, 248);">3.&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">sub</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;esp</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,临时空间字节数</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*可选，根据局部变量的具体情况来定*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">4.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">push </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">寄存器名</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*可选，即保存寄存器的值，对于多个寄存器来说可以重复多次*/</span></span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">因此可以想象，实际的调用函数完成后的返回过程与之前相反：</span></p><p style="margin-top:10px;margin-right:48px;margin-bottom:10px;margin-left:48px"><span style="font-family: 宋体; color: rgb(170, 170, 170); font-size: 15px;">1、将寄存器出栈，还原需要保存的寄存器值 <br  />2、将ebp的地址赋给esp，即回收临时空间 <br  />3、ebp出栈，还原ebp值 <br  />4、ret 执行原来保存的当前指令的下条指令</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">对应于具体的汇编代码就是这样</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">1.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">pop </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">寄存器名</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*对应于上面的最后一步操作，有n个寄存器就需要出栈n次*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">2.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">mov esp</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">ebp &nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*将esp指向ebp指向的位置，简单来说就是将栈顶设置在了old ebp的具体存储位置上，那么堆与局部变量的部分就属于了栈外，相当于回收了局部变量占用的空间*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">3.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">pop ebp &nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*将ebp的值恢复*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">4.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">ret &nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*位于ebp上面的部分就是返回地址，从而ret命令获取返回地址，并跳转到该位置上，于是完成了一个函数的调用结束返回的工作*/</span></span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 15px;">对于上面调用一个函数的堆栈帧的过程大多数都是这样的情形，不过出现同时满足下面两种情况的话则不一定 <br  />1、函数声明为static（即函数仅能在此编译单元内访问） <br  />2、函数在本编译单元中仅被直接调用，即没有任何函数指针指向过这个函数 <br  />这种情况下编译器能够确定在别的编译单元中不需要使用到这个函数，那么就可以随意修改这个函数的各个方面，其中也包括了进入与退出指令序列，从而达到优化的目的。</span></p><p><span style="font-family: Helvetica; font-size: 16px;"></span></p><h5 style="margin-top:20px;margin-right:0;margin-bottom:10px;margin-left:0;padding:0 0 0 0 "><span style="color: rgb(2, 30, 170); font-size: 16px;"><strong><span style="color: rgb(2, 30, 170); font-family: 宋体;">调用惯例</span></strong></span></h5><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 15px;">什么是调用惯例？简单来说就是调用方与被调用方约定好的一些规则，比方说函数参数的传递顺序和方式，栈的维护方式以及名字修饰等等。 <br  />一般来说C语言使用cdecl这个调用惯例，它是C语言默认的调用惯例，它的具体内容是：</span></p><p style="margin-top:10px;margin-right:48px;margin-bottom:10px;margin-left:48px"><span style="font-family: 宋体; color: rgb(170, 170, 170); font-size: 15px;">1、参数传递方式：从右至左的顺序压参数入栈（对于一个foo(int m,int n )这样一个函数来说，参数入栈时的顺序就是先n后m） <br  />2、出栈方：由函数调用方将参数等出栈（因此在前面的函数调用收尾的代码中，并没有出现对于返回地址上面的参数部分的出栈工作，它是由调用方完成的，对于被调用函数来说对其进行任何操作） <br  />3、名字修饰：直接在函数名称前加1个下划线”_”</span></p><h3 style="margin-top:20px;margin-right:0;margin-bottom:10px;margin-left:0;padding:0 0 0 0 "><span style="color: rgb(2, 30, 170); font-size: 16px;"><strong><span style="color: rgb(2, 30, 170); font-family: 宋体;">2、堆与内存管理</span></strong></span></h3><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-size: 16px;"><span style="font-family: Helvetica; font-size: 15px;">光有栈对于面向过程的程序设计还远远不够：栈上的数据在函数返回时就会被释放掉，因此栈无法将数据传递至函数外部；而全局变量能够将数据传递至函数外部却无法动态产生，只能在编译时定义，缺乏表现力。那么</span><strong><span style="font-family: Helvetica; font-size: 15px;">堆</span></strong><span style="font-family: Helvetica; font-size: 15px;">就是唯一的选择了。</span></span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">堆时常占据虚拟空间的绝大部分，程序可以在其中申请一块连续内存并自由使用。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-family: Helvetica; font-size: 15px;">大家基本都知道如何申请一个堆空间，无非就是使用malloc函数，那么它到底是如何实现的呢？</span></strong><span style="font-family: Helvetica; font-size: 15px;">&nbsp;</span></span><span style="font-family: Helvetica; font-size: 15px;"><br  />有一个很简单的预想方法，将进程的内存管理交给操作系统内核去做，那么就需要提供一个系统调用，可以让程序调用它申请内存。 <br  />的确这样的方法能够行得通，但是这样每次申请堆空间的时候都需要进行系统调用，而系统调用对性能方面的开销很大，如果对堆的操作比较频繁，必然会影响到程序的性能。 <br  />如何解决这个问题？其实很简单，对文件的读写时用到缓存的技术来解决性能的问题，对于堆空间的申请问题在我看来也是一样，提前向操作系统申请一块适当大小的堆空间由程序自己管理就行了。实际的运行中，管理堆空间分配的往往是程序的运行库。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">这样对堆的分配就有了大概的了解了，运行库向操作系统“批发”了较大的堆空间，零售给程序使用，当全部使用完或者程序有大量内存需求时，再向操作系统“进货”，当然，一件货物不能卖两次，于是运行库就需要有算法来管理堆空间，避免一段空间连续分配，这就是堆的分配算法，一般来说比较简单的有空闲链表、位图以及对象池等，不过很多实际的运用中，堆的分配算法往往采用多种算法复合而成。</span></p><h5 style="margin-top:20px;margin-right:0;margin-bottom:10px;margin-left:0;padding:0 0 0 0 "><span style="color: rgb(2, 30, 170); font-size: 16px;"><strong><span style="color: rgb(2, 30, 170); font-family: 宋体;">Linux进程堆管理</span></strong></span></h5><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">最后了解下Linux进程堆如何管理。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">首先，Linux下进程堆管理提供了两种堆空间分配的方式，即两个系统调用：brk( )及mmap( ) <br  />这就是前文中说的“批发”堆空间的手段或方法，那么两种有什么区别呢？ <br  /><span style="font-family: Helvetica; font-size: 15px; color: rgb(2, 30, 170);"><strong>1、bar( ) </strong></span><br  />brk的实际作用实际上是设置进程数据段的结束地址，即它可以扩大或者缩小数据。想象一下，我们将数据段的大小增大，那么数据段多出来的那部分我们就能够使用了，将这块空间作为堆空间是最常见的做法。 <br  />另外，glibc中还有个sbrk函数，其实就是bar的包装，通过brk实现。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-size: 16px;"><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-family: Helvetica; font-size: 15px;">2、mmap( ) </span></strong></span><span style="font-family: Helvetica; font-size: 15px;"><br  />mmap的作用就是向OS申请一段虚拟地址空间，当然这块空间可以映射到某个文件，但是当它不将地址空间映射到某个文件时，我们就将这块空间称为</span><span style="font-size: 16px; color: rgb(2, 30, 170);"><strong><span style="font-family: Helvetica; font-size: 15px;">匿名空间</span></strong></span><span style="font-family: Helvetica; font-size: 15px;">。 <br  />来看下mmap( )系统调用</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 16px; background: rgb(248, 248, 248);">1.&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">void</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">*</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">mmap</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">(</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">void</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">*</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">start </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*申请空间的起始地址，为0时则OS自动挑选合适地址*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">2.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(0, 128, 128); font-size: 13px; background: rgb(248, 248, 248);">size_t</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;length </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*申请空间的长度*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">3.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">int</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;prot </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*申请空间的权限（可读、可写或可执行）*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">4.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">int</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;flags </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*申请空间的映射类型（文件映射、匿名空间），可以看到这里就指明了两种映射类型，后一种即我们所说的可以实现批发堆空间的方式*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">5.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(30, 52, 123); font-size: 13px; background: rgb(248, 248, 248);">int</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;fd </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">,</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*文件映射时指定文件描述符*/</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;line-height:19px"><span style="font-size: 16px;"><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 16px; background: rgb(248, 248, 248);">6.&nbsp;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(0, 128, 128); font-size: 13px; background: rgb(248, 248, 248);">off_t</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;offset </span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">)</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">;</span><span style="font-family: Consolas; color: rgb(72, 72, 76); font-size: 13px; background: rgb(248, 248, 248);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: Consolas; color: rgb(147, 161, 161); font-size: 13px; background: rgb(248, 248, 248);">/*文件映射时指定文件偏移*/</span></span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">那么我们基本了解了brk及mmap这两个申请内存空间的系统调用，最后来看看malloc如何处理用户的空间请求，基于前面的信息可以看出对于一定大小以内的空间申请时，是不会使用以上两个系统调用的。 <br  />实际上malloc对于小于128KB的请求，会在现有的堆空间根据堆分配算法分配一块空间并返回；大于128KB的请求则会使用mmap函数为其分配一块匿名空间，然后在这个匿名空间中为用户分配空间。 <br  />但是这里要注意，mmap是基于系统虚拟空间来申请函数的，申请空间的起始地址和大小必须是系统页的大小的整数倍，另外申请的空间大小不能超出空闲内存+空闲交换空间的总和。</span></p><p style="margin-top:10px;margin-right:0;margin-bottom:10px;margin-left:0"><span style="font-family: Helvetica; font-size: 16px;">前面说过实际情况下，堆分配算法往往采用多种算法合成，在glibc中就运用了这样的方法，malloc分配空间时不只是判断是否小于128KB，具体情况为：小于64B，采用对象池方法；大于512B采用最佳适配算法；大于64B但小于512B，根据情况选择最佳的折中策略，会在空闲链表、位图以及对象池几种算法中选择一种方法；最后，大于128KB则使用mmap机制直接向操作系统申请空间。</span></p><p style="padding: 0px;"><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" style="display: none;" id="js_reward_author">陶琛嵘</div>
                                                            <p class="reward_button_wrp">
                      <span id="js_author_reward_qrcode" class="reward_pop_panel">
                        <img id="js_author_reward_qrcode_img" src="" alt="赞赏二维码">
                        <strong>微信扫一扫赞赏作者</strong>
                      </span>
                        <a class="reward_button" id='js_reward_link' href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="javascript:;" id="js_reward_total"></a>&nbsp;<span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                        <div id="js_reward_pagination" class="simple_pagination" style="display: none;">
                          <button disabled class="btn_sp_prev js_reward_pagination_prev">上一页</button>
                          <span class="sp_page_num_area">
                            <a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>&#47;<span class="sp_page_num js_reward_pagination_totalpage">3</span>
                          </span>
                          <button class="btn_sp_next js_reward_pagination_next">下一页</button>
                        </div>
                    </div>
                </div>
                                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>