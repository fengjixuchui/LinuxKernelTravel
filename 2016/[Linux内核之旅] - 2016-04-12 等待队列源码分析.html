<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		等待队列源码分析
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=417070625&amp;idx=2&amp;sn=1f808865ad673d5fad6e121dc454ece6&amp;chksm=7644d3c441335ad2d9e43a342ba597b4c3099fd7d0246d507f5216bb0a5ea76e87646a618d7b&amp;scene=27#wechat_redirect&cpage=74' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">等待队列源码分析</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        武特
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-04-12</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p style=""><span style="font-size: 16px;">正如list_head结构那样，等待队列(wait queue)作为linux内核中的基础数据结构，与进程调度紧密结合在一起；在驱动程序中，常常使用等待队列来实现进程的阻塞和进程的唤醒。因此，我们很有必要对它的内部实现进行分析。</span></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">0.数据结构</strong></span></p><p style=""><span style="font-size: 16px;">一般我们的链式线性表都会有一个头结点，以使我们迅速找到这个线性链表的“领导”。在等待队列中，同样有队列头，只不过等待队列头和普通的等待队列结点定义有所不同。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="comments" style="">//yoursource/include/linux/wait.h</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">50struct __wait_queue_head {</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">51&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spinlock_t lock;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">52&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">struct</code>&nbsp;<code class="plain" style="">list_head task_list;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">53};</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">54typedef&nbsp;</code><code class="keyword bold" style="">struct</code>&nbsp;<code class="plain" style="">__wait_queue_head wait_queue_head_t;</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">可以看到，等待队列头结构中封装了list_head结构。这么做是可以想象到的，因为队列和栈本质上还是双联表。当我们适当限制双联表的某些操作时，就可以实现这样的功能。另外，等待队列头结构中还有一个自旋锁结构的变量lock，它起到了对等待队列进行互斥操作的作用。</span></p><p style=""><span style="font-size: 16px;">在等待队列结构中，除了使用list_head结构外，还有以下几个字段：</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">28typedef&nbsp;</code><code class="keyword bold" style="">struct</code>&nbsp;<code class="plain" style="">__wait_queue wait_queue_t;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">32struct __wait_queue {</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">34#define WQ_FLAG_EXCLUSIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">*</code><code class="keyword bold" style="">private</code><code class="plain" style="">;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_func_t func;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">struct</code>&nbsp;<code class="plain" style="">list_head task_list;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">8</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">38};</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">flag：指明该等待的进程是互斥还是非互斥，为0时非互斥，为1时互斥；<br  />WQ_FLAG_EXCLUSIVE ：从变量可以看出，此宏代表进程是互斥的；<br  />private：void型指针变量功能强大，你可以赋给它你需要的结构体指针。一般赋值为task_struct类型的指针，也就是说指向一个进程；<br  />func：函数指针，指向该等待队列项的唤醒函数；</span></p><p style=""><span style="font-size: 16px;">我们可以通过下述图来详细了解等待队列头和等待队列的结构关系：</span></p><p style=""><a rel="attachment wp-att-1855" style="border: 0px; outline: 0px; color: rgb(0, 77, 153);"><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0E3BPSDIYDDTgCjAfsUHQuEyP0VJBIXWJMib005eYxOblILIRGqe54SaOic3aGMoibPcaMNMTK9qPRzg"  data-ratio="0.26" data-w="300"  /><br  /></a></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">1.定义及初始化</strong></span></p><p style=""><span style="font-size: 16px;">内核中使用init_waitqueue_head宏来初始化等待队列头。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="comments" style="">//yourLinuxSourceDir/include/linux/wait.h</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">82#define init_waitqueue_head(q)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">83&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">do</code>&nbsp;<code class="plain" style="">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">84&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">static</code>&nbsp;<code class="keyword bold" style="">struct</code>&nbsp;<code class="plain" style="">lock_class_key __key;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">85&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">86&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __init_waitqueue_head((q), &amp;__key);&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;&nbsp;</code><code class="plain" style="">87&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</code><code class="keyword bold" style="">while</code>&nbsp;<code class="plain" style="">(0)</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">我们可以看到这个宏使用了do-while型循环语句，里面包含两条语句。首先定义了一个变量__key，然后再调用init_waitqueue_head函数。</span></p><p style=""><span style="font-size: 16px;">事实上，这个do-while循环语句只会执行一次。那么，为什么要选择使用这个循环语句？在定义宏的时候将上述语句嵌套在一个大括号里也可以啊！可能我们如下那样使用一个宏：</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">if</code><code class="plain" style="">(conditon)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init_waitqueue_head(q);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">else</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; do_somthing_else();</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">如果我们去除do-while，那么替换后会编译错误。因为宏末尾的分号使得else语句成为一个单独的句子。你也许会说，那我这样使用：init_waitqueue_head(q)就可以避免这个错误了。这样是可以，但是对于那些初学者来说，很难避免他们要加上一个;。并且，在茫茫代码中，孤零零的出现一个没有;的语句，未免显得有些奇怪。</span></p><p style=""><span style="font-size: 16px;">言归正传，在init_waitqueue_head宏中调用的__init_waitqueue_head函数定义如下：</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">13void __init_waitqueue_head(wait_queue_head_t *q,&nbsp;</code><code class="keyword bold" style="">struct</code><code class="plain" style="">lock_class_key *key)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">14{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_init(&amp;q-&gt;lock);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lockdep_set_class(&amp;q-&gt;lock, key);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INIT_LIST_HEAD(&amp;q-&gt;task_list);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">18}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">在这个函数中，首先利用自旋锁初始化函数初始化这个自旋锁；在上述等待队列头的定义中，我们可以看到task_list字段是一个list_head结构类型，因此我们使用INIT_LIST_HEAD对这个链表进行初始化。这些过程都是我们所熟悉的。</span></p><p style=""><span style="font-size: 16px;">同时，我们也可以使用初始化宏DECLARE_WAIT_QUEUE_HEAD一步的进行定义和初始化。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">70#define __WAIT_QUEUE_HEAD_INITIALIZER(name) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">71&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = __SPIN_LOCK_UNLOCKED(name.lock),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">72&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .task_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = { &amp;(name).task_list, &amp;(name).task_list } }</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">73</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">74#define DECLARE_WAIT_QUEUE_HEAD(name) \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">75&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_head_t name = __WAIT_QUEUE_HEAD_INITIALIZER(name)</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">上述代码对于有C基础的人理解起来并不困难。需要注意的是对task_list进行赋值后，这个结点的前后指针都会指向自己。</span></p><p style=""><span style="font-size: 16px;">同样，对于等待队列，我们可以使用DECLARE_WAITQUEUE宏来定义并初始化一个等待队列项。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">30int default_wake_function(wait_queue_t *wait, unsigned mode,&nbsp;</code><code class="color1 bold" style="">int</code><code class="plain" style="">flags,&nbsp;</code><code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">*key);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">62#define __WAITQUEUE_INITIALIZER(name, tsk) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .</code><code class="keyword bold" style="">private</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="plain" style="">= tsk,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .func&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = default_wake_function,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">65&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .task_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = { NULL, NULL } }</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">66</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">67#define DECLARE_WAITQUEUE(name, tsk)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">8</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_t name = __WAITQUEUE_INITIALIZER(name, tsk)</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">name要定义的等待队列项的名称；tsk是task_struct类型的指针变量，它指向这个等待队列项所对应的进程。</span></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">3.添加/移除等待队列</strong></span></p><p style=""><span style="font-size: 16px;">add_wait_queue添加函数将等待队列wait添加到以q为等待队列头的那个等待队列链表中。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">22void add_wait_queue(wait_queue_head_t *q, wait_queue_t *wait)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">23{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">25</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait-&gt;flags &amp;= ~WQ_FLAG_EXCLUSIVE;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __add_wait_queue(q, wait);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">8</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">9</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">30}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">我们可以看到flags的结果必然是0，也就是说这个函数是将非互斥进程添加到等待队列当中。而且在调用具体的添加函数时候，使用关中断并保护现场的自旋锁方式使得添加操作每次只被一个进程访问。</span></p><p style=""><span style="font-size: 16px;">具体的添加过程是将当前进程所对应的等待队列结点wait添加到等待队列头结点q之后。具体来说，就是将new-&gt;task_list结点添加到以head-&gt;task_list为头指针的双链表当中。另外，通过add_wait_queue_exclusive函数可以将一个互斥进程添加到等待队列当中。从添加过程可以发现，add_wait_queue函数会将非互斥进程添加到等待队列的前部。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">122static&nbsp;</code><code class="keyword bold" style="">inline</code>&nbsp;<code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">__add_wait_queue(wait_queue_head_t *head, wait_queue_t *</code><code class="keyword bold" style="">new</code><code class="plain" style="">)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">123{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">124&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list_add(&amp;</code><code class="keyword bold" style="">new</code><code class="plain" style="">-&gt;task_list, &amp;head-&gt;task_list);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">125}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">另外， add_wait_queue_exclusive添加函数则会将互斥进程添加到等待队列的末尾。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">33void add_wait_queue_exclusive(wait_queue_head_t *q, wait_queue_t *wait)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">34{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">36</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait-&gt;flags |= WQ_FLAG_EXCLUSIVE;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">38&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __add_wait_queue_tail(q, wait);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">8</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">9</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">41}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">remove_wait_queue函数用于将等待队列项wait从以q为等待队列头的等待队列中移除，源码如下。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">01</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">44void remove_wait_queue(wait_queue_head_t *q, wait_queue_t *wait)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">02</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">45{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">03</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">04</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">47</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">05</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">06</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __remove_wait_queue(q, wait);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">07</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">08</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">51}</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">09</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">150static&nbsp;</code><code class="keyword bold" style="">inline</code>&nbsp;<code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">__remove_wait_queue(wait_queue_head_t *head,</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">10</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_t *old)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">11</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">152{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">12</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list_del(&amp;old-&gt;task_list);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">13</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">154}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">有了上述的基础，那么移除函数就简单了许多。</span></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">4.在等待队列上睡眠</strong></span></p><p style=""><span style="font-size: 16px;"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);"></strong>如何实现进程的阻塞？大致过程就是将当前进程的状态设置成睡眠状态，然后将这个进程加入到等待队列即可。在linux内核中有一组函数接口来实现这个功能。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">01</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4313void __sched interruptible_sleep_on(wait_queue_head_t *q)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">02</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4314{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">03</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4315&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep_on_common(q, TASK_INTERRUPTIBLE, MAX_SCHEDULE_TIMEOUT);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">04</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4316}</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">05</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4317EXPORT_SYMBOL(interruptible_sleep_on);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">06</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4318</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">07</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4319long __sched</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">08</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4320interruptible_sleep_on_timeout(wait_queue_head_t *q,&nbsp;</code><code class="color1 bold" style="">long</code><code class="plain" style="">timeout)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">09</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4321{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">10</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">return</code>&nbsp;<code class="plain" style="">sleep_on_common(q, TASK_INTERRUPTIBLE, timeout);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">11</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4323}</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">12</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4324EXPORT_SYMBOL(interruptible_sleep_on_timeout);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">13</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4325</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">14</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4326void __sched sleep_on(wait_queue_head_t *q)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">15</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4327{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">16</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep_on_common(q, TASK_UNINTERRUPTIBLE, MAX_SCHEDULE_TIMEOUT);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">17</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4329}</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">18</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4330EXPORT_SYMBOL(sleep_on);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">19</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4331</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">20</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4332long __sched sleep_on_timeout(wait_queue_head_t *q,&nbsp;</code><code class="color1 bold" style="">long</code><code class="plain" style="">timeout)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">21</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4333{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">22</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4334&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">return</code>&nbsp;<code class="plain" style="">sleep_on_common(q, TASK_UNINTERRUPTIBLE, timeout);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">23</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4335}</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">24</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4336EXPORT_SYMBOL(sleep_on_timeout);</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">通过上述源码，你可以发现这些函数在内部都调用了sleep_on_common函数，通过传递不同的值来实现不同的功能。而这个通用函数的三个参数分别关注的是：进程要加入到那个等待队列？进程是那种睡眠状态（TASK_UNINTERRUPTIBLE还是TASK_INTERRUPTIBLE）？进程睡眠的时间？</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">01</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4292static&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">__sched</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">02</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4293sleep_on_common(wait_queue_head_t *q,&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">state,&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">timeout)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">03</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4294{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">04</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">05</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4296&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_t wait;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">06</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4297</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">07</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4298&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init_waitqueue_entry(&amp;wait, current);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">08</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4299</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">09</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __set_current_state(state);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">10</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4301</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">11</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4302&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">12</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4303&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __add_wait_queue(q, &amp;wait);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">13</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4304&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock(&amp;q-&gt;lock);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">14</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4305&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout = schedule_timeout(timeout);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">15</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4306&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irq(&amp;q-&gt;lock);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">16</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4307&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __remove_wait_queue(q, &amp;wait);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">17</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4308&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">18</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4309</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">19</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4310&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">return</code>&nbsp;<code class="plain" style="">timeout;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">20</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4311}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">在此函数中，首先定义了一个等待队列项结点，通过 init_waitqueue_entry函数对其进行初始化。可以从下述初始化源码中看到，此时该等待队列项指向当前当前进程。而唤醒函数指针func则指向内核自定义的一个默认唤醒函数default_wake_function。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">98static&nbsp;</code><code class="keyword bold" style="">inline</code>&nbsp;<code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">init_waitqueue_entry(wait_queue_t *q,&nbsp;</code><code class="keyword bold" style="">struct</code><code class="plain" style="">task_struct *p)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="spaces" style="">&nbsp;</code><code class="plain" style="">99{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; q-&gt;flags = 0;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; q-&gt;</code><code class="keyword bold" style="">private</code>&nbsp;<code class="plain" style="">= p;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; q-&gt;func = default_wake_function;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">103}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">初始化完毕后，通过__set_current_state函数将当前进程的状态设置成state。接着，在自旋锁的保护下，将当前进程对应的等待队列结点插入到等待队列链表当中。更重要的是，在schedule_timeout函数中不仅要设置进程的睡眠时间（以jiffies为单位的），还要使用schedule函数进行重新调度。一旦使用了schedule函数后，也就意味这当前这个进程真正的睡眠了，那么接下来的代码会在它唤醒后执行。<span style="border: 0px; outline: 0px;">当该进程被唤醒后（资源可用时），会从等待队列中将自己对应的那个等待队列结点wait移除。</span></span></p><p style=""><span style="font-size: 16px;">上述过程都是在自旋锁保护下进行的，并且在整个执行过程中不可被其他中断所打断。现在再回过头去看一开始的那四个睡眠函数接口，你就明白了它们各自的不同之处了。</span></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">5.唤醒函数</strong></span></p><p style=""><span style="font-size: 16px;">唤醒函数会唤醒以x为头结点的等待队列中的等待队列项所对应的进程。与睡眠函数类似，内核中也有一组函数可以对阻塞的进程进行唤醒。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">170#define wake_up(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, 1, NULL)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">171#define wake_up_nr(x, nr)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, nr, NULL)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">172#define wake_up_all(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_NORMAL, 0, NULL)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><br  /></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">175#define wake_up_interruptible(x)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_INTERRUPTIBLE, 1, NULL)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">176#define wake_up_interruptible_nr(x, nr) __wake_up(x, TASK_INTERRUPTIBLE, nr, NULL)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">177#define wake_up_interruptible_all(x)&nbsp;&nbsp;&nbsp; __wake_up(x, TASK_INTERRUPTIBLE, 0, NULL)</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">通过上述代码，我们可以发现这些唤醒函数均调用了__wake_up函数。__wake_up函数的四个参数分别指：头结点指针、唤醒进程的类型、唤醒进程的数量和一个附加的void型指针变量。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3999void __wake_up(wait_queue_head_t *q, unsigned&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">mode,</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">nr_exclusive,&nbsp;</code><code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">*key)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4001{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;</code><code class="color1 bold" style="">long</code>&nbsp;<code class="plain" style="">flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">5</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4003</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">6</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">7</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4005&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __wake_up_common(q, mode, nr_exclusive, 0, key);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">8</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4006&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_unlock_irqrestore(&amp;q-&gt;lock, flags);</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">9</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">4007}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">在__wake_up函数又通过传递不同的参数调用__wake_up_common函数来实现不同的唤醒功能。</span></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">01</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3975static&nbsp;</code><code class="keyword bold" style="">void</code>&nbsp;<code class="plain" style="">__wake_up_common(wait_queue_head_t *q, unsigned</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">mode,</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">02</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3976&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">nr_exclusive,&nbsp;</code><code class="color1 bold" style="">int</code>&nbsp;<code class="plain" style="">wake_flags,&nbsp;</code><code class="keyword bold" style="">void</code><code class="plain" style="">*key)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">03</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3977{</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">04</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3978&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait_queue_t *curr, *next;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">05</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3979</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">06</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3980&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list_for_each_entry_safe(curr, next, &amp;q-&gt;task_list, task_list) {</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">07</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3981&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned flags = curr-&gt;flags;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">08</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3982</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">09</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3983&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">if</code>&nbsp;<code class="plain" style="">(curr-&gt;func(curr, mode, wake_flags, key) &amp;&amp;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">10</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3984&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (flags &amp; WQ_FLAG_EXCLUSIVE) &amp;&amp; !--nr_exclusive)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">11</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3985&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold" style="">break</code><code class="plain" style="">;</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">12</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3986&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">13</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">3987}</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">list_for_each_entry_safe函数将遍历整个等待队列中的链表，通过每次的逻辑判断来唤醒相应的进程。这个if语句初看起来有点麻烦，不过我们一点一点的将它拆解。</span></p><p style=""><span style="font-size: 16px;">curr-&gt;func(curr, mode, sync, key)：即执行默认的唤醒函数，将指定的进程curr以mode方式唤醒。成功唤醒返回1；否则，返回0；<br  />(flags &amp; WQ_FLAG_EXCLUSIVE)：判断当前进程是否以互斥形式唤醒。是互斥形式则返回1；否则返回0；<br  />!–nr_exclusive：nr_exclusive为需要唤醒的互斥进程的数量。</span></p><p style=""><span style="font-size: 16px;">这三个部分是通过逻辑与连接起来的。根据逻辑与的运算规则，只有当第一部分为真时才会判断第二部分的值，依次再判断第三部分的值。</span></p><p style=""><span style="font-size: 16px;">通过上述的等待队列的添加过程我们知道，等待队列中前面均是非互斥进程，后面才是互斥进程。因此，唤醒函数总先唤醒全部的非互斥进程。因为当__wake_up_commom函数每一次去判断if语时，总会“不自觉”去执行默认的唤醒函数（除非唤醒失败，那么会退出遍历宏）；当全部的非互斥进程被唤醒后，第二个判断条件也就成立了。因此__wake_up_commom函数会依次唤醒nr_exclusive个互斥进程；当–nr_exclusive为0时（!–nr_exclusive也就为真），整个遍历过程也恰好结束，而此时if语句的三个判断条件才刚好满足（<strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">这段代码太强大了!!!</strong>）。</span></p><p style=""><span style="font-size: 16px; color: rgb(0, 82, 255);"><strong style="border: 0px; outline: 0px; color: rgb(46, 46, 46);">6.有条件的睡眠</strong></span></p><p style=""><span style="font-size: 16px;">与睡眠函数不同，条件睡眠是指当某些条件发生时，这个进程才会加入到等待队列当中。关于条件睡眠有下列的宏：</span></p><p><a title="view source" class="item viewSource" style="border: 0px; outline: 0px; width: 16px; height: 16px; font-size: 16px; margin-left: 8px !important; color: rgb(160, 160, 160) !important; display: block !important; float: left !important; overflow: hidden !important; text-indent: -5000px !important; text-decoration: underline; background-image: none !important; background-repeat: no-repeat !important;"><span style="font-size: 16px;">view source</span></a><a title="print" class="item printSource" style="border: 0px; outline: 0px; width: 16px; height: 16px; font-size: 16px; margin-left: 8px !important; color: rgb(160, 160, 160) !important; display: block !important; float: left !important; overflow: hidden !important; text-indent: -5000px !important; text-decoration: underline; background-image: none !important; background-repeat: no-repeat !important;"><span style="font-size: 16px;">print</span></a><a title="?" class="item about" style="border: 0px; outline: 0px; width: 16px; height: 16px; margin-left: 8px !important; color: rgb(160, 160, 160) !important; display: block !important; float: left !important; overflow: hidden !important; text-indent: -5000px !important; background-image: none !important; background-repeat: no-repeat !important;"><span style="border: 0px; outline: 0px; width: 16px; height: 16px; font-size: 16px; margin-left: 8px !important; color: rgb(160, 160, 160) !important; display: block !important; float: left !important; overflow: hidden !important; text-indent: -5000px !important; background-image: none !important; background-repeat: no-repeat !important;">?</span></a></p><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">1</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">wait_event(wq, condition)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">2</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">wait_event_timeout(wq, condition, timeout)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">3</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">wait_event_interruptible(wq, condition)</code></td></tr></tbody></table><table width="NaN" height="NaN"><tbody style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><tr style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; float: none !important; vertical-align: baseline !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; min-height: auto !important; background: none !important; "><td class="number" style=" border: 0px !important; font-size: 1em !important; outline: 0px !important; padding: 0px !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important; background: none !important; " width="3" height="NaN"><code style="">4</code></td><td class="content" style=" border-width: 0px 0px 0px 3px !important; border-left-color: rgb(108, 226, 108) !important; font-size: 1em !important; outline: 0px !important; padding: 0px 0px 0px 0.5em !important; float: none !important; vertical-align: top !important;  left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; line-height: 1.1em !important; min-height: auto !important; color: rgb(0, 0, 0) !important; background: none !important; " width="NaN" height="NaN"><code class="plain" style="">wait_event_interruptible_timeout(wq, condition, timeout)</code></td></tr></tbody></table><p style=""><span style="font-size: 16px;">关于条件睡眠，虽然函数实现与睡眠函数不同，但是基本思想是相似的，各位可以查找相应的源码进行分析。Try！</span></p><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">武特</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>