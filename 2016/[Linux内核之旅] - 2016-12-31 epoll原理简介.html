<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		epoll原理简介
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664603612&amp;idx=2&amp;sn=d97e89ef22f60ff4917b3e0b158d76a8&amp;chksm=f04db239c73a3b2fd157a4ecd301e516852b67583b546680f0d9853bd9f08e8d20740a83d3fd&amp;scene=27#wechat_redirect&cpage=51' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">epoll原理简介</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        Linux内核那些事
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-12-31</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <blockquote style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 41, 65); box-sizing: border-box !important; word-wrap: break-word !important;">本文转载自 Linux内核那些事</span></strong></blockquote><blockquote style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 41, 65); box-sizing: border-box !important; word-wrap: break-word !important;">链接：http://mp.weixin.qq.com/s/8Udus40t2Srxsefart3e6g</span></strong></span></p></blockquote><p><br  /></p><h1 style="max-width: 100%; color: rgb(62, 62, 62); white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">是</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">Linux</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">引以为荣的技术，因为相对于</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">select</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">和</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">poll</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">有很大的性能改进。本文主要介绍</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的实现原理，了解</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">高效背后的魔法。</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></h1><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; text-indent: 28px; white-space: pre-wrap; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><h2 style="max-width: 100%; color: rgb(62, 62, 62); white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 24px; color: rgb(171, 25, 66); box-sizing: border-box !important; word-wrap: break-word !important;">epoll<span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的使用简介</span></span></h2><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">1.<span style="max-width: 100%; font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 9px; line-height: normal; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;</span></span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">使用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">时需要使用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">创建一个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的文件句柄，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的原型如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">intepoll_create(int size);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">此接口用于创建一个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的句柄，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">size</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">用来告诉内核这个监听的数目一共有多大。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">2.<span style="max-width: 100%; font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 9px; line-height: normal; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;</span></span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_ctl</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">使用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">可以向</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">句柄添加或者删除要监听的文件句柄。</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数原型如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">intepoll_ctl(int epfd, int op, int fd, struct epoll_event *event);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">要监听文件是否可读写时先要向</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">句柄注册要监听的事件类型。第一个参数是</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">返回的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">句柄，第二个参数表示动作，用三个宏来表示：</span></span></p><ul class=" list-paddingleft-2" style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">EPOLL_CTL_ADD</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">：注册新的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">到</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epfd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">中。</span></span></p></li><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">EPOLL_CTL_MOD</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">：修改已经注册的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的监听事件。</span></span></p></li><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">EPOLL_CTL_DEL</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">：从</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epfd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">中删除一个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。</span></span></p></li></ul><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">第三个参数是需要监听的文件句柄，第四个参数是告诉内核需要监听什么事。</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">3.<span style="max-width: 100%; font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 9px; line-height: normal; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;</span></span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_wait</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">万事俱备，现在只需要调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_wait()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数就可以开始等待事件发生了。</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_wailt()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的原型如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">intepoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">参数</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">events</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">用来从内核得到事件的集合，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">maxevents</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">告之内核这个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">events</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">有多大，这个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;maxevents</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的值不能大于创建</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">时的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">size</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">，参数</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">timeout</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">是超时时间（毫秒，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">0</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会立即返回，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">-1</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">是永久阻塞）。该函数返回需要处理的事件数目，如返回</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">0</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">表示已超时。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><h2 style="max-width: 100%; color: rgb(62, 62, 62); white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 24px; color: rgb(171, 25, 66); box-sizing: border-box !important; word-wrap: break-word !important;">epoll<span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">实现原理</span></span></h2><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">前面介绍了</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的使用，接下来主要介绍</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">在内核的实现原理。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">当我们在<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">用户态</strong>调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">时，会触发调用内核的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。我们先来看看</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">这个函数：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">SYSCALL_DEFINE1</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">(epoll_create1,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, flags)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;error, fd;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*ep = NULL;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*file;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; error =&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">ep_alloc</strong>(&amp;ep);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; fd =&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">get_unused_fd_flags</strong>(O_RDWR| (flags &amp; O_CLOEXEC));</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; file =&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">anon_inode_getfile</strong>(</span><span style="max-width: 100%; font-family: Consolas; color: rgb(42, 0, 255); box-sizing: border-box !important; word-wrap: break-word !important;">"[eventpoll]"</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, &amp;eventpoll_fops, ep,</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; O_RDWR | (flags &amp;O_CLOEXEC));</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">fd_install</strong>(fd,file);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;= file;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;fd;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">这个函数主要调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_alloc()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">申请一个</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span></strong><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构是</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的核心数据结构，我们来看看这个结构的定义：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;{</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; spinlock_t&nbsp;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">lock</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">mutex</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">mtx</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; wait_queue_head_t&nbsp;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">wq</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; wait_queue_head_t&nbsp;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">poll_wait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">list_head</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">rb_root</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">rbr</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">ovflist</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">user_struct</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">user</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">visited</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">list_head</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">visited_list_link</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">};</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构有三个字段是比较重要的，分别是：</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">wq</span></strong><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">、</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span></strong><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">和</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rbr</span></strong><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。</span></span></p><ul class=" list-paddingleft-2" style="max-width: 100%; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">wq</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">用于保存有哪些进程在等待这个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">返回。</span></span></p></li><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">用于保存可读写的文件。</span></span></p></li><li><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rbr</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">用于建立一个快速查找文件句柄的红黑树。</span></span></p><p style="max-width: 100%; min-height: 1em; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></li></ul><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">创建完</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构后，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">get_unused_fd_flags()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">获取一个空闲的文件句柄</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">，接着调</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">anon_inode_getfile()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">获取一个空闲的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构，并且把</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构与</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构绑定。最后调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd_install()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">把文件句柄</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">与</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">file</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构绑定，返回文件句柄</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。通过一系列的操作后，内核就可以通过文件句柄</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">与</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构进行关联。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">根据</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的使用流程，使用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_create()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">创建</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">句柄后，可以通过</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数向</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">句柄添加和删除要监视的文件句柄。调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会触发内核调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数，我们来看看</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的最重要部分：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">SYSCALL_DEFINE4(epoll_ctl,</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, epfd,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, op,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, fd,</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;epoll_event __user *,event)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">switch</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(op) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">case</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;EPOLL_CTL_ADD:</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(!epi) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; epds.events |= POLLERR | POLLHUP;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = ep_insert(ep, &amp;epds,tfile, fd);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">else</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = -EEXIST;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clear_tfile_check_list();</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">break</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">case</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;EPOLL_CTL_DEL:</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(epi)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = ep_remove(ep, epi);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">else</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = -ENOENT;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">break</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">case</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;EPOLL_CTL_MOD:</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(epi) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; epds.events |= POLLERR | POLLHUP;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = ep_modify(ep, epi,&amp;epds);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">else</span></strong></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error = -ENOENT;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">break</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; }</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;error;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_ctl()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会根据我们传递的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">op</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">参数来进行不同的操作，我们主要看看</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">op</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">为</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">EPOLL_CTL_ADD</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的操作，也就是添加操作。当进行添加操作时，</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_ctl()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">最终会调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_insert()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">把文件句柄</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">添加到</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构维护的红黑树中，</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_insert()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">代码如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">static</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">ep_insert</strong>(</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;eventpoll *ep,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;epoll_event*event,</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;file *tfile,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;fd)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;error, revents, pwake =0;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">unsigned</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">long</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;flags;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*epi;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">ep_pqueue</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;epq;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(!(epi =kmem_cache_alloc(epi_cache, GFP_KERNEL)))</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;-ENOMEM;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; init_poll_funcptr(&amp;epq.pt,ep_ptable_queue_proc);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; revents = tfile-&gt;f_op-&gt;poll(tfile,&amp;epq.</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">pt</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">);</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ep_rbtree_insert(ep, epi);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;0;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_insert()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数首先创建一个</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构用于管理事件，然后调用文件句柄的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">poll()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">接口，根据</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">init_poll_funcptr(&amp;epq.pt,ep_ptable_queue_proc)</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">这行代码的设置，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">poll()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">接口最终会调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_ptable_queue_proc()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数。</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_ptable_queue_proc()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数代码如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">static</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">void</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">ep_ptable_queue_proc</strong>(</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;file *file,wait_queue_head_t *whead, poll_table*pt)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*epi = ep_item_from_epqueue(pt);</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 80, 50); box-sizing: border-box !important; word-wrap: break-word !important;">eppoll_entry</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*pwq;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(epi-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">nwait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&gt;= 0</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 56px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&amp;&amp; (pwq = kmem_cache_alloc(pwq_cache, GFP_KERNEL)))</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init_waitqueue_func_entry(&amp;pwq-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">wait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">,&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback</strong>);</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pwq-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">whead</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;= whead;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pwq-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">base</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;= epi;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; add_wait_queue(whead, &amp;pwq-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">wait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">);</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list_add_tail(&amp;pwq-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">llink</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">, &amp;epi-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">pwqlist</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">);</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; epi-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">nwait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">++;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; }&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">else</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;{</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; epi-&gt;</span><span style="max-width: 100%; font-family: Consolas; color: rgb(0, 0, 192); box-sizing: border-box !important; word-wrap: break-word !important;">nwait</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;= -1;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; }</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_ptable_queue_proc()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的作用就是把</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构添加到文件的等待队列中，根据上面的代码可知，当等待队列被唤醒的时候，将会调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数。而</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的作用就是把</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构放置到</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构的</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">队列中。我们前面分析过，</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">就是就绪的文件队列。</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数最终会调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">wake_up_locked(&amp;ep-&gt;wq)</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">唤醒进程。简化后的代码如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">static</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback</strong>(wait_queue_t *wait,</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; text-indent: 28px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">unsigned</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;mode,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;sync,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">void</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;*key)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 13px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; font-size: 13px; font-family: Consolas; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">//&nbsp;</span><span style="max-width: 100%; font-size: 13px; font-family: 宋体; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">把</span><span style="max-width: 100%; font-size: 13px; font-family: Consolas; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; font-size: 13px; font-family: 宋体; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">添加到</span><span style="max-width: 100%; font-size: 13px; font-family: Consolas; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; font-size: 13px; font-family: 宋体; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">队列中</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">(!ep_is_linked(&amp;epi-&gt;rdllink))</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list_add_tail(&amp;epi-&gt;rdllink,&amp;ep-&gt;rdllist);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; font-size: 13px; font-family: Consolas; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">//&nbsp;</span><span style="max-width: 100%; font-size: 13px; font-family: 宋体; color: rgb(63, 127, 95); box-sizing: border-box !important; word-wrap: break-word !important;">唤醒进程</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(waitqueue_active(&amp;ep-&gt;wq))</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wake_up_locked(&amp;ep-&gt;wq);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;1;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; line-height: 24px; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ep_insert()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数最后一个操作就是调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_rbtree_insert()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">把</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构添加的</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构的红黑树中。如下图：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><img data-s="300,640" data-type="jpeg" data-ratio="0.8221797323135756" data-w="523" src="data:image/JPG;base64,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 " src="ciab8jTiab9J4dp66dWlvbUDA6RV3csVag4uAiaAQl79Td7IMYMrJDjmLWG88hzKRibyF1hvO63xIKUzTicr13Iev9g"  style="height: 430px !important; box-sizing: border-box !important; word-wrap: break-word !important; width: 523px !important;"  /><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">使用红黑树管理</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构的目的是可以根据文件句柄</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">fd</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">快速查找到对应的</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epitem</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构。红黑树是一棵平衡二叉树，时间复杂度为</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">O(logN)</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">添加文件句柄到</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">之后，就可以调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_wait()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数开始监听文件。</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll_wait()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会调用内核的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_wait()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数，而</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">sys_epoll_wait()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">最终会调用</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数，代码如下：</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">static</span></strong><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;ep_poll(</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;eventpoll *ep,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">struct</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;epoll_event __user*events,</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">int</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;maxevents,&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">long</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;timeout)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">{</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(list_empty(&amp;ep-&gt;rdllist)) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init_waitqueue_entry(&amp;wait,current);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait.flags |= WQ_FLAG_EXCLUSIVE;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __add_wait_queue(&amp;ep-&gt;wq,&amp;wait);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">for</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(;;) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_current_state(TASK_INTERRUPTIBLE);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(!list_empty(&amp;ep-&gt;rdllist)|| !jtimeout)</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">break</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(signal_pending(current)) {</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res = -EINTR;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">break</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spin_unlock_irqrestore(&amp;ep-&gt;lock, flags);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jtimeout = schedule_timeout(jtimeout);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spin_lock_irqsave(&amp;ep-&gt;lock,flags);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __remove_wait_queue(&amp;ep-&gt;wq,&amp;wait);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set_current_state(TASK_RUNNING);</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; }</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp; ...</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">if</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;(!res &amp;&amp; eavail &amp;&amp;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !(res = ep_send_events(ep, events, maxevents))&amp;&amp; jtimeout)</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">goto</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;retry;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; color: rgb(127, 0, 85); box-sizing: border-box !important; word-wrap: break-word !important;">return</span></strong><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">&nbsp;res;</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background: rgb(218, 238, 243); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">}</span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数所做的事情很简单，就是把当前进程设置为可中断睡眠状态，然后添加</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构的等待队列中，最后调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">schedule_timeout()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">让出</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">CPU</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">。这样当前进程就会进入睡眠状态，当进程醒来的时候会判断</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">eventpoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">结构的</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">队列是否为空，然后不为空就调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_send_events()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数把可读写的文件拷贝到用户态的</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">events</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">数组中。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">那么什么时候当前进程会被唤醒呢？在分析</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_insert()</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数的时候，我们提及过当文件状态发生改变时会调用</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数，而</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">ep_poll_callback()</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">函数会把就绪的文件添加到</span><span style="max-width: 100%; line-height: 21px; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">rdllist</span><span style="max-width: 100%; line-height: 21px; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">队列，并且就会把当前进程唤醒。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; line-height: 21px; font-family: 宋体; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><h2 style="max-width: 100%; color: rgb(62, 62, 62); white-space: normal; background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; font-size: 24px; color: rgb(171, 25, 66); box-sizing: border-box !important; word-wrap: break-word !important;">总结</span></h2><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">本文主要分析了</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的实现原理，可以知道，</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">并不会对所有文件进行扫描（而</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">select</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">和</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">poll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">会对所以文件进行扫描），而是使用事件的方式把就绪的文件收集起来，所以</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的效率非常高。</span></span></p><p style="max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255); text-indent: 28px; line-height: 24px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">当然本文还有一些</span><span style="max-width: 100%; font-family: Consolas; box-sizing: border-box !important; word-wrap: break-word !important;">epoll</span><span style="max-width: 100%; font-family: 宋体; box-sizing: border-box !important; word-wrap: break-word !important;">的细节并没有介绍到，例如水平触发和边缘触发等，有兴趣可以自己研究代码。</span></span></p><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">Linux内核那些事</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='http://mp.weixin.qq.com/s/8Udus40t2Srxsefart3e6g#rd' target='_blank'>
			阅读全文
		</a>
	</div>
</body>