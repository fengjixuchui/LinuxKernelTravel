<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		网络编程最佳实践
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664601911&amp;idx=1&amp;sn=ef04f5a92d5f928573cac052230bc6a8&amp;chksm=f04db4d2c73a3dc47edcd7f03f8a7dab7e7500ab166b56149748ad3dfeb59998f2f8f8871425&amp;scene=27#wechat_redirect&cpage=71' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">网络编程最佳实践</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                                                        <span class="rich_media_meta rich_media_meta_text">
                                                        张义飞
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2016-05-15</em>





                </div>

                
                
                                
                
                
                
                                                
                                <div class="rich_media_thumb_wrp" id="media">
                    
                                        
                                    </div>
                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <h3 style=""><span style="color: rgb(255, 0, 0);">socket描述符的引用机制</span></h3><p style=""><span style="font-size: 16px;">socket描述符引用机制,当父进程生成一个socket描述符然后fork一个子进程后,那么这个socket描述符的引用计数就+1了此后子进程close socket描述符只是减少引用计数并没有真正关闭描述符。如果希望真正关闭描述符需要使用shutdown函数。</span></p><p style=""><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtnRLBlrGNdUJgLqgiaIZ9gTxWqpPHJsfUSl3TzARecAF8gTfBNrWgC0iaQ"  data-ratio="0.07913669064748201" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">connect背后机制</span></h3><p style=""><span style="font-size: 16px;">客户端发起connect系统调用内核就会帮助我们建立三次握手中的最后一步,首先内核发送了一个syn的同步报文,服务器端响应这个syn报文,发送syn+ack报文给客户端，客户端接收到这个syn+ack报文后connect系统调用返回了，此时内核负责发送最后一个ack报文给服务器端。</span></p><p style=""><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtn9Tt4VHHiaeib0fqCmhL7hgbDoNPsL0HOcSqlGCiczkiaLLcKExQ8jicL3bQ"  data-ratio="0.07194244604316546" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">Ctlr+c/exit/return做了啥？</span></h3><p style=""><span style="font-size: 16px;">在客户端使用ctrl+c关闭客户端程序，或者是客户端调用了exit,或者是从main函数return背后做了啥？服务器端能否感知这些客户端退出，怎么去感这些客户端退出了? 这些都是网络编程中需要考虑的事情,其实在客户端Ctrl+c/exit/return中内核帮我们发送了一个FIN报文给服务器端了,服务器端对此报文进行了ACK响应,此时服务器处于CLOSE_WAIT状态,客户端处于FIN_WAIT_2状态，那么服务器端如何感知这一变化呢? 服务器端此时读取这个socket会返回0,返还0就表示这个socket的对端已经关闭了。那么服务器端就需要对其进行处理，最简单的莫过于close掉这个描述符,此时服务器端内核就会发送最后的那个FIN报文此时服务端处于LAST_ACK状态客户端接收到这个FIN报文后(此时由内核处理，应用程序已经终止了)，会响应一个ACK报文然后自己变成了TIME_WAIT状态了。其实服务器端还有另外一种方法可以感知客户端已经关闭了下文将会介绍：</span></p><p style=""><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtne4HAV7q63HOPTZ9JLFP48iaicwh36Uf6qyluVJmkUoVKBbgnEZPq0l6w"  data-ratio="0.07194244604316546" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">多个子进程exit,该怎么办?</span></h3><p style=""><span style="font-size: 16px;">在处理多个并发连接的时候最简单的方法莫过于使用多进程的形式，一个进程处理一个连接，连接关闭后子进程就exit，那么子进程exit后，服务器端要做些啥呢，做过linux应用编程的应该都清楚子进程exit后是需要进行状态回收的，否则就会变成僵尸进程一直占用系统的pid资源，地址空间，内存等那么如何高效并且安全的对子进程进行回收就是一个问题了,如果只有一个子进程你完全可以一个wait搞定,但是wait是阻塞的，我不应该要主进程阻塞来对子进程进行回收，这样未免太浪费了，毕竟主进程还是有其他事情要做的，此时可以使用信号来实现，子进程结束后一般会向父进程发出SIGCHLD信号，只要在主进程对这个信号进行处理并wait即可，但是如果有多个子进程同时exit，那么此时需要考虑信号是否排队，信号是否是实时的，此时对子进程进行回收的时候最好使用waitpid非阻塞进行回收。</span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtn37Wfzvv8qrcQvWUUXD6mYcc9HmDbJCNsRhPI4IeGQtr1FbMAEwaAiaw"  data-ratio="0.048561151079136694" data-w=""  /><br  /><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtnhv6iaSdxy4Pt5EIzYhNqAFI6YHw8NXTAkU3RqLVSS0xRMWNG8fEuTeg"  data-ratio="0.3183453237410072" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">系统调用执行了一半被中断了?</span></h3><p style=""><span style="font-size: 16px;">系统调用中有一些系统调用被称为慢速系统调用(调用时阻塞等待IO的系统调用一般都是慢速的),很容易被信号打断，有的系统这些系统调用打断后会自动重启的，但是有的系统则不然，为了写出可移植的程序就需要让被打断后的系统调用重新执行,如何知道系统调用被信号打断了呢?,可以通过判断系统调用的返回错误码来进行判断，当系统调用的返回错误码是EINTR</span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,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 " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtnudEtx0ujzNxDnO11CvNlxrpxZHrPjjpwhMBAwjzOLrVIiaibmpKV7tJg"  data-ratio="0.052158273381294966" data-w=""  /><br  /><img data-s="300,640" data-type="png" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAzoAAAHABAMAAACYCQDRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEXx8fHu7u7d3d35+fkzMzMAAIgAZmaIAAAAiABmAGb////bIwIPAAAAAWJLR0QKaND0VgAAEapJREFUeNrtnU1y4j4Th+cK81ZuIjFJlqn2DVycIFX/C3iRA7Bhzyq3fdUt+RMRy7awOvB7SGKw8QzwVMuNPv/8AYr5e4P/GVAc2NEM7GgGdjQDO5qBHc3AjmZgRzNzdkh+TOWg0q/1+Zi1Y50Xb4hKv9bnA7GjmTk7FWKnIFE7H50dIkLslCNmpxraab3Q4KSq9Kt+FmZjRzaVQGEDO3sxY6fN2UAR5u0YY3HdKURi7JBBzlaAVbGDom4nkq87NDgJdnYimlFzSj2OHTKEkm1/5uvZjK2cH1eu2dKv9flAC4JmYEczsKMZ2NEM7GgGdjQDO5pZYofCVr74WEr+P8BaFtjpv43S6BG4G3N2DsfuqbCzOzE7L1Vvpz50T6XunjWwswsxOx9cSd3a6Z9K3T3Y2YkZO8djzYXbsT6KHVbSb8C9iV93RrFTuxtffag7CbGzE1E7L3+ndtwGdvZnrm20hp2C/LkROhE7yKh3ZyYrOISswG2M7dIB9wM7ezDXr2AIBTuoydmLZbWghJjZFdRRawZ2NAM7moEdzcCOZmBHM7CjmSJ2LNof0ihiBz3mE1lm57D0nx9hK2PC+G3YSWKuX0GUsaSbnzRNd6BpdSFz/QqixOxEhmbTdAfsLGSRncPRHGr3e5RuVBVVMvJqrKWqrLu5jZGZDUgOV/JM2FlK9Lpzs2RzQXM0dRs7lR+xOCrZrCRkPGLOX14sT+YSdsLOUuZ6fYw5+JbSYIeMxMe4ZOMQsX7gL0lciR1j2rGNBDvpbLTjfqZZAYkdf1DueDsWsbOcZVlBxE6kZAtF2s2SDRl1KguzguPhyD2rfVbAZRWXYMOswPIXGvIbK1kBueRBnslTvclJsJPKqu87M8x+9KjJSeQONTkWU4HkAnXUmoEdzcCOZmBHM7CjGdjRDOxoZp0du+IIWM46O3R7DxmQjbmRiWO4+pOH8tD0gA+Zf5+wk5VldgwLqofFFw03n/9QtGVlWduo8eFzZSeEjvMDOzmJ1lHfip1D6FPAM7lK84AJs1TLH9jJTrR956frTogd27WwGYPYuRer7RjfGYf8AdnATm4idl7+JtrhPeQPyH3Yyc2SMdedHd/0PCjZwpZzNkr5X0EaizJqTgmkp2HoQ0iTgfH4vpOZeEb9gZocFaAWVDOwoxnY0QzsaAZ2NAM7moEdzcCOZnLYWfENlEq/799BDju0/L9FlUISW+zc7GUwpfIDd9plzLH+YirL6qivmPQyuEE7Eo6sNfxrUbSlER/7llyyTXoZDLGVxIoxXUuQpeGoRTDPBjt9LwMeUOVUcGcD7m9wNbzKhjG+1najFqn0G/8VxEu25OtOiB0eslv5zgZkrxddbgeTBjsYc53KqplYAr0dvtCTaRtMvZ1RyUZDO+1QejDHsvkKxgxjx1zZGdBed/zsILCTTIbYCQvI00927MiORUadxgY7fS8DyQr8hEX8reYqK+i+71ifP1iCnSRyzFeAmpx7gVpQzcCOZmBHM7CjGdjRDOxoBnY0U8DOa/g1pmkffsmdry+/67Vxm1fTPe152dlOw594M7TTvDotooYf8QG+E+w05uvrq/RHVJB97fBH3rhf95k3zgd/9F+vryFC2gONae08e+jczU58xQSx45S4gHE/4qD5aqRsEziQ2NLXl8RS8+x64vVsH9vs1LcO+NhhNawh3DWD2DFN48u7YQH4vGxpQbhJfetAY7wUDopg5yvEiYSOlGwSNd6OFH9N6c+oHNFRvatKtuNR1lw+1LzuclgxgW+HY/+cxktp+IIzjJ1GlPno8WXeK+98bZ48fGJ2Vs14fJDeU/WhlhnFw4oJYWf7nFCwuetO05dsfLFpTIgd2ct5m7s1XMzBztTOqpKN04Da+wh2wiNZwdzj7TQM59F9zta0sSM52ysn1WEn7FyXbDnt1P1zml7QICt4jcQO7AgZ7Rxu2anb5zSD8AmPu+tOqCZ4bXNteUoDO3nscI9qzgpq3tbtigk+QWhpOjvjugK5GEk5x9egzk4DO5GMOrW34VLamgJRYNoHpk3WGv+c17Z0e4WdEnXUctVpTFd3E+rTfPWO/xIUqnMkwXti0IKgGdjRDOxoBnY0AzuagR3NwI5mMtrBcm/ZyWiHSr+Xx2Ojnb51AHbuwMb5CobtA1T6vTweW/sV1P1dKv1eHo9lc7mP4WKtbjsUYCjoHVi8wktPaGjrWtio9Ht5PKJ2PtLs8JDeWpYkPyZNZgSWssUO/6nll//CTn422UHJdmc22OGsQPoN1L5HIZV+L4/HFjsTUJOTHdSCagZ2NAM7moEdzcCOZmBHM7CjGdjRzD523t6SnnY6lf44lHFXO9S2+qR97J1DQmuR5552unmn3cf+dpp/fuvwer7qylQ0f/7jcZfxOxe/oWEInNJPp6vQedap+fONfRtwkb/jEDglnx2Z6h12ttr5/jbv30Zu3xfeQaMQOJ2NOZ/ezm9nt5E98uh0dgdk37l95uA8nhyZl2yunvRatKXXx4h3d7uYC2+isXM2J3f1cSEkGwdv+Gp05rg6mU7O4DwrE4zT8y46ku2646RM7EyvOyeOEU4QzmKCN29yQI6d+n+qO4+nHyfYyVCyReyMgucUwiZEjpFN3E53nr8DOznsTEu2cfCEIk3s9CWbidnpzguLKsBOhqzgwlmBpATvl6ujPh04i4VBVuD3hUPX8JoKfo2F51wsbs/5CrYCO5prQan0C9id32Tn+YAdzcCOZmBHM7CjGdjRDOxoBnY0AzuayWbn+MMjsJJs9WyHHx6BlWSdj/rWI7CSfHZ4jCIvgiDjFA88VpFKv7lfT9bZwg91P2l4XfqdPQJROy9r7YRJDFwYoWjLQTQr+NhgR+4OJ3AH64ln1FvsoGTLR7xkW5NRc1ZwDMshHI81soIMxOzw9Gw56gqo9Jv79dyxJuf5OmlkB/VsmoEdzcCOZmBHM7CjGdjRDOxoZoMdS6Vf/MOzJXao9It/eGBHM1d2XmSha9hRwdQOrw+fOuaaSr/4hycSO8kt16jmvDdb7FDpF//wwI5mYEczsKOZWEaNnE0L1xl1lfp9BzU5dwe1oJqBHc3AjmZgRzOwoxnY0QzsaAZ2NDNjB984izIXO1T6BT41sKOZWC3ocL1RKv0Cn5pYv4IKdpQwFzvoO1ASlGyagR3NwI5mYEczsKOZWL+CilNq1OQoALWgmoEdzcCOZmBHM7CjGdjRDOxoJqH1zf2Yqqqecx3wsszasVVYxxjVBvuzKHbYFLsCOzFnp0LsFCQ6X0G/DgIR4bpTjuh8Bf3IRKLWCw1OQuG2E9GRiUM7spHrTR88sLMT0fadwajekLOBIkTtDEb1kpV+ObjuFGG2bRQ5W0GiOdvfmdhBUbcTM1lBf92hwUmwsxMz/Qra2CG5TVI3cG/m69mMrZwfrscp/VqfD7QgaAZ2NAM7moEdzcCOZmBHM7CjGdjRDOxoBnY0M9OvABRlpl8BKMpcCwIoSbRtFCWbEuZ6fYCSwI5mcN3RDOxoJroOArICJaCuQDOwoxnY0QzsaAZ2NAM7moEdzcCOZmBHM7Cjmaid+HqjVPq1Ph9z40ZBSWL9Cn5sG8U8rjsS7ZMziB2ZHYdM+HFqYGdHZta5tu7Gw9/86ERLGP+2K3OrkNvKDx2VUfEWoxP3JWLnZTKbBJdlZGGnALHYGc7lziWb6Uo2Y3Hd2ZO5jLqqiOcrkA3xDXZ2JNav4O9gvgLj5yoARUioybGY2qMUqGfTDOxoBnY0AzuagR3NwI5mYEczRexYfL9No4gdzMSXyDI7h03/F1c6hHnhYSeJmTrqOGNJNz9pmu6wfqc16EKSRny+gr/L7USmfKfpDthZSHxk4g07h6M51O73eORHFVUyo+tYS1VZd3MbbnVwz7G+AUKKNdhZSLxk++G6czR1GzuVb10YlWy+uY4GzXVEFHbCzlKWjep1WureDkmr3KRk4xCxfkJxWezK2zGmnTOZYCedZfMVXNlxP9OsgMSOPyh3vB2L2FnOxtiJlmxt/5BbJRsy6lQW2XHpwMHd+OJjQqnGJdgwK+Cuicb3UOQOItwPwSUPfkU/G1IF2EnlHvMVzH70qMlJ5A41OeiHkA3UUWsGdjQDO5qBHc3AjmZgRzOwo5l1duyKI2A56+zQ7T1kQDaW9ys41jdaPY359wk7WYmvg/BxO3YOph4WXzTcfP5D0ZaVxesgcPhc2Qmh4/zATk6io3pvlWyH0KeAV4i1fgYDv3Kv/IGd7MTsvPzUryDEju1a2IxB7NyLmJ0f20ZbO8Z3xiF/QDawk5t4yZZmh/eQPyD3YSc3q+z4pudByRa2nLNRyv8K0lhkh1MC6WkY+hDSZMopfN/JTKxfQTXbrwA1OfuAWlDNwI5mYEczsKMZ2NEM7GgGdjQDO5rJYWfFN1Aq/b5/Bzns0PL/FlUKSWyxc7OXwZTKD9zhuUUFjN9JZNV8BT2TXgY36Ccb57nHR3Xb4CcW9ysYM+llMMTKPLwylie0BFkajloE88zN5f4DfS8DHlDlVHBnA1kqYTq8yoYxvtZ2oxap9Bv/FWxZ4aVvKeUhu5XvbED2eorkdjBpsIMx16lE7XwstcMXejJtg6m3MyrZaGinHUoP5shjh4y5sjOgve6YCnYWkcGO2KCf7diRHax2kcgGO30vA8kK/IRFslTCNCvovu9Ynz9gHZ9EousgJMZOC2py7gVqQTUDO5qBHc3AjmZgRzOwoxnY0QzsaAZ2NAM7mtnHDqrV1rFstvAEti1kAUZE+hX8MDIxAdjJyLJxoz9xPLY9DQ4yIbJf0CUslWAsVSjgFrOh18eYg8wjXrcTihvjl0OgdprwCq0Gy8l23bm2w81sslYCtR1DwEIylmxmYseGjjoGdtaSzQ5nA5GSrVsqAXZWkM/OsfbpwCArqGy3AIIsmYSsYCHr5iuIcIjl0pPON7CzkHx1BTwa4Qo/QVgLpfw7oAf1bJqBHc3AjmZgRzOwoxnY0QzsaCajHSz3lp2Mdqj0e3k8NtoZVhBQ6ffyeGxt36n7u1T6vTweW/sV1P1dKv1eHo8tLQhcrNVthwJUQN+BDXYOvqXtEBqtETv5idp5SbNzPPrY4fCpYecORLOCj8TYMf6607VUg8xER8SjZFNCvGRLy6hdceaKtK5DAZV+L49HpF+BLPuGmhwNoBZUM7CjGdjRDOxoBnY0AzuagR3NwI5m9rHz9pb0tNOp9MehjLvaobbVJ+1j7xwSWos897TTzTvtPva30/zzW4fX81VXk8EMz8KVnepDmnc22bn4DQ1D4JR+Ol2FzrNOzX9VC+puq8ZcD7nI33EInJLPjkz1DjudnZWjer+/zfu3kdv3hXfQKAROZ2POp7fz29ltZI88Op3dAdl3bp85OI8nR/azHjzntej6urPSzru7XcyFN9HYOZuTu/q4EJKNgzd8NTpzXJ1MJ2dwnpUJxul5Fx25tvOx1o6Z2Jled04cI5wgnMUEb97kgBw79f9Udx5PP06wM7nwZLIzCp5TCJsQOUY2cTvdeWFAPez0obPazrRkGwdPKNLETl+ymZid7rywqALsbM/ZXCrgsgJJCd4vV0d9OnAWC4OswO8Lh67hNRX8GgvPuVhcbL6Czd937gTsaK4FpdIvYHd+k53nA3Y0AzuagR3NwI5mYEczsKOZu9mx3R+wmrvZocFfsJLsdt7Dloz5hJ2NxPoVLF1v9IqLlGn/faJo20isjnrl6Kqei9fyCTsbidlZFzvfl/eL+w2NCAM7VPo9/l4i/QrW2ZHWt/e2jRSxk4VIv4KVdrhPzgV2srJhjfgxbAV2MhPpV5ClZENGnYOsWcH3+4ULOIkhMv+5lJoMDG0gvg7CR86aHCr9Hn8v968FxaVnPaij1gzsaAZ2NAM7moEdzcCOZmBHMxvsWCr94h+eLbFDpV/8wwM7monOV5C4DgKVfvEPT3TsW+LIRCr94h+eLXZQv3lvov0KEDtKiPYrSBzVS6Vf/MOzpV8BlX7xD8+fG6EDOxpAzqaZDf0KUJNzd1ALqhnY0QzsaAZ2NAM7moEdzfwfKh8w8XjJyG0AAAAASUVORK5CYII= " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtnP7HfLziaBMQ6sWV6ichHtA2V6tK5fhJLCkHh2ZiaTWtocR9exdsuEqWkw"  data-ratio="0.5431654676258992" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">accept干了啥?什么时候返回?</span></h3><p style=""><span style="font-size: 16px;">我们知道accept是阻塞的，那么accept因为什么阻塞呢，背后干了啥，其实accept做的唯一一件事就是从内核的连接队列中取出一个连接然后返回这个连接对应的描述符。内核中有两个个队列，一个是客户端发送syn到服务端，服务端发送syn+ack后等待客户端的ack的这些连接叫做等待队列，还有一个连接队列就是客户端和服务器端已经完成三次握手的连接</span></p><p><img data-s="300,640" data-type="png" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAApCAMAAABdsVzdAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAApVBMVEX////x8fH5+fnQl1VVVVVVl9D5+eS2eFVVeLbk+fmX0Pnktnh4tuT55LZ4VZfQ+dCXVXi25Pn50Jf5+dCXVZfQ+fmXVVVVVZfQ5LZ4VVVVVXjQ5OTk+dB4eLbQ0Jd4VXh4trbk+eTktpe2tuTQtniX0ORVeJeXeHi2eHi2tpeXeFXQl5fQ+eTk5LaXeLbk0JeXtuR4eFV4ttC25OTStnjQl3jAl1VP/6hwAAAAAWJLR0QAiAUdSAAAA65JREFUeNrtmmtX00AQhrHbbdpsAzYpqUVFQUBAxbv//6c5M3uPB5p6jgcP+z4fSNokm3x45s3s0oMDAMrhWWACwBMHuoOCgO6gIKA7KAjoDgoCuoOCgO6gIKA7KAjoDgoCuoOCgO6gIKA7KAjoDgoCuoOCgO6gIKA7KAjoDgriyemupgH92M8C/jd26T6rvDzzhXys6a9ZJsfr5MTlpDk8er76u0fJRG2nCXW3Pra3kh1+At31cmhjP6tcbZN+nFXwHlh26+50bkX35vDF1ip44qRu3Q6faFj3l6/6et+nMDK47MVKmjSvF/72fPdE99ZZbo8ldZHWDFdociy9BBTKnumuxEbrZB7ATvdufSra7Qfrng83bErU0n9B5WUydVtfK6E0Y7qHY+G9AEpmv3Rv3kiUO92DSnyW6P62dx1z64znapHTjI3XbDOr2OH5QkpK2+FkaB6LCsule6vjo4i09AUdCo+Y695sk5qB7iDjYd1jtku+n1UnK5VlLqeyjqdSutvO3et+vrKtM+dx9y5s6DLapUtqd1ispHyfX3AFsPKZ7spWR2hmuv6yCi+drJmhburYprvIj2YGpOxKd47HEJHm6v1gGtps66D75TUdnF3fDNdEyOXOtvN+wyVB+3YOyW+M2LsH8maGNY+602tBzrGfxqU7ACN0Z2+ubm2Ofvh4nTQzZCzr6nsNMn3FEZ+nqLIBvElnmG1o93kcr/tgkjmJs2C+1fqoD/Z3/fQB3fN0h+4gYVy6f6JWmR2fZbpbIZVT7+6sYktluuqNl4Iwf+juKiLX3V6w9ody+bN0V7XJdM+bmSzdjQ6fIT4Yl+7zhVpKapLuQZ/apEZq0l1qoSXBwsKMiE0uuymu32z9PFa7c0T3ZDw/Xw19C4vNJ7lyMPenuxBWZui53aQ2ndyCUhnZu8us8s90lxi2jnndu35z3M4/229Z7GbLnQo53XxJN92dHbTrl74sNPvLt5Dxz79SY3Tq2hY6QVYfd+uu0pcCfQPdQWSH7i5xSTtpBoa6U9QvWbCadb/gSaWsq7Tar8wYXmzhK5UdIG5kqeVbZae1JL4e6u7vzgO1m9NsSvBAM2OPu3SnSkAzAyJjfjPTXt2SK81Wk+7f47+dfkSF1LRWnMNmKvl6Mu5nBH6BxeF1v2FtxdKlHVtPfq4SqbXVvQtr/Em6D3r+X/UE6Q4ij/kTsYHuAPxroDsoiCf3A2AA7ge6g4KA7qAgoDsoCOgOCgK6g4KA7qAgoDsoiN91uxpbKkqzrwAAAABJRU5ErkJggg== " src="SeWfibBcBT0Hc1NZHRVpbGbictKz1cpPtnGy30Btdaqwfp2tLzESBlONCoDiaA6Dgsd2BW4TOFkCsQ18AHQzlnDYw"  data-ratio="0.0539568345323741" data-w=""  /><br  /></p><h3 style=""><span style="color: rgb(255, 0, 0);">accept返回前连接终止是啥情况?</span></h3><p style=""><span style="font-size: 16px;">这种情形在比较繁忙的web服务器中还是出现过的，具体是怎么发生的呢?,当服务器端accept从连接队列取出一个连接之前，客户端向服务器端发送一个RST报文(撤销连接)这导致accept的时候会返回错误(因为连接被撤销了),不同的系统平台错误码不同,POSIX要求返回ECONNABORTED这个错误码。</span></p><h3 style=""><a name="t8" style="box-sizing: border-box; color: rgb(12, 137, 207);"></a><span style="color: rgb(255, 0, 0);">服务器端进程终止该怎么办?</span></h3><p style=""><span style="font-size: 16px;">这和客户端关闭socket本质上没有太大区别，都是完成了四次挥手的一半，只是这里服务端是主动端，客户端是被动端，那么此时客户端同样需要感知服务器端关闭socket了。 此时的情况就比较复杂了，有这样几种情况,如果客户端继续读这个socket那么会返回0，客户端根据返回0就可以知道服务器端已经关闭socket了，这点和客户端主动关闭时一样的，但是如果客户端继续往这个socket写数据那么会发生什么情况呢(写入是成功的)，此时服务器端会发送一个RST报文给客户端,然后客户端再次读取的时候就会返回错误，错误码是ECONNRESET(连接被重置)[这是UNP书上的解释]经过我验证发现新的内核已经不是这样的了，对于半关闭了的套接字写入第一次是成功的，无论读取多少次都是成功返回0的，但是当写入第二次后写入失败产生SIGPIPE信号。</span></p><pre style=""><code style="">recv的man文档中是这样说的:
For TCP sockets, the return value 0 means the peer has closed its half
side of the connection.
关于这个问题的一个讨论:
http://fixunix.com/unix/84635-how-do-you-get-econnreset-recv.html</code></pre><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_reward_area" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_reward_avatar">
                        <img src="" alt="" id="js_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" style="display: none;" id="js_reward_author">张义飞</div>
                                                            <p class="reward_button_wrp">
                      <span id="js_author_reward_qrcode" class="reward_pop_panel">
                        <img id="js_author_reward_qrcode_img" src="" alt="赞赏二维码">
                        <strong>微信扫一扫赞赏作者</strong>
                      </span>
                        <a class="reward_button" id='js_reward_link' href="##"><span id="js_reward_link_text">赞赏</span></a>
                    </p>
                    <div id="js_reward_inner" class="reward_area_inner" style="display:none;">
                        <p class="weui-loadmore weui-loadmore_line reward_user_tips" id="js_reward_total_parent">
                          <span class="weui-loadmore__tips">
                            <a href="javascript:;" id="js_reward_total"></a>&nbsp;<span id="js_reward_total_text">人赞赏</span>
                        </span>
                        </p>
                        
                        <div id="js_reward_list" class="reward_user_list"></div>
                        <div id="js_reward_pagination" class="simple_pagination" style="display: none;">
                          <button disabled class="btn_sp_prev js_reward_pagination_prev">上一页</button>
                          <span class="sp_page_num_area">
                            <a class="sp_page_current js_reward_pagination_curpage" href="javascript:;">1</a>&#47;<span class="sp_page_num js_reward_pagination_totalpage">3</span>
                          </span>
                          <button class="btn_sp_next js_reward_pagination_next">下一页</button>
                        </div>
                    </div>
                </div>
                                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>