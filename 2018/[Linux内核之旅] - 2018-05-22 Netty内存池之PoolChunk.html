<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		Netty内存池之PoolChunk
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzI3NzA5MzUxNA==&amp;mid=2664605396&amp;idx=1&amp;sn=589b93806d312eb67e9620715c6ce4a5&amp;chksm=f04d8b31c73a022792929ece91dd654b15d1d97b2dec5b0add67ed1eb7121372419ceb670477&amp;scene=27#wechat_redirect&cpage=20' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">Netty内存池之PoolChunk</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        作者：泮小俊
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux内核之旅</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux内核之旅</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxKernelTravel</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">Linux内核之旅</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2018-05-22</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;">netty4之后，netty中加入了内存池管理，看了netty后突然对这块很感兴趣，怎么办？最简单的方式无非看源码呗。我们顺着思路强行分析一波。分析下简单需求，为了能够简单的操作内存，必须保证每次分配到的内存时连续的。我们来看下netty的poolChunk。</p><h5 style="box-sizing: border-box;outline: 0px;margin-top: 8px;margin-bottom: 16px;font-size: 18px;color: rgb(79, 79, 79);font-weight: 700;line-height: 26px;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">PoolChunk</h5><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">该类主要负责内存块的分配与回收，我们可以从源码中给的注释差不多看清PoolChunk的数据结构与算法。先介绍两个术语：</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">page-是可以分配的内存块的最小单位<br style="box-sizing: border-box;outline: 0px;word-break: break-all;"  />chunk-是一堆page的集合<br style="box-sizing: border-box;outline: 0px;word-break: break-all;"  />下面是chunk的构造方法</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">PoolChunk(PoolArena&lt;T&gt;&nbsp;arena,&nbsp;T&nbsp;memory,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;pageSize,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;maxOrder,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;pageShifts,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;chunkSize,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;offset)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unpooled&nbsp;=&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">false</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.arena&nbsp;=&nbsp;arena;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;memory是一个容量为chunkSize的byte[](heap方式)或ByteBuffer(direct方式)</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.memory&nbsp;=&nbsp;memory;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;每个page的大小，默认为8192,8k</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.pageSize&nbsp;=&nbsp;pageSize;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;13</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.pageShifts&nbsp;=&nbsp;pageShifts;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;11层</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.maxOrder&nbsp;=&nbsp;maxOrder;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;8k&nbsp;*&nbsp;2048</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.chunkSize&nbsp;=&nbsp;chunkSize;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.offset&nbsp;=&nbsp;offset;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unusable&nbsp;=&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;(maxOrder&nbsp;+&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log2ChunkSize&nbsp;=&nbsp;log2(chunkSize);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;-8192</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpageOverflowMask&nbsp;=&nbsp;~(pageSize&nbsp;-&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeBytes&nbsp;=&nbsp;chunkSize;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">assert</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;maxOrder&nbsp;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">30</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;:&nbsp;</span><span class="string" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: blue;background-color: inherit;">"maxOrder&nbsp;should&nbsp;be&nbsp;&lt;&nbsp;30,&nbsp;but&nbsp;is:&nbsp;"</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;+&nbsp;maxOrder;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxSubpageAllocs&nbsp;=&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&lt;&lt;&nbsp;maxOrder;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;Generate&nbsp;the&nbsp;memory&nbsp;map.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryMap&nbsp;=&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">new</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">[maxSubpageAllocs&nbsp;&lt;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">];&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depthMap&nbsp;=&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">new</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">[memoryMap.length];&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;memoryMapIndex&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">for</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;d&nbsp;&lt;=&nbsp;maxOrder;&nbsp;++&nbsp;d)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;move&nbsp;down&nbsp;the&nbsp;tree&nbsp;one&nbsp;level&nbsp;at&nbsp;a&nbsp;time</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;depth&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&lt;&lt;&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">for</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;p&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;p&nbsp;&lt;&nbsp;depth;&nbsp;++&nbsp;p)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;in&nbsp;each&nbsp;level&nbsp;traverse&nbsp;left&nbsp;to&nbsp;right&nbsp;and&nbsp;set&nbsp;value&nbsp;to&nbsp;the&nbsp;depth&nbsp;of&nbsp;subtree</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryMap[memoryMapIndex]&nbsp;=&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depthMap[memoryMapIndex]&nbsp;=&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryMapIndex&nbsp;++;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpages&nbsp;=&nbsp;newSubpageArray(maxSubpageAllocs);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;} &nbsp;</span></p></li></ol><p>可能光看构造我们会摸不清头脑，我去网上挖了张图，方便大家理解。</p><p><img class="" data-ratio="0.7147826086956521" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAj8AAAGbCAIAAACkq2YFAAAAB3RJTUUH4gUUERUzFUIR1AAATBlJREFUeNrt3XdcFNfeP/CzjYWlLVVBRUWwBwgxtBR7bFcFCzExlkg0FjQay/VJrrkmXh4JqBiswUKMMRiMKKBXzVXzeGME1Kio0QgKShVYYFnq9t8fc3+TvdQFWWZn+bxf/jGemR2+58zsfvfMOTPL0Wq1BAAAgFW4TAcAAADQbsheAADAPsheAADAPsheAADAPsheAADAPvxmS499f6y4qJjp2Jjn6ekxfXow01EAAEBjzfe9kLoo2dmPmQ4BAACawW9lXXBw9+12KJXKs2fPCoVCpgMBAIBmYNwLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYB9kLAADYh890AABdYf78+ZmZmUxH0W7+/v5xcXFMRwFgjND3gm6BjamLEJKRkcF0CABGCn0v6EbYlcO8vb2ZDgHAeKHvBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBQAA7IPsBdARixYtCgsLa3YBALoAshcAALAPnnMI0BGHDx9uaQEAugD6XgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD643wu6EW9vb6ZDAIDOgb4XdAv+/v5Mh9ARSLcALUHfC7qFuLg4pkMAgM6EvhcAALAPshcAALAPshcAALAPshcAALAPshcAALAPsheYMpVKFRkZuWrVKoVCwXQsANCZkL3AlCWeSExISLhy5crMmTOvXLmi1WqZjggAOgeyF5gsqVS6b+8+ajkvL2/VqlXLli178uQJ03EBQCdA9gKTtW/fPplM9sYbb9y6devTv30qFovT0tJmz54dGRlZVVXFdHQA8EKQvcA0ZWVlJSYm8ni8devW8Xi80NmhKSkp7733nlqtTkhI+PLLL5kOEABeCLIXmCCtVrtt2zaNRjN37tx+/fpRhba2th999BG17POyD9MxAsALQfYCE3T58uWMjAw7O7vFixfrlickJBBCBg4cOHPGTKZjBIAXguwFpkYul+/YsYMQsmrVKhsbG7pcIpHs37+fELJ+/Xoej8d0mADwQpC9wNQcO3asoKBg0KBB06dP1y3fvXt3XV3d+PHj/fz8mI4RAF4UsheYlLKyMurHUDZs2KDbwXrw4MGpU6fMzMxWr17NdIwA0AmQvcCk7Nq1q76+fsKECSNGjKALNRoNNclwwYIFvXv3ZjpGAOgEyF5gOu7du5ecnCwUCht1sC5cuHDnzh0nJ6dFixYxHSMAdA5kLzARGo0mOjqaELJw4UJXV1e6vK6uLiYmhhCyes1qkUjEdJgA0DmQvcBEnDt/LjMz09nZeeHChbrlR44cKSkp8fLymjxpMtMxAkCnQfYCU1BXV7czZmfTDlZRUVF8fDw1iYPLxdkOYDrwfgZTEB8fX1pa6u3tPWniJN3yr776Si6XT5s27aWXXmI6RgDoTMhewHpFRUXffPNN0w7WrVu3zp8/b2FhsXLlSqZjBIBOhuwFrBcTE6NQKIKDg4cPH04X0rPkFy9e7OzszHSMANDJ+K2sO336NNPhAbThxo0bP/30k0gkCg8P1y0/nXz6jz/+6NWr13vvvcd0jADQ+VrLXuvWrWM6PMbI5fJdu3YxHQW0Qa1WR0VFEUKWLFni5OREl8tkstivYgkha9euFQqFTIcJAJ0PVw6BxU6fPpWVldWnT5+5c+fqlh88eLCystLPz2/MmDFMxwgABoHsBWwlk8l27dpNCPn444/NzMzo8qdPnx47dozL5a5fv57D4TAdJgAYBLIXsFVcXFxlZaW/v//o0aPpQup3KVUq1ezZswcOHMh0jABgKMhewEq5ubnff/89j8dr1MG6du3aL7/8YmNjs3z5cqZjBAADQvYCo6bRaLRabaNCrVYbHR2tVqtDQ0M9PT3pcqVSST3qcNnyZWKxmOnYAcCAkL3AqM2YMcPHxyclJVmj0dCFV69e/fXXX21tbZcuXaq7ceKJxNzcXHd399mzZjMdOAAYFrIXGLXc3FxCyKZNn82fP//u3buEEIVCsW3bNkLI8hXLdTtYlZWVe/fuJYSsX79eIBAwHTgAGBa/E/YBYDAzZsxISkqifrtr3rx5U6dOFYvFT58+HTBgwKyZs3S33LNnT011zciRI4OCgpiOGgAMDn0vMGoBAQGEEF9f32XLlgmFwtTU1KNHj1IdLD7/z+9ejx49OnnyJJ/P78632AN0K8heYNT8/PwIIb///vv777+fnJw8adIkQsiYMWMCAwPpbbRabVRUlEajmTdvnpubG9MhA0BXwJVDMGp2dnZDhgx5+PBhZmamn59fZGTk8uXLe/ToobvNpUuXbt68aW9vHxYWxnS8ANBF0PcCY0ddPLx+/Tr1Xzc3N91HFzY0NFCTOFZ9tMra2prpYAGgiyB7gbGjsldaWlqza69cuVJcXEwIqa6uViqVTAcLAF0E2QuMnY+Pj5mZ2YMHD6RV0qZr/QP8R44cSQjZvm377Nmzr1692vTuZgAwPcheYOzMzc19fX01Gs3NGzebrhXbimNjY/ft2+fu7p6bm7tixYrw8PCcnBymowYAw0L2AhagZhhmZGS0tEFQUND+/fup31a+evVqSEhIVlYW01EDgAFhziGwADVvPi0tTavV6j6Tt66u7vbt2+np6enp6brpysHBATM4AEwbshewwODBg8VicX5+fmFhoYuLy4MHDzIyMtLT02/fvq1SqahtRCKRn59fYFCgv59/v3798MteAKYN2QtYgMvlBgQEnD9/fsqUKVbWVjXVNVQ5j8d7+eWXAwICAgIChg0bhscbAnQfyF7ADkFBgefPnyeE1FTX9O/fPzAw0N/f/5VXXsEVQoDuCdkL2GHy5CnFxc9dXV38/Px79uzJdDgAwDBkL2AHgUDQ6Ne8AKA7w4x5AABgH/S9oCvMnz8/MzOT6Sia5+/vHxcXx3QUANA+6HtBVzDa1NX6TdAAYLTQ94KuY4Q5zNvbm+kQAKAj0PcCAAD2QfYCAAD2QfYCAAD2MbrspdVq9+zZM3LkyJEjRx48eJDpcAAAwBgZ3ayNU6dO3blz58SJE3K5fO3atf379x87dizTQQEAgHExuuyVkJCwdetWZ2dnQsiGDRuOHDmC7NXdNJ0HSE9WzM3NvXjx4oULF3788UfdDW7duhUVFfX06VMvL6/Nmze7uroyXQkAMCyjy155eXlubm7U8tChQx88eMB0RMCAlubWh4eHv/rqq9nZ2Y3KDx06FBER4erqeuTIkS1btuzbt4/pGgCAYRld9nJycsrPzx8wYAAhRCqVSqVSpiMCI3L27Fnq8nKj8piYGDMzM+qhHuisA3QHRjdr4y9/+UtUVFRJSYlEItm6dSt+sQn0QaUu6huPg4MD0+EAgMEZXfYKCwvz9PScM2dOaGho0GtBYrGY6YiAAb6+vq+9/tq7776bmPiDWq3W/4Xx8fHBwcFMhw8ABmd0Vw4FAsG6devWrVtHCCkvL//58s9MRwRdLS0tzdzcvL6+Pjs7e+fOnTk5uRs3btTnhUlJSY8ePdqwYQPTNQAAgzO6vhchRKVSUQuXLl967bXXmA4HuppIJOJyuZaWlj4+PlFRUSkpKfq8KvVM6tGjR7/66itcbQboDowxe+3YsaO+vv727duJPyTiKlA3pFAo6GWVSmVnZ9fmS5KSkg4dPPT111/rszEAmABjzF69evcaPXr09u3bt2zZYmtry3Q40NVWrlyZlZWlUCj++OOPTz75ZNasWa1vn3A84ciRI3FxcdRtggDQHRjduBchZO67c+e+O5fpKIAxoaGhq1evrqiocHNzmzNnTkhICL2KvpGZWqBuC4vcGsnj8SZOnEhvduvWLaYrAQCGZYzZC7q5sWPHtnTPVrN3MRvhz4YBgKEZ45VDAACA1iF7AQAA+yB7AQAA+yB7AQAA+yB7AQAA+yB7AQAA+2DGPHSdpj87CUyZP38+G+808Pf3j4uLYzoKMAroe0FX8Pf3ZzqEFnXPnMrG1EUIycjIYDoEMBboe0FXMJ7vy/fv309ISHj77be9vLyYjoV57Mph3fN7BrQE2Qu6i9LS0l27dlFPrP/9999PnDiBp9EDsBeuHILpk8vlhw4dmjZtWkpKCo/HI4Tk5uYmnkhkOi4A6DhkLzBxu3fvHj16dGxsbH19/cSJE8+cObNv3z5CyN69eysrK5mODgA6CNkLDEulUkVGRq5atUr3V7u6zP379w8cOFBbWzt48OD4+Pgvv/zS1dU1KCho5MiRNdU1e/bsYbp5AKCDkL3AsBJPJCYkJFy5cmXmzJlXrlzRarVd+df79u1rZW1FCFm8eLGvry9dvm7dOj6ff/LkyUePHjHdQgDQEcheYEBSqXTf3n3Ucl5e3qpVq5YtW/bkyZMuC8Da2nrtx2sJITt37pTL5XS5m5vbvHnzNBpNVFRUFydUAOgUyF5gQPv27ZPJZG+88catW7c+/dunYrE4LS1t9uzZkZGRVVVVXRPD9OnTBw0alJ+ff+zYMd3ysLAwBweHmzdvXrx4kel2AoB2Q/YCQ8nKykpMTOTxeOvWrePxeKGzQ1NSUt577z21Wp2QkPDll192TRg8Hm/Dhg3UPWdlZWV0ubW19cpVKwkhMTExDQ0NTLcWALQPshcYhFar3bZtm0ajmTt3br9+/ahCW1vbjz76iFr2edmny4IZMWLEhAkT6uvrd+3apVs+fdr0IUOGFBYWfvfdd0w3GAC0D7IXGMTly5czMjLs7OwWL16sW56QkEAIGThw4MwZM7syntWrVwuFwuTk5Hv37tGFXC6X6pYdOHCgtLSU6TZjt0WLFoWFhTW7AGAIyF7Q+eRy+Y4dOwghq1atsrGxocslEsn+/fsJIevXr6fuGu4yrq6uCxcuJIRER0drNBq63NfXd9KkSQ0NDbGxsUw3GwC0A54UBZ3v2LFjBQUFgwYNmj59um757t276+rqxo8f7+fn1/VRLVy48NSpU5mZmefOn5syeQpd/tFHH12+fDk1NXX27Nl4kl6HHT58uKUFAENA3ws6WVlZGfVM3g0bNuh2sB48eHDq1CkzM7PVq1czEphIJFrz8RpCSMyOmLq6OrrcxcVl0aJFTbtlAGDMkL2gk+3atau+vn7ChAkjRoygCzUaDTXJcMGCBb1792YqtokTJvr4+JSVlTXqFixYsKBnz5737t07+8+zDDcfAOgH2Qs6071795KTk4VCYaMO1oULF+7cuePk5ET1cphCT9M4cuRIYWEhXW5hYbFmzRpCyM6YnbW1tUy2IADoB9kLOo1Go4mOjqZGmFxdXenyurq6mJgYQsjqNatFIhGzQQ4bNiwkJEShUFAh0SZMmODr6yuRSDBaA8AKyF7Qac6dP5eZmens7EzN7qMdOXKkpKTEy8tr8qTJTMdICCHh4eEikehf//rXjRs36EIOh7N+/Xoq2vz8fKZjBIA2IHtB56irq9sZs7NpB6uoqCg+Pp6axMHlGsX55ujouGTJEkJIVFSUWq2my4cOHTpjxgylUrlz506mYwSANhjFpwmYgPj4+NLSUm9v70kTJ+mWf/XVV3K5fNq0aS+99BLTMf5p7ty5ffr0ycrKOn36lG55eHi4paXlxYsXMzIymI4RAFqD+72gExQVFX3zzTdNO1i3bt06f/68hYXFypUrmY7xv5iZma1du3b16tWxsbvGj3+LvqXawcHhww8/3LFjR3R09A8//NDFt1R3PdzfBuyFvhd0gpiYGIVCERwcPHz4cLqQniW/ePFiZ2dnpmNsbNSoUQEBAVKplLo7jfbOO++4ubllZ2efTDrJdIwG5O/vz3QIHYF0CzROsz9utG3bNqYDMwpCodDYOg1G6MaNGx988IFIJEpJSXFycqLLk04lfb758169ep06dUooFDIdZjMeP34cGhpKCPnxxx/d3d3p8itXrqxatUosFqekpNja2jIdJgA0o7Urh+vWrWM6PMbI5fJGzyOHZqnV6qioKELIkiVLdFOXTCaL/SqWELJ27VrjTF2EEA8Pj9DQ0ISEhG3btu3Zs4fD4VDlb775ZlBQ0LVr177++mvq/jAAMDa4cggv5PTpU1lZWX369Jk7d65u+cGDBysrK/38/MaMGcN0jK1Zumypra3tr7/++ssvv9CF1Ox5Ho93/PjxZn8JWvdBUwDACGQv6DiZTLZr125CyMcff2xmZkaXP3369NixY1wud/369XSHxjiJbcXh4Suoq+UKhYIud3d3nzNnjlqtjo6O1r26npeXN3Xq1MDAwJs3bzIdO0C3huwFHRcXF1dZWenv7z969Gi6kPpdSpVKNXv27IEDBzIdY9tmzJjp4eHx7Nmz4z8c1y3/8MMPxWJxWlrav//9b0JIdXX1zp07Q0JC8vLyCCF4oBQAs5C9oINyc3O///57Ho/XqIN17dq1X375xcbGZvny5UzHqBc+n089ZWP/vv0VFRV0ua2t7YoVy6lnzycm/jBt2rT4+HiVSkWt9fX1ZTpwgG4N2QvaoNFomk5M1Wq10dHRarU6NDTU09OTLlcqldSjDpctXyYWi5mOXV8BAQFjx46tra3dvXu3bvmMGTM9PT3z8/MjIv63oqJixIgR1BxUHx8fa2trpqMG6NaQvaANM2bM8PHxSUlJ1v3tq6tXr/7666+2trZLly7V3TjxRGJubq67u/vsWbOZDrx91qxZIxAITp48+fDhQ7qQz+dTcw5dXFy2b99+8ODBqqoqKtsxHS9Ad4fsBW3Izc0lhGza9Nn8+fPv3r1LCFEoFNQdgctXLNftYFVWVu7du5cQsn79eoFAwHTg7dOnT5958+ZR1wl1+5p+fn6pqanJycnjxo3jcDhpaWnsvdUXwJQge0EbZsyYQS3cu3dv3rx5f/vb32JjY58+fTpgwIBZM2fpbrlnz56a6pqRI0cGBQUxHXVHhIWFOTg4/Pbbbz/99JNuuZubG3XLmkQiyc7OtrCw0H2kCAAwAtkL2kBdJfP19V22bJlQKExNTT169CjVweLz/7zb/dGjRydPnuTz+ey9yT0vL6+8vJwQ8v333ze7Qcb1DKo3pnt7AAAwAtkL2uDn50cI+f33399///3k5ORJkyYRQsaMGRMYGEhvo9Vqo6KiNBrNvHnz3NzcmA653crLyzdv3vzOO+8QQuzt7d9///1mN7uecZ0Q4h+Ay4YAzMMz5qENdnZ2Q4YMefjwYWZmpp+fX2Rk5PLly3v06KG7zaVLl27evGlvbx8WFsZ0vO2jUCiOHj166NCh2tpagUCwYMGCRYsWWVpaNt1Sq9Veu3aNEBLgjykbAMxD9oK2BQQEPHz48Pr161Q/rFHvqqGhgZrEseqjVaybR75mzZqrV69SyxEREePHj2/pJzRzc3NLS0sdHR11n+cLAEzBlUNoGzX0RU23a+rKlSvFxcXU0yiUSiXTwbZPnz596OUNGzaMGjVqw4YNSUlJBQUFje5yowa9goKCjPzZVwDdBPpe0DYfHx8zM7MHDx5Iq6Ri28b3IPsH+I8cOfLKlSvbt21POpm0bt261157jS0f8Rs3blyxYsVvv/2Wnp6elpb29OnTCxcuXLhwgRDSu3fvwMBAf3//V/1eFduK066lEUICAnHZEMAoIHtB28zNzX19fdPT02/euDlu3LhGa8W24tjY2GvXrkVHR+fk5KxYseL1119fu3YtW66wWVtbjxo1atSoUYSQ4uLiGzeup6Wlp6WlFRQUnDhx4sSJE4SQgQMHZmVlEUL8XvVjOl4AILhyCPqiZhhmZGS0tEFQUND+/fupG6GuXr0aEhJCfdyzi4uLy7Rp07du3Xr58uUffvjh448/DgoKEgqFVF08PDx0f8MMABiEvhfohZqvkZaWptVqda8K1tXV3b59Oz09PT09XTddOTg4sG4Ghy4ulzt48ODBgwcvWLCgoaEhMzPz7t27VCMAgDFA9gK9DB48WCwW5+fnFxYWuri4PHjwICMjIz09/fbt2/Rj10UikZ+fX2BQoL+ff79+/dgy9NUmc3Nzf39/PB0KwKgge4FeuFxuQEDA+fPnp0yZYmVtVVNdQ5XzeLyXX345ICAgICBg2LBhrHu8IQCwFLIX6CsoKPD8+fOEkJrqmv79+1Pz8V555RVWXyEEAJZC9gJ9TZ48pbj4uauri5+ff8+ePZkOBwC6NWQv0JdAIGj0a14AAExB9jIF8+fPz8zMZDqKdvD394+Li2M2BnY1mjG0GIBRwf1epoBFn8KUVu4b6zLsajRjaDEAo4K+l+lgy8ext7c30yH8iRWNZlQtxhR29ZVp6DQbDvpeAMACbExd6DQbFPpeAMAa7Mph6DQbFPpeAADAPsaSvXJzcw8cODBr1qxG5ampKW+99dYbb7yxf/9+pmMEAABjYSxXDj/44IMhQ4ZkZ2frFj548CAu7sDBgweFQuHSpUuHDBkycuRIpiMFAADmGUv2unTpUtPLxElJSe8vep/6HfoPFn9w9uxZZC8AADCiK4fNunPnziu+r1DLXi95PXz4kOmITERL12kTjieMHTs2KCgoJiZGq9XS5bdu3ZozZ05AQMCSJUuKiooaveqLL74w+dHpTmkx7yaYrhYAixl19ioqKurRowe17OTkVFpaynREJiI8PLywsLDRddr09PTEHxK//fbblJSUjIyMM2dS6VWHDh2KiIj4+eeffX19t2zZovuq5OTTEomEyzXqE8l4WizzvzFdLQAWM+oPnYaGBqFQSC2bmZkplUqmIzIRZ8+e3bx5c6PCpKSkZcuW9erVy9HRcenSpf/85zl6VUxMzIABAywsLObPn3/nzh26/NGjRwcPHvr88881Gg3TdWJHiwFAZzHq7MXn8+mMpVKp6EwGhnD37l0fHx9qefjw4bo/lGxmZkYtSKVSBwcHalkmk23cuDEiIsLOzo7p2JnR3hYDgE5kLLM2muXk5CSRSFxdXQkhEonExcWF6YhMmUQisbe3p5bFYrFUKm26TXx8fHBwMCFEq9Vu2rQp9O1QLy8vpgNnTLtajOLr62shsujr1jc4ePrMmbN4PB7TlQBgK6POXkOHDs3MzKSy153MOy+//DLTEZkyjUZDXwDUaDRNh7KSkpIePXq0YcMGQsjhw4ctLCzemfMO01EzqV0tRghJS0szNzevr6/Pzs7euXNnTk7uxo0bma5E97Vo0SIOh3Po0KGmC0yHBnox6iuH06ZNi4uLKy4ufv78+aGDh2bOnMl0RKbM1tZWJpNRy02vd6WeST169OhXX30lEAgIIXv27Dl37pzu3LluOIOuXS1GCBGJRFwu19LS0sfHJyoqKiUlhekaALCYsfS96M8+aoGajvXGG29kZWWFhoaam5uvWrVy6NChTIdpygYNGnTnzp1x48ZR7T98+HB6VVJS0rfffhsXF0cPcd26dUv3td7e3t1wBl27WowQolAo6PEwlUrVbccLjcThw4dbWgBWMJbs1dJnX1hYWFhYGNPRdQtTp03du3fvwIEDuVzu/v376etdCccTjiccP3DggLOzM9MxGpf2ttjKlSvXrl3br1+/nJycyMjIpnePAYD+jCV7QVdqtqc7ZfKU3Jzcd959x1xo/uGHS/z9/altIrdG8ni8iRMn0i9v1PHqDjqlxUJDQ1evXl1RUeHm5jZnzpyQkBCmqwXAYshe3VFLPd3w8PDw8HA9N27vNqzWKS02duzYsWPHMl0VABNh1LM2AAAAmoXsBQAA7IPsBQAA7IPsBQAA7INZGwDAGt3wpnhoCbKX6cAbuwPQaGzh7++fkZHBdBTthhPMcJC9TAHr3tjG8JZmV6MZQ4sxKy4ujukQwLgge5kCvLE7AI0GwGqYtQEAAOyD7AUAAOyD7AUAAOyD7GVqVCpVZGTkqlWrFAoF07GYuK5p6vv373/66ad3795luroAxgXZy9QknkhMSEi4cuXKzJkzr1y5otVqmY7IZBm6qUtLSzdt2jR37twzZ8589tlnSqWS6RoDGBFkL5MilUr37d1HLefl5a1atWrZsmVPnjxhOi4TZNCmlsvlhw4dmjZtWkpKCo/HI4Tk5uYmnkhkutIARgTZy6Ts27dPJpO98cYbt27d+vRvn4rF4rS0tNmzZ0dGRlZVVTEdnUkxXFPv3r179OjRsbGx9fX1EydOPHPmzL59+wghe/furaysZLreAMYC2ct0ZGVlJSYm8ni8devW8Xi80NmhKSkp7733nlqtTkhI+PLLLw33p7vb2Izhmvr+/fsHDhyora0dPHhwfHz8l19+6erqGhQUNHLkyJrqmj179jBddQBjgexlIrRa7bZt2zQazdy5c/v160cV2trafvTRR9Syz8s+hvi73XBsxqBN3bdvXytrK0LI4sWLfX196fJ169bx+fyTJ08+evSI6QYAMArIXibi8uXLGRkZdnZ2ixcv1i1PSEgghAwcOHDmjJmd+xe77diMQZva2tp67cdrCSE7d+6Uy+V0uZub27x58zQaTVRUFGbiACB7mQi5XL5jxw5CyKpVq2xsbOhyiUSyf/9+Qsj69eupBNNZuu3YTBc09fTp0wcNGpSfn3/s2DHd8rCwMAcHh5s3b168eJHpZgBgHrKXKTh27FhBQcGgQYOmT5+uW7579+66urrx48f7+fl14p/rzmMzXdDUPB5vw4YN1JMYy8rK6HJra+uVq1YSQmJiYhoaGphuCQCGIXuxXllZGfXA2Q0bNuh+63/w4MGpU6fMzMxWr17duX+x247NdFlTjxgxYsKECfX19bt27dItnz5t+pAhQwoLC7/77jumGwOAYcherLdr1676+voJEyaMGDGCLtRoNNTMtwULFvTu3btz/2K3HZvpyqZevXq1UChMTk6+d+8eXcjlcqlu2YEDB0pLS5luDwAmIXux271795KTk4VCYaNv/RcuXLhz546Tk9OiRYsM8Xe74dhMFze1q6vrwoULCSHR0dEajYYu9/X1nTRpUkNDQ2xsLNNNAsAkZC8W02g00dHRhJCFCxe6urrS5XV1dTExMYSQ1WtWi0QiQ/zp7jY2w0hTL1y40NnZOTMz89z5c7rlH330kVAoTE1NzczMZLphABiD7MVi586fy8zMdHZ2pr6k044cOVJSUuLl5TV50mTD/fVuNTbDSFOLRKI1H68hhMTsiKmrq6PLXVxcqH5eo24ZQLeC7MVWdXV1O2N2Nv3WX1RUFB8fT80s4HINe3y7ydgMg009ccJEHx+fsrKyw4cP65YvWLCgZ8+e9+7dO/vPs0w3DwAzkL3YKj4+vrS01Nvbe9LESbrlX331lVwunzZt2ksvvWToGLrJ2AyDTU1/FThy5EhhYSFdbmFhsWbNGkLIzpidtbW1TLcQAAOQvVipqKjom2++afqt/9atW+fPn7ewsFi5cmXXRGLyYzOMN/WwYcNCQkIUCgU1wEabMGGCr6+vRCJp1C0D6CaQvVgpJiZGoVAEBwcPHz6cLqSnbi9evNjZ2blrIjH5sRljaOrw8HCRSPSvf/3rxo0bdCGHw1m/fj3VLcvPz2e6nQC6Gr+Vddu2bWM6PGjGjRs3fvrpJ5FIFB4erlt+Ovn0H3/80atXr/fee68r45k4YeIPx3+4c+fO4cOHdUNasGDBqVOnqLGZqX+ZynSzdYSRNLWjo+OSJUt27twZFRV1/Phx+kbpoUOHzpgxIykpaefOndu3b2e6tQC6lrY50dHR0dHR2m6soaEhOjo6NjaW6UAaU6lUs2bN8vLyOnz4sG55VVXVyJEjvby8Ll682PVR3b9/38vLa8SIEQUFBbrl586d8/LyGjNmTE1NDdMt125G1dRyuXzKlCleXl4//nhCt1wikQQGBnp5eaWnpzPdYABdClcOWeb06VNZWVl9+vSZO3eubvnBgwcrKyv9/PzGjBnT9VGZ5NiMUTW1mZnZ2rVrCSGxsbtkMhld7uDg8OGHH1JXaNVqNdNtBtB1kL3YRCaT7dq1mxDy8ccfm5mZ0eVPnz49duwYl8tdv349h8NhJDYTG5sxwqYeNWpUQECAVCqlnrVIe+edd9zc3LKzs08mnWS62QC6DrIXm8TFxVVWVvr7+48ePZoupH4sUaVSzZ49e+DAgUzFRo3NEEKioqJ0OwHU2IxSqdy5cyfT7dcORtjU1FcBHo/3/fff5+Tk0OVmZmbr1q0jhOzZvaeqqorplgPoIsherJGbm/v999/zeLxG3/qvXbv2yy+/2NjYLF++nNkI586d26dPn6ysrNOnT+mWh4eHW1paXrx4MSMjg9kI9WS0Te3h4REaGqpWq7dt26b7HOQ333wzKChIKpV+/fXXTDceQBdB9jI6Go2m6QPaqak0arU6NDTU09OTLlcqldTz95YtXyYWi5mNnHVjM2xs6qXLltra2v7666+//PILXUh3y44fP/7kyZOmr9K9mQHANCB7GZ0ZM2b4+PikpCTr3iZ19erVX3/91dbWdunSpbobJ55IzM3NdXd3nz1rNtOBE9aNzbCxqcW24vDwFdQNLQqFgi53d3efM2eOWq2mZgvT5Xl5eVOnTg0MDLx58yaDYQN0OmQvo5Obm0sI2bTps/nz59+9e5cQolAoqHvvlq9Yrvutv7Kycu/evdSv0QsEAqYDJ6wbm2FpU8+YMdPDw+PZs2fHfziuW/7hhx+KxeK0tLR///vfhJDq6uqdO3eGhITk5eURQvBAKTAxyF5GZ8aMGdTCvXv35s2b97e//S02Nvbp06cDBgyYNXOW7pZ79uypqa4ZOXJkUFAQ01H/iUVjMyxtaj6fT83k3L9vf0VFBV1ua2u7YsVy6gptYuIP06ZNi4+PV6lU1FrdX8EGMAHIXkYnICCA+qxZtmwZ9ajAo0ePUt/6+fw/n43y6NGjkydP8vl8qk9jVNgyNsPepg4ICBg7dmxtbe3u3bt1y2fMmOnp6Zmfnx8R8b8VFRUjRoygHsPo4+NjbW3NdNQAnQnZy+j4+fkRQn7//ff3338/OTl50qRJhJAxY8YEBgbS22i12qioKI1GM2/ePDc3N6ZDbowtYzOsbuo1a9YIBIKTJ08+fPiQLuTz+dQz6V1cXLZv337w4EHqOi2VpwFMCbKX0bGzsxsyZIhcLs/MzHRxcYmMjExNTY2MjNTd5tKlSzdv3rS3tw8LC2M63uaxYmyG1U3dp0+fefPmUdcJdb8K+Pn5paamJicnjxs3jsPhpKWlEUL8/f2ZjhegkyF7GSPqm/L169ep/7q5uQmFQnptQ0MDNbNg1UerjPZyEFvGZljd1GFhYQ4ODr/99ttPP/2kW07XQiKRZGdnW1hY6D4gH8A0IHsZI+ojlfrW3NSVK1eKi4upjotSqWQ62NZqYfxjM6xu6ry8vPLyckLI999/3+wGGdczqN6Y7sOuAEwDspcx8vHxMTMze/DggbRK2nStf4D/yJEjCSHbt22fPXv21atXm95yaySMf2yGpU1dXl6+efPmd955hxBib2///vvvN7vZ9YzrVC2Yjheg8yF7GSNzc3NfX1+NRnPzRjOzGMS24tjY2H379rm7u+fm5q5YsSI8PFz35irjYfxjM6xraoVCcejQoalTp546dUogEHzwwQdnzpwZNWpU0y21Wu21a9cIIQH+mLIBJgjZy0hR095aeTBgUFDQ/v37qfGMq1evhoSEZGVlMR11M4x/bIZdTb1mzZrY2FhqektERMSKFSssLS2b3TI3N7e0tNTR0dHd3Z2paAEMh98J+wADoCZzp6WlabVa3QfF1tXV3b59Oz09PT09Xfcz1MHBwQinFTQam5kwYULTDRgfm2FXU/fp04de3rBhg62tbUBAQEBAgJ+fX69evXTjpxo2KCiIqR/NATAoZC8jNXjwYLFYnJ+fX1hY6OLi8uDBg4yMjPT09Nu3b9Mz9EQikZ+fX2BQoL+ff79+/YztQ6q8vHzXrl2nTp0y8rEZdjX1xo0bV6xY8dtvv6Wnp6elpT19+vTChQsXLlwghPTu3TswMNDf3/9Vv1fFtuK0a2mEkIBAXDYE04TsZaS4XG5AQMD58+enTJliZW1VU11DlfN4vJdffpn6uj1s2DDGn7nXLIVCcfTo0UOHDtXW1goEggULFixatKjZC1zGMDbDuqa2trYeNWoUNdZVXFx848b1tLT0tLS0goKCEydOnDhxghAycOBAqr/o96of0/ECGASyl/EKCgo8f/48IaSmuqZ///7U1+pXXnnFOK8Q6lqzZs3Vq1ep5YiIiPHjx3O5zY+wGsnYDHub2sXFZdq06dOmTddoNFlZWVSv8bfffqNSl4eHh5OTE9MxAhgEspfxmjx5SnHxc1dXFz8//549ezIdTjuwbmyGvU1N43K5gwcPHjx48IIFCxoaGjIzM+/evUsN6QGYJGQv4yUQCBr9xBRbsG5shr1N3Sxzc3N/f388HQpMG7IXGATGZgDAoJC9wOAwNgMAnQ7ZC7oOxmYAoLMgewEzMDYDAC8CT4oCAAD2QfYCAAD2QfYCAAD2MZZxr9zc3IsXL164cOHHH3/Up9yozJ8/PzMzk+ko2sHf3z8uLs4EgjeZKjRiejXqFN2zWbpnrfVhLNnrgw8+GDJkSHZ2tp7lRoVd51ajXwNhdfAmUwWTr1Gn6J7N0j1rrQ9jyV6XLl0ihHh7e+tZboTYcpI125isDt5kqmDyNeoU3bNZumetW4dxLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwbcunVrzpw5AQEBS5YsKSoqossTjieMHTs2KCgoJiZGq9U2etUXX3yhOxu1srLys88+GzNmzGuvv/bRRx/p7sf4g1coFDt27Bg3btybb765a9euptsbTxW8m9CzymysUW5u7oEDB2bNmsVgXaBTNHrHtXRwW3ontnKSGA9jyV50AzVqqZbKWe3QoUMRERE///yzr6/vli1bqML09PTEHxK//fbblJSUjIyMM2dSdV+SnHxaIpFwuX8er08++cTR0fHUqVM/XfjppZde2rhxI4uC37t3b0lJCfUzlffv3z91+pQxt3/mf9Onyl2sU2pECAkPDy8sLDTyhwNAm5q+41o6uK28E1s6SYyItjnR0dHR0dHabqyhoSE6Ojo2Nlafjb28vLy8vPTfuVwupxZqa2sDAgKo5fXr11+4cIFa/vnnn5cuXUpv/8cff/zlL3+pqKjQ/SsBAQG1tbXUskwme/311/X8642iZST4cePGVVRUUMvPnj1buHBhx4Lvgiq0tOdWqtyBKhhDjXT/uv5/ugPRdliX/SGjira9+2n2Hae7N93/tvRO7HDkXXmMjKXv1a2YmZlRC1Kp1MHBgVq+e/euj48PtTx8+HDqd4cJITKZbOPGjREREXZ2dro7GTNmzJEjR7RabWVlZURExLvvvsui4BUKBb1sb2+flZ1ltO3fkvZub/w16m4WLVoUFhbW7AJ7tfSOawmz78QXhOzFpPj4+ODgYGpZIpHY29tTy2KxWCqVUj3jTZs2hb4d6uXl1ei1f//738vLy6dMmRIcHDx69Ohly5axKPjRo0dHRUVVVFRIpdJt27bJG+QMtL4eVaD4+vq+9vpr7777bmLiD2q1us3tGfQiNQK2a+Ud15JW3onGf5IYy3MOu6GkpKRHjx5t2LCB+q9Go9FoNPQydc368OHDFhYW78x5p+nLHz169H//93/BwcE1NTVxcXGenp7u7u5sCX7t2rXbtm0LCQnh8XhhH4RZWVkZZ/sTQtLS0szNzevr67Ozs3fu3JmTk0sNMba0PYNesEbdzeHDh1taYKlW3nEtaemdyIqTBNmLGalnUo8ePXr48GGBQECV2NraymQyR0dH3es/e/bsUavV586do1/o7e1NjaBu3bp106ZNI0eOJIRcuHDhs88+++6779gSvLW19eeff04VlpeXp6Z09ZQHPatACBGJRIQQS0tLHx+fqKio4OBg6m3c0vZMefEaAdu18o5rSUvvRFacJMx/YeyGkpKSDh089PXXX+temx40aNCdO3eo5czMzOHDh1MzoRtN+6HPxZycnFdffZVafv3113NyclgUvK5Lly8FBAQYZ/s3GhhQqVT0S1ranhGdUiNgOz3fcS3RfSey4iRB9upqCccTjhw5EhcX5+zsrFs+ddrUvXv35uXlFRQU7N+/f/bs2a3vx9fXNzY2Vlollclk+/fvDwoKYlHwhJCioiKVSnX79u2j3x59++23uyD4jlVh5cqVWVlZCoXijz/++OSTT+jbZTpQZSOvEXRPzb4TWXGS4MphV4vcGsnj8SZOnEiX3Lp1ixAyZfKU3Jzcd959x1xo/uGHS/z9/Vvfz+bNm7du3Tp50mQLC4s33njjb5v+xqLgCSGLFy8uKSnx8PD4/PPPXVxcuiD4jlUhNDR09erVFRUVbm5uc+bMCQkJoco7UGUjr5HujzNRC0Z6lw90SEsHt9l3YisnifHgNPuMgG3bthFC1q1bx3R4jJHL5bt27RIKhStXrmxzY3a91RtFy+rgTaYKHdjGeHRZtN2zWbpnrfWBK4cAAMA+yF4AAMA+yF4AAMA+yF4AAMA+yF4AAMA+mDHfaVj9Ay6sDt5kqmDyNeoU3bNZumetW4e+Vydg8F6fjtF9J7A6eJOpgsnXqFN0z2bpnrXWB+73al677vcCAIAuhr4XAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwD7IXAACwT2u/Tkn9TgoAAICxab7v5ebWh+nAjALaAQDAODX/65QAAADGDONeAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPsheAADAPi0+Y16j0Zw5k5qaeubx48cVFRVMxwkAAN2Io6PjgAEDZs6c+dZbb3E4nKYbNP+UXo1Gs3bt2suXLzMdPwAAdGvTpk374osvmiaw5vteZ86kXr58edCgQZ988omnp6elpSXT8QMAQHeh1Wpra2sfPnwYERGRkpIyevToMWPGNNqm+XGv1NQzhJBPPvnEx8cHqQsAALoSh8OxsrJ69dVXN2zYQAj55z//2XSb5rPX48ePCSGenp5MVwEAALovDw8PQkh2dnbTVc1nL2qaBnpdAADAIAsLCzolNYIZ8wAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD7IXgAAwD58pgMwKfPnz8/MzGQ6io5477331q9fb0q1MKWKmFhd9MTeKusSCoVHjx4dNGhQ96nyC9L/hEHfqzOx98z77rvvTKwWplQRE6uLnthbZV1yufzHH3/sVlV+QfqfMOh7dT52nYI5OTkhISEDBw40yVqYUkVMrC56YleVG9m6devx48eHDBnSfar8Itp7wqDvBQAA7IPsBQAA7IPsBQAA7IPsBQAA7MPkrI0nT57Ex8enp6dLpVJbW9uXX35527Zt3t7ehJCUlJS+fft2yl+hdnjl31fEtmIGKwsAAJ2Isb7XxYsX58yZk5qaWlZWplQqJRLJv/71L6ZbwxQkHE8YO3ZsUFBQTEyMVqtlOpwOys3NPXDgwKxZs5gO5EXdunVrzpw5AQEBS5YsKSoqYjqcjktPTw8ODg4MDFyyZElOTg7T4XQRb29vb2/vK1euNCpkOi4DaumMbf2D5YsvvtBtFu//Nm7cOEOEykz2evbs2SeffKJQKEJCQk6dOpWenp6YmDh+/HhGgjEl6enpiT8kfvvttykpKRkZGWfOpDIdUQeFh4cXFhZmZ2czHciLOnToUERExM8//+zr67tlyxamw+m4kydP7tu379KlS2+OfPOvf/0r0+F0qa1bt9bV1TEdRRdp9oxt/YMlOfm0RCLhcv/MJpk6vvvuOwN9DWUme3377bdyuTwkJGTz5s3u7u4WFhaDBg3atm0bvUF5efmyZcsCAwM/+OADOv9TaZzeRve/1HJ+fv7ChQsDAgJ0X0WrqqoaM2aMt7f3t0e/ZaTWXSApKWnZsmW9evVydHRcunTpP/95jumIOujs2bObN29mOopOEBMTM2DAAAsLi/nz59+5c4fpcDouIiLCxcVFJBLNCJlRWFjIdDhdhM/njxkzpri4ePfu3UzH0kWaPWNb+WB59OjRwYOHPv/8c41G0+wOjx8/PmPGDEOEykz2SktLI4TMmzevpQ0+//zza9eu1dXV3bhxY8eOHXruds2aNbdv366vr2/2VTExMeXl5X5+fu/NfY+RWtO8vb2vX78eHBz82uuvffLJJzU1NfSqpKSkiRMnTpgw4dq1a1SJRqPZv3//hAkTRo4cefyH43TCVigU//jHP958880PPvigrKyMKrx7966Pjw+1PHz48KysLDbWwmQOByHEzMyMWpBKpQ4ODuytC1URqVR66NCh6dOnM3Kkur7WKpXqs88+c3R0PH78+P3795muqMHr29IZ29IHi0wm27hxY0REhJ2dXbOhFhcXq1QqZ2dnQ7QDM9mrtLSUENKrV6+WNhg/fnxaWtrf//53Qshvv/2m525HjRqVlpb26aefUFdvdVfdvHHz1KlTVtZWW7Zs0e3hMuXkyZP79+8/k3pGqVTu2bOHLn/8+PGxY8c2bty4fft2qiTxROKNGzcOHz6cnJJ8/96f759vvvmmtrb27NmzgYGBsbGxVKFEIrG3t6eWxWKxVCplYy1M5nDoio+PDw4OZnVdvL29R44ceePGjfDw8K4+QszV2s7OLiIiQqvVfvHFF2q1mumKGry+NN0zttkPFq1Wu2nTptC3Q728vFqKMyEhwUAdL0JF0JSXl5eXl5fWYIJeC/Ly8nr27FlLf7qurk6r1crlct1IGkXVdBX1qoaGhqarxo4d6+XllXQqyXCV0r/dvLy8iouLqeXCwsK33nqLXqVSqbKzs8+fP//KK69QJbNmzXr06BG1LJVK6f1PmzatqKhIq9VWV1ePHTuWKnz55Zflcjm1LJfLR4wY0WYwT5488fLymjVrlvHUQvdP6NnyTWthVBU5efLkvHnzFApFxypiJHXRaDTPnz//n//5n08//bTDB0V/+n8KGa7W9NqvvvrKy8srPj6+Xafl//7v/3p5eZ08ebJzq9z1Z2yzHywHDx7861//qhtVo53U1NTMnTtXo9HoWf1mTxiZTObl5fX666833Z6ZGfNDhwy9fv36jz/++PHHHze7gYWFhW4flsLlcjUajUKhMDMzk8vlLb1KKBQ2XdWjR4+ysrKbN26GBIcwUmVdPB6vZ8+e1LKDgwPdQ7p06dLWrVvd3Nz69eunVCqpwry8vH79+lHLtra29E6Ki4snTpxI75DeQCaTOTo6dsGlKsPVwmQOByX1TOrRo0cPHz4sEAhYXRcOh9OjR4/169dPmTKlS48Qo7WmLF++/ObNm/v27TOGyWVdf8Y2+8GyZ88etVp97tyfY2De3t66D2k8nXx60uRJHA7HQO3ATPYKmRFy/fr17777jsfjzZw508HBIScn5+DBgzExMa28yt7eXiKRnDlzZvLkye19cPXmzZvnzJlz5syZcePGjR49mpFa09RqtUwms7GxoW56c3Nzo8q3bt168ODBfv36VVdXnzx5kiq0tbV9/vw5tY3uVBQnJ6ejR49S3Xn6TB00aNCdO3eo+amZmZnDhw9nYy1M5nBQ4xDffvttXFxcSwMDbKmLUqmkPss4HI6lpSUjR6rra03j8/mRkZGzQ2dHREQ0+lZtYvVt9oxt9oOl0ehMo9Sl0WiSTibFx8cbrh2YGQGaPGny1KlT1Wr14cOHp0yZEhAQ8O67716+fLn1V/n5+VETOvz9/c+ePduuv+jp6bl48WJCyD/+8Q9plWFHg/Sxfft2aZW0qKgoKipq5qyZVKFarZZIJDU1NV9//TW95dixY6OioiQSSWlpqW52Hz9+/Pbt2ysrK8vLy6kBQkLI1GlT9+7dm5eXV1BQsH///tmzZ7OxFiZzOBKOJxw5ciQuLs5Ao9ZdWZdNmzaVlpZKpdLt27e/9dZbTB2pLq61LldX1882ffbrr78qFAqmq9vVZ2wHPlguX77s7e1NpVgDYWz+wpYtW7Zs+cLHx0ckEllYWLi7uy9atKj1l6xZs+a1114TiUQvvfTSzp072/sXw8LCPD09JRJJ5NZIpmpN83nZJ3h68Jw5c7y8vEJnh1KFGzZs+Otf/zp16tShw4bSW65YsUIsFk8Pnh4WFvaXv/zF3NycKv/www+FQmFwcPC8efPoqxlTJk8ZM2bMO+++s2DBgrffDvX392djLXRvh2h0mwS7KhK5NTI/P3/ixIm+/5+hK2K4uowaNWrOnDkzZ860srIywlkbhjsVdU2YMGHmzJlM19WA9W3pjO3AB8t3331n6G/PzMzaMFX6D7q2a7f0eGlOTk5wcHDnxvwiszaMuRamVBETq4ue2jVrw3hqrctwszaMs74vqL2zNpifOw5t2rRpU0VFRUlJyfbt241twLy71cKUKmJidUGtu1t98dvKLDBmzJiZM2cKBIKJEyfOnz+f6XC6dS1MqSImVhfUurvVF9mLAe395e8JEyZMmDCB6ahNsxamVBETqwtqjfq2DlcOAQCAfZC9AACAfZC9AACAfTDu1flM48frTKMWplQRE6sLqowqvyD0vTqToe8ONhzdp0SbRi1MqSImVhc9sbfKuoRC4bBhw7pVlV8Q9UwlfXCa/fF4Kvm3d2YLAABAJ6qurn799ddtbGx++eWXRqvQ9wIAAPZB9gIAAPZB9gIAAPZB9gIAAPZB9gIAAPZB9gIAAPZB9gIAAPZB9gIAAPZB9gJgnkaj6fBaMAY4Rl0P2QuAeQUFT9VqdcfWgjHAMep6yF7AYhqNurDwGdNRvCi5vIHPF/B4vDbXqtUqmUza+t7UalVZ2fPnzwuYrlYH1dXVyuUNTEfRPq0fQTAQPGMe2Kqurvb58wKlUsF0IC+qtLTYxaV3m2traqqfP88nhGNjI25p47Ky51qtpry8zMbGjulqtZtarS4rKy4pKerff6BQaM50OO3Q+hFkRG5uVn193eDBXlzuf7oo1dVVlZXlfD6fEKJSqZycelhYWNLb37v3m1qt0t1D7979HB170P+tqqqsqanmcjn19fUikahnzz/ra7g9tw7ZC9hKJLJ0dOxRXJzf5pY1NTIrK5uOrTU0ubyBy+Xy+YI211pZWTs4OJeXl7WyNyennoQQpVJFWIjH4/Xs2VsqrWA6kD/pc260fgSZIhCYqVRKDodD/VcqrZBInru7D6aSmUqlzMr6vX9/TzrNWFvbuLj0abQHerms7LlGo+nVy40QIpNJc3Ie2draW1iIDLrnNuHKIZg4jUZTXl7asbVdoKzsubOzS8fWmiT6A5dxep4bxnmMevfu5+k5jG5MiaTE0bEH3Q/j8wVisQNdO41GLRCYCYXmuv/ojeXyBomkpEcPV+q/NjbioUN96ARjuD23CdkLTJlSqczPz2lpPljra7uAQiFv9FVU/7VgUHqeG8Z5jLRarUIhr6mR6ZY0NPzXaCKPx6N/HUutVvN4LV6Hk0hKLS2tdUvMzIRdsOc24cohsF5DQ/3z54VarUahUDg69nBwcKLKpdJyhUKh0Wjl8obS0mLqi6G9vWOba6urqwoLn3E4nN69+0skzzkcjlKptLd3tLNzpP+oQiEvLy/l8fhqtaqyUqJQKLy8XqW/VFKXUB49ui8SWfXv79lS5B3reFHfWNVqtVzeYG/v6ODgrGdDKRTykpIigcCMwyFyubxHD1fd4SWqHYRCc5VKqdGo+XyBRFLar5+HPpdVNRr18+eFXC6Xy+U2NNQ7ODjrfiq13lZKpaKwMI/DIVwuTzee+vq6goKnGo26Xz/PkpIiaj8ODs52dg5txqPPazUadXFxgUaj4XA4KpWqZ89e5uYW+pw5rRwjfc4ciaREqVRSUzwaGurpo9BmzBJJSUlJkUaj7t9/oFBoUVJSIJNV9ejRiz7hKTKZtKGhvqqqgsPhenj859jZ2zsWFDwVCoVUJFqttqqqonfv/tRatVrN4/GKivLl8nqlUkEIp0+ffvSlv5qaKltbe5lMWlparFarNRpNjx6udGsYbs9tQvYCdlMqFaWlxX369OfxeEql4uHDTFtbMTUIIRY7UO95QrRN00Ara62tbV1d3fLynshk0r59Pag3YVbWfQ6HQ72KEPLs2WN398HUZ1CPHq7Z2Q+VSoXuh69Go1GpVK1MKlEqFRqNpqUvmy2tVamUEkmJq6sbh8NRqZR//HHPzExobW3bZkOpVMonT/5wdx9EBalQyJ88+cPDY6hAIKCizcl55OExhOpGFBXlabXavn096A/0Vmi12seP/3By6kF9ftXX12ZnPxw27GV6Dl4rbaVWq7OzH/Tp05+qQn193fPnhdSrLCxEPXq45uU9KSsr7t27H5fLVamUDx9m2tjYtvJ1Xs/XarXaJ08eOTr2oHJDfX3d48cPBg16iap+62dOK8eozTPn+fPC2trqAQMGU9tXV1c9e/Zk4MBh+sTs6NjDwsLyyZOHQqG5QCDg8wX9+nmKRJaNorKxEdvYiPl8QUXFn0OkDg7OKpUyLy+nvLzM0dFZJqvq2bM3/Vq1WlVRUdanjztVIpGUPn78x9ChPnSKFQrrlEqFu/sgLpdbUyN78uQPoVBIfUEx3J7bhCuHwG5cLo9KXdQFHIHArNF1jBfZMz2RjMfjOTr2KCkppv6r1Wrr6+voQQUul9e7d79GLzczEw4f7uvpObSl/ZeWFrfyydjSWoVC3rNnb+pP8/kCsdhez3G74uICGxsxnV/NzIQ2Nnb0nJfa2moej0dfAbO2tq2qqrS2ttFnMkJ5ealWq6G7FxwOVyAQaDRqfdpKIinh8wV09rWwEAmF/5WwuVxer179qI4any8QCMwaGur1P4ItvVYqLddoNHS3xsJCJBJZSSQl+p4crR6jVs4cMzOhtfWffVmh0LyhoU7/+lpaWonFDoWFefX1dVotaZq6aE1HDy0sLO3sHHk83tOnjxUKue7wkpmZsFevvvTeHB2duVwudV5pNBqtVltfX08lVEKIlZWNWGxPdUkNvec2jm+7jhaAseHxeLrj/Fwul/7cfPE96/7X3Nyivr6WWuZwOLa29llZ9yWSEmo2sKWlVdNJ3o1i00VdnWtpXngra0UiK93AzM0t6uvriB6k0vJG1wCtrKyqqv6c4KfRaHXXcrn63r1UVVVpZfVn58/c3GLIEG86EbbeVtXVVVZWrX3RbtSGHA5H/5uCW3mtTCZt9NEvFJrX1tbouefWj1ErZ469vaOzs6tSqaioKHv+vKCs7LlWq2302tbr6+rap7paWlSUR0920PMYlZU9d3Nz799/4KBBL6lUyuzsByqVklorEJg1OjdEIis6ZkKIg4OTblQikVVdXa2h99wmZC8AvVBXb+hh/L59B7i49JZKK+7fv/X0aXZ7b7AtLS12cnLp2FpdXC5Pn1knGo1GrVY3mlwgEJhRgw1UZ0sgEFRXV1GrKirK9J9Hp1IpqcuPLWmlrdRqFSNzzVUqpUIhLyt7Tv/TarX6XCal6X+MdM8clUqZk/OouLjAwkLUs2dv6g6HduHzBba2dkqlsl2TMwsKntLT1i0sRNR0RGp0jdLoLOLz+VTW5HK5HA5Hq226VmXoPbfdFO1tO4DuSa1WcThc3XkZtrb2trb2cnmDRFKalfW7p+dQPT/+VCqVSqVqaePW1zaNSp9HPHC5XC6X16hXqlKpqHkW1PU9odC8rq6G+uZrb++kz1gahZqO0fo2LbUVj8frrL5yu/B4fIHArAPJg266dh0j+szJzc0Siayp25s6pr6+jsfj83jc8vJS3Xt+W41WqVQqdPua1PXMykoJ9d9nzx7X1tYMHeqj+xL6u465uajR1Vq1Wk195zDcnvWBvheYOB6Pp3txRncacetr//uKDqmrq6GvcclkUrqbIhSa9+rl5uDgVFVV2ehPq9XqRteFKGVlxa18bra+ttE32YaGej2HuG1txY2uydTV1dja2tHLNTUyGxuxk1PPHj1cG6UurVZbW1vdbF2o26hraqobFdJjSK23lUhk3ejzS6XS96t361G1zsrKRvf61f9vhP8qaeXcaP0YtXTmKJXK2toasdi+AwHTSkqKXFz69O7d//nzAj3bisvlUXN8GrUen/+fLKJQyBvND6qrq6Wv+InFdtXVVbqdJLm8gVpruD3rVa8XaUcA40d9v6M+hqTSikbT1VpZ29BQV139nw8sqtNAP8OGy+U+f16o+9Gm0WhEIivdPSsU8vv3b2VnP2gUj1qtVigULd2S2fpaakYffeVNqVRUV0v1vMTn4tKnokJCz4FUqVRSaQV9zUcksjIzM8/KenD37o3ff7/95MnDkpIiOlMWFeVlZz9o6bEmjo49FYoGOiFptdri4nz6M6j1tnJy6lFTI6NnLkgkJSqVUs+E1HpUrbO3d1KpVHQXgboSqNuxbuXcaPMYtXTm8Pl8Pp+vmzXpzXTnB7aitLTYwcGJy+VaWIhsbe2Li/P0eRWXy+3Zs3dRUT7dsGq1uqJC0rOnK30Eda/9VlZKuFwenWWdnHpyubzi4v/MBVWplDJZFTXqZrg96wNXDoGtGhrqJZKShoZ6eupXaWlxQ0NDWdlzMzMhfVXHwkJkb++Ynf1AKBRaW9s2+tBpZa2FhUgur6+ulqrVaoVC3rfvAEvL/3zm8vmC2trqhw8zbW3tBAIzjUZjYWGpO5eMmnrH5/OaDgi9SMeLEOLmNkAqLVerqQn5at1HAmq12rKy54RoZbJKQohAwCeE4+TUkxogMTMT9u/vWVxcIBCYUbOx+/cfSH8vlkrLhUJh//4jNBp1Q0NDQ0N9RUWZQtHQp4871WficrktzTHh8/mensOKivIrKsr4fAEhWnt7Z7r9W28rgcBswIDBhYV5PB6Px+NbWlqJRFZSabmZmRmHw239+LYSVZvnBpfL9fAYWlycV1lZzucLOByOvb1joyuBLZ0bbR6jls4cDofj7j64qCivoaGey+URorWxsROJrPLychwcnFuPmcvllpYWSyQlffr0p74bqVSqqqoKrZb06tW36dVjrVarm4x79HCVyaQFBU+pHKxWq/r2HUDXyM7Ogc/nFxbmcbkctVqtVqs9PAbrThP19BxaVJT/7NljPl+gVqv69/egm91we24Tp9mvOaNHj66oqLh27ZqlpaWeOwIwJTKZtLg4f9Cglzp3txqNOj8/l7oTqL1rDerhw0z6VjBKdbXs+fN8T89hXR+MMWvzGBnozNGHVqulE0NJSZFKpezVqy+TjdUZSktLx48f369fv+Tk5Earmr9y6OHhQQjJzs5mOnIAxnRsQKWtfZJWHqHd+lqDsrCwbPTbK/X1tba2LzRCY5L0OUaGOHPaRE3ppC72ajTqqqoKPed0GLnHjx8TQjw9m3lgDW/z5s3NvUT7888/P3z40MPDw9ra2szMuJ7iBWBQdXW1paXFtbU11A2hjYZDXgSXy6V+SKIDaw3KxkZcUyOTyaR1dbW1tdXV1VIul2uED59lXOvHyHBnTpt4PH5tbbVUWl5XV1tdLXN1dWPXr8w0otVqa2pq7t69GxkZKZVKV65c2b9//0bbNH/lUKPRrF279vLly0xXAQAAurXp06d//vnnTe9v47TUydVoNGfOpJ45czY7O7uiwoh+cQcAAEyeo6Ojh4fHjBkz3nrrrWZvzeYwcokWAADgReB+LwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYB9kLwAAYJ//B2s6OKzm3zXfAAAAAElFTkSuQmCC " src="SeWfibBcBT0FIf6bc6Gy72bCrevLKupedFxKOJMZxJzNBZXrfyZMCzgJEfgZ4Yz6DylKfqdbUkDBNtYzQibe2ARQ"  data-type="png" data-w="575" style="box-sizing: border-box;outline: 0px;margin-bottom: 24px;word-break: break-all;cursor: zoom-in;"  /><br style="box-sizing: border-box;outline: 0px;word-break: break-all;"  /></p><p>Netty中PoolChunk内部维护一棵满平衡二叉树memoryMap，所有子节点管理的内存也属于其父节点。这么理解，chunk是真正分配内存的空间，它里面的page就是最小可分配的单元，我们发现平衡二叉树的叶子节点(11层)与page一一对应，再往上走，比如1024节点，它指向2048跟2049，那无非1024节点指向了page0跟page1两个存储单元。我们继续看下图<br style="box-sizing: border-box;outline: 0px;word-break: break-all;"  /></p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);"><img class="" data-ratio="0.7054673721340388" src="data:image/PNG;base64,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 " src="SeWfibBcBT0FIf6bc6Gy72bCrevLKuped4lfPIdugYGgkJptQWOSeMwRrXSLFnfXnIpNAtPrsXd5NN02qJfA3tw"  data-type="png" data-w="567" style="box-sizing: border-box;outline: 0px;word-break: break-all;cursor: zoom-in;"  /></p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">这图跟上图的区别无非把节点的id换成了层数。其实完全二叉树天生就可以用数组来表示，于是id跟层数对应起来可以用数组memoryMap表示。数组下标为id，值为层数。depthMap也是这样存的，但它初始化后数据不变了，仅仅查表作用。poolChunk维护memoryMap主要用来标记使用情况。</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;memoryMap[id]&nbsp;=&nbsp;depth_of_id&nbsp;&nbsp;=&gt;&nbsp;it&nbsp;is&nbsp;free&nbsp;/&nbsp;unallocated&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;*&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">2</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;memoryMap[id]&nbsp;&gt;&nbsp;depth_of_id&nbsp;&nbsp;=&gt;&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;its&nbsp;child&nbsp;nodes&nbsp;is&nbsp;allocated,&nbsp;so&nbsp;we&nbsp;cannot&nbsp;allocate&nbsp;it,&nbsp;but&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;some&nbsp;of&nbsp;its&nbsp;children&nbsp;can&nbsp;still&nbsp;be&nbsp;allocated&nbsp;based&nbsp;on&nbsp;their&nbsp;availability&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;*&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">3</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;memoryMap[id]&nbsp;=&nbsp;maxOrder&nbsp;+&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;=&gt;&nbsp;the&nbsp;node&nbsp;is&nbsp;fully&nbsp;allocated&nbsp;&amp;&nbsp;thus&nbsp;none&nbsp;of&nbsp;its&nbsp;children&nbsp;can&nbsp;be&nbsp;allocated,&nbsp;it&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;thus&nbsp;marked&nbsp;as&nbsp;unusable &nbsp;</span></p></li></ol><p><br  /></p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">顺便举个例子吧，我们看下id为512的节点，它层数为9，此时memoryMap[512]=9，说明512节点下面的page一个都没分配，如果此时我们分配了一块page1(随便抽的)，那么按照算法，memoryMap[2049]=12，memoryMap[1024]=11，memoryMap[512]=10。一直更新上去。后面会具体从代码层面分析。</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">道理讲了这么多，看代码吧。构造函数之前都是简单赋值，大小我也注释都标上了，我们看下下面这块代码，其实逻辑也很简单，无非初始化memoryMap跟depthMap，此时可以注意到memoryMap的第一个节点即memoryMap[0]=0，这个元素是空出来的，下标为1的元素才是代表第一个节点，这样也有好处，下标为i的父元素的左孩子就是2*i(i&lt;&lt;1)，右孩子呢? 2*i+1 ((i&lt;&lt;1)^1)。位运算效率总是讨人喜欢的。</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">memoryMap&nbsp;=&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">new</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">[maxSubpageAllocs&nbsp;&lt;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">];&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depthMap&nbsp;=&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">new</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">[memoryMap.length];&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;memoryMapIndex&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">for</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;d&nbsp;&lt;=&nbsp;maxOrder;&nbsp;++&nbsp;d)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;move&nbsp;down&nbsp;the&nbsp;tree&nbsp;one&nbsp;level&nbsp;at&nbsp;a&nbsp;time</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;depth&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&lt;&lt;&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">for</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;p&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;p&nbsp;&lt;&nbsp;depth;&nbsp;++&nbsp;p)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;in&nbsp;each&nbsp;level&nbsp;traverse&nbsp;left&nbsp;to&nbsp;right&nbsp;and&nbsp;set&nbsp;value&nbsp;to&nbsp;the&nbsp;depth&nbsp;of&nbsp;subtree</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryMap[memoryMapIndex]&nbsp;=&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depthMap[memoryMapIndex]&nbsp;=&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;d;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoryMapIndex&nbsp;++;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpages&nbsp;=&nbsp;newSubpageArray(maxSubpageAllocs);&nbsp;&nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">最后无非赋初值subpages。</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">poolChunk的数据结构差不多说清楚了，具体来看下如何向PoolChunk申请空间的</p><h5 style="box-sizing: border-box;outline: 0px;margin-top: 8px;margin-bottom: 16px;font-size: 18px;color: rgb(79, 79, 79);font-weight: 700;line-height: 26px;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">allocate()函数</h5><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">long</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocate(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;normCapacity)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;((normCapacity&nbsp;&amp;&nbsp;subpageOverflowMask)&nbsp;!=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateRun(normCapacity);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">else</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateSubpage(normCapacity);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">} &nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">一开始的位运算就用的很讨人喜欢，(normCapacity &amp; subpageOverflowMask) != 0，normCapacity无非是申请空间的字节数大小，我们可以从构造函数中看到 subpageOverflowMask = ~(pageSize - 1); 那么subpageOverflowMask大小为-8192(光看数值看不出所以然，它在内存中是最高位跟低13位全为0，剩下全为1)那么很容易想到，这句话意思无非等价于normCapacity &gt;= pageSize;</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">然后分两种情况，当申请大小大于pageSize，那么一块page肯定不够，于是需要多块，返回的是可分配normCapacity大小的节点的id；第二中情况，一个page已经够分了，但是实际应用中会存在很多小块内存的分配，如果小块内存也占用一个page明显浪费，于是page也可以继续拆分了，这是后话。我们先来看下allocateRun()</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">long</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateRun(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;normCapacity)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d&nbsp;=&nbsp;maxOrder&nbsp;-&nbsp;(log2(normCapacity)&nbsp;-&nbsp;pageShifts);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id&nbsp;=&nbsp;allocateNode(d);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(id&nbsp;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;freeBytes&nbsp;-=&nbsp;runLength(id);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">}&nbsp;&nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">d表示申请normCapacity大小对应的节点的深度，通过很简单的运算即(normCapacity/8k)再取对数，拿maxOrder(11)减一下。</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">long</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateRun(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;normCapacity)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d&nbsp;=&nbsp;maxOrder&nbsp;-&nbsp;(log2(normCapacity)&nbsp;-&nbsp;pageShifts);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id&nbsp;=&nbsp;allocateNode(d);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(id&nbsp;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;freeBytes&nbsp;-=&nbsp;runLength(id);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">}&nbsp;&nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">d表示申请normCapacity大小对应的节点的深度，通过很简单的运算即(normCapacity/8k)再取对数，拿maxOrder(11)减一下。</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateNode(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id&nbsp;=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;initial&nbsp;=&nbsp;-&nbsp;(</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&lt;&lt;&nbsp;d);&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;has&nbsp;last&nbsp;d&nbsp;bits&nbsp;=&nbsp;0&nbsp;and&nbsp;rest&nbsp;all&nbsp;=&nbsp;1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(val&nbsp;&gt;&nbsp;d)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;unusable</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;-</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">while</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(val&nbsp;&lt;&nbsp;d&nbsp;||&nbsp;(id&nbsp;&amp;&nbsp;initial)&nbsp;==&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;id&nbsp;&amp;&nbsp;initial&nbsp;==&nbsp;1&nbsp;&lt;&lt;&nbsp;d&nbsp;for&nbsp;all&nbsp;ids&nbsp;at&nbsp;depth&nbsp;d,&nbsp;for&nbsp;&lt;&nbsp;d&nbsp;it&nbsp;is&nbsp;0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&lt;&lt;=&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(val&nbsp;&gt;&nbsp;d)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;^=&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;value&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">assert</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;value&nbsp;==&nbsp;d&nbsp;&amp;&amp;&nbsp;(id&nbsp;&amp;&nbsp;initial)&nbsp;==&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&lt;&lt;&nbsp;d&nbsp;:&nbsp;String.format(</span><span class="string" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: blue;background-color: inherit;">"val&nbsp;=&nbsp;%d,&nbsp;id&nbsp;&amp;&nbsp;initial&nbsp;=&nbsp;%d,&nbsp;d&nbsp;=&nbsp;%d"</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">,&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,&nbsp;id&nbsp;&amp;&nbsp;initial,&nbsp;d);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue(id,&nbsp;unusable);&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;mark&nbsp;as&nbsp;unusable</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateParentsAlloc(id);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;</span></p></li></ol><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);">id赋初值为1，从根节点开始找，如果(val &gt; d)</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;">第一层的节点的值大于d,表示d层及以上都不可分配，说明当前Chunk取不出那么大的空间，此次分配失败</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;"></span></span><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);">。一直在树上找直到找到与d恰好匹配的节点，即高度不小于d并且最小可分配，id&lt;&lt;=1往下一层走；当前节点对应大小不够分配，则id^=1切换到父节点的另一子节点中(若父节点够分配，则此节点肯定能分配)；找到对应节点id后，把当前节点的值设为不可用，并且递归循环调整父节点的MemoryMap的值</span></p><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"></span></p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">void</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;updateParentsAlloc(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">while</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(id&nbsp;&gt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;parentId&nbsp;=&nbsp;id&nbsp;&gt;&gt;&gt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val1&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val2&nbsp;=&nbsp;value(id&nbsp;^&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val&nbsp;=&nbsp;val1&nbsp;&lt;&nbsp;val2&nbsp;?&nbsp;val1&nbsp;:&nbsp;val2;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue(parentId,&nbsp;val);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;=&nbsp;parentId;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">} &nbsp;</span></p></li></ol><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"></span></p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">代码逻辑很简单，父节点值设为子节点中的最小值。直到根节点，调整结束。</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">我们再看当申请大小小于pageSize的第二种情况：</p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">long</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;allocateSubpage(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;normCapacity)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;Obtain&nbsp;the&nbsp;head&nbsp;of&nbsp;the&nbsp;PoolSubPage&nbsp;pool&nbsp;that&nbsp;is&nbsp;owned&nbsp;by&nbsp;the&nbsp;PoolArena&nbsp;and&nbsp;synchronize&nbsp;on&nbsp;it.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;This&nbsp;is&nbsp;need&nbsp;as&nbsp;we&nbsp;may&nbsp;add&nbsp;it&nbsp;back&nbsp;and&nbsp;so&nbsp;alter&nbsp;the&nbsp;linked-list&nbsp;structure.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;head&nbsp;=&nbsp;arena.findSubpagePoolHead(normCapacity);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">synchronized</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(head)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;d&nbsp;=&nbsp;maxOrder;&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;subpages&nbsp;are&nbsp;only&nbsp;be&nbsp;allocated&nbsp;from&nbsp;pages&nbsp;i.e.,&nbsp;leaves</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id&nbsp;=&nbsp;allocateNode(d);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(id&nbsp;&lt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">final</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;PoolSubpage&lt;T&gt;[]&nbsp;subpages&nbsp;=&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.subpages;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">final</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;pageSize&nbsp;=&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">.pageSize;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeBytes&nbsp;-=&nbsp;pageSize;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;subpageIdx&nbsp;=&nbsp;subpageIdx(id);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;subpage&nbsp;=&nbsp;subpages[subpageIdx];&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(subpage&nbsp;==&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">null</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpage&nbsp;=&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">new</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;PoolSubpage&lt;T&gt;(head,&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">this</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">,&nbsp;id,&nbsp;runOffset(id),&nbsp;pageSize,&nbsp;normCapacity);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpages[subpageIdx]&nbsp;=&nbsp;subpage;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">else</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subpage.init(head,&nbsp;normCapacity);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;subpage.allocate();&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">针对这种情况，可以将8K的page拆成更小的块，这已经超出chunk的管理范围了，这个时候就出现了PoolSubpage, 通过normCapacity大小找到对应的PoolSubpage头结点，然后加锁(分配过程会改变链表结构)，d=maxOrder，因此此时只需一块page足够，所以d直接设置为maxOrder即叶子节点就ok，通过allcNode()分配到节点的id，如果id小于0表示分配失败(叶子节点分配完了)返回。之后找到最高的合适节点后，开始新建(并加入到poolChunk的subpages数组中)或初始化subpage，然后调用subpage的allocate()申请空间，返回了个handle;下一篇博文会将subpage的具体逻辑。</p><h5 style="box-sizing: border-box;outline: 0px;margin-top: 8px;margin-bottom: 16px;font-size: 18px;color: rgb(79, 79, 79);font-weight: 700;line-height: 26px;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">我们再来看下释放空间，free()函数。</h5><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">void</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;free(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">long</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;handle)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;memoryMapIdx&nbsp;=&nbsp;memoryMapIdx(handle);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;bitmapIdx&nbsp;=&nbsp;bitmapIdx(handle);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(bitmapIdx&nbsp;!=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;free&nbsp;a&nbsp;subpage</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;subpage&nbsp;=&nbsp;subpages[subpageIdx(memoryMapIdx)];&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">assert</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;subpage&nbsp;!=&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">null</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&amp;&amp;&nbsp;subpage.doNotDestroy;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;Obtain&nbsp;the&nbsp;head&nbsp;of&nbsp;the&nbsp;PoolSubPage&nbsp;pool&nbsp;that&nbsp;is&nbsp;owned&nbsp;by&nbsp;the&nbsp;PoolArena&nbsp;and&nbsp;synchronize&nbsp;on&nbsp;it.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;This&nbsp;is&nbsp;need&nbsp;as&nbsp;we&nbsp;may&nbsp;add&nbsp;it&nbsp;back&nbsp;and&nbsp;so&nbsp;alter&nbsp;the&nbsp;linked-list&nbsp;structure.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;head&nbsp;=&nbsp;arena.findSubpagePoolHead(subpage.elemSize);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">synchronized</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(head)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(subpage.free(head,&nbsp;bitmapIdx&nbsp;&amp;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0x3FFFFFFF</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">))&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeBytes&nbsp;+=&nbsp;runLength(memoryMapIdx);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue(memoryMapIdx,&nbsp;depth(memoryMapIdx));&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateParentsFree(memoryMapIdx);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;</span></p></li></ol><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);">其中传入的handle无非是allocate得到的handle，通过handle得到page的id，如果通过handle计算得到的bitmapIdx为0，则表示是之前申请空间的第一种条件，大小大于pageSize，于是直接释放整个节点对应的page空间，则将其memoryMap[id]=其对应的层数（depth[id]）,于是调整父亲节点，此时是申请时的逆过程。</span></p><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"></span></p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">private</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">void</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;updateParentsFree(</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;id)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;logChild&nbsp;=&nbsp;depth(id)&nbsp;+&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">while</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(id&nbsp;&gt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">int</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;parentId&nbsp;=&nbsp;id&nbsp;&gt;&gt;&gt;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val1&nbsp;=&nbsp;value(id);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val2&nbsp;=&nbsp;value(id&nbsp;^&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">);&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logChild&nbsp;-=&nbsp;<span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;in&nbsp;first&nbsp;iteration&nbsp;equals&nbsp;log,&nbsp;subsequently&nbsp;reduce&nbsp;1&nbsp;from&nbsp;logChild&nbsp;as&nbsp;we&nbsp;traverse&nbsp;up</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(val1&nbsp;==&nbsp;logChild&nbsp;&amp;&amp;&nbsp;val2&nbsp;==&nbsp;logChild)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue(parentId,&nbsp;(<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;(logChild&nbsp;-&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">1</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">));&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">else</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">byte</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;val&nbsp;=&nbsp;val1&nbsp;&lt;&nbsp;val2&nbsp;?&nbsp;val1&nbsp;:&nbsp;val2;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setValue(parentId,&nbsp;val);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;=&nbsp;parentId;&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li></ol><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">如果左右孩子value值一样，则父节点value设为孩子的value-1，否则设为孩子节点的最小值。</p><p style="box-sizing: border-box;outline: 0px;margin-bottom: 16px;font-size: 16px;color: rgb(79, 79, 79);line-height: 26px;text-align: justify;word-break: break-all;font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;white-space: normal;background-color: rgb(255, 255, 255);">第二种情况，则需释放subpage再继续上面介绍的释放page。</p><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"></span></p><ol start="1" class="dp-j list-paddingleft-2" style=""><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;"><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(bitmapIdx&nbsp;!=&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">)&nbsp;{&nbsp;</span><span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;free&nbsp;a&nbsp;subpage</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;subpage&nbsp;=&nbsp;subpages[subpageIdx(memoryMapIdx)];&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">assert</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;subpage&nbsp;!=&nbsp;</span><span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">null</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&amp;&amp;&nbsp;subpage.doNotDestroy;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;Obtain&nbsp;the&nbsp;head&nbsp;of&nbsp;the&nbsp;PoolSubPage&nbsp;pool&nbsp;that&nbsp;is&nbsp;owned&nbsp;by&nbsp;the&nbsp;PoolArena&nbsp;and&nbsp;synchronize&nbsp;on&nbsp;it.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 130, 0);background-color: inherit;">//&nbsp;This&nbsp;is&nbsp;need&nbsp;as&nbsp;we&nbsp;may&nbsp;add&nbsp;it&nbsp;back&nbsp;and&nbsp;so&nbsp;alter&nbsp;the&nbsp;linked-list&nbsp;structure.</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PoolSubpage&lt;T&gt;&nbsp;head&nbsp;=&nbsp;arena.findSubpagePoolHead(subpage.elemSize);&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">synchronized</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(head)&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">if</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">&nbsp;(subpage.free(head,&nbsp;bitmapIdx&nbsp;&amp;&nbsp;</span><span class="number" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(192, 0, 0);background-color: inherit;">0x3FFFFFFF</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">))&nbsp;{&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: rgb(0, 102, 153);font-weight: bold;background-color: inherit;">return</span><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;background-color: inherit;">;&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></p></li><li><p><span style="box-sizing: border-box;outline: 0px;word-break: break-all;border: none;color: black;background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;</span></p></li></ol><p><span style="color: rgb(79, 79, 79);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 16px;line-height: 26px;text-align: justify;background-color: rgb(255, 255, 255);"></span><span style="color: rgb(51, 51, 51);font-family: &#39;PingFang SC&#39;, &#39;Microsoft YaHei&#39;, SimHei, Arial, SimSun;font-size: 14px;line-height: 22px;background-color: rgb(255, 255, 255);">这儿有涉及到subpage部分不是讲得很清，没关系，以poolChunk为netty内存池的切入点。接下来会，向下细挖subpage，向上探索poolArea等等。</span></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">作者：泮小俊</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='http://i.ijrou.com' target='_blank'>
			我的博客
		</a>
	</div>
</body>